{"version":3,"sources":["webpack:///src/app/views/advertisement/advertisement.component.ts","webpack:///src/app/views/advertisement/advertisement.component.html","webpack:///src/app/views/advertisement/advertisement.module.ts","webpack:///src/app/views/advertisement/advertisement-routing.module.ts"],"names":["AdvertisementComponent","dataservice","router","fb","toastr","loading","btnLoading","disableButton","orders","baseURL","apiUrl","advertisementForm","group","clickUrl","File","required","rowData","file","console","log","getAdvertisements","getDashboardAd","valueChanges","subscribe","result","data","advertisement","getRetailerAd","retailerAdvertisement","event","i","target","files","length","push","check","advertisementModal","show","resp","value","upload","fileResponse","status","body","id","updateRetailerAd","updateRetailerAdvertisement","success","hide","error","updateDashboardAd","updateAdvertisement","template","AdvertisementModule","imports","withComponents","forRoot","declarations","routes","path","children","redirectTo","component","roles","title","AdvertisementRoutingModule","forChild","exports"],"mappings":"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","file":"views-advertisement-advertisement-module-es5.js","sourcesContent":["import { Component, ViewChild } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { DataService } from \"../../data.service\";\nimport { ModalDirective } from \"ngx-bootstrap/modal\";\nimport { environment } from \"../../../environments/environment\";\n\n@Component({\n  templateUrl: \"advertisement.component.html\",\n})\nexport class AdvertisementComponent {\n  rowSelection: string;\n  constructor(\n    public dataservice: DataService,\n    public router: Router,\n    private fb: FormBuilder,\n    private toastr: ToastrService\n  ) {}\n  @ViewChild(\"advertisementModal\") public advertisementModal: ModalDirective;\n\n  loading = true;\n  btnLoading = false;\n  disableButton = true;\n  orders: any = {};\n  baseURL = environment.apiUrl;\n\n  advertisementForm = this.fb.group({\n    clickUrl: [\"\"],\n    File: [\"\", Validators.required],\n  });\n\n  rowData: any = [];\n  advertisement;\n  retailerAdvertisement;\n  file: any = null;\n  check;\n\n  ngOnInit(): void {\n    this.loading = true;\n    console.log(this.router);\n    this.getAdvertisements();\n  }\n  getAdvertisements() {\n    this.dataservice.getDashboardAd().valueChanges.subscribe((result: any) => {\n      console.log(\"advertisement\", result.data.advertisement.data);\n      this.advertisement = result.data.advertisement.data;\n    });\n    this.dataservice.getRetailerAd().valueChanges.subscribe((result: any) => {\n      console.log(\n        \"retailerAdvertisement\",\n        result.data.retailerAdvertisement.data\n      );\n      this.retailerAdvertisement = result.data.retailerAdvertisement.data;\n    });\n  }\n  // On file Select\n  onChange(event: any) {\n    this.file = [];\n    for (var i = 0; i < event.target.files.length; i++) {\n      this.file.push(event.target.files[i]);\n    }\n    console.log(this.file);\n  }\n  openModal(data: any) {\n    // this.deleteModal.show();\n    this.check = data;\n    console.log(data);\n    this.advertisementModal.show();\n  }\n  advertisementSubmit() {\n    let resp = {};\n    let file = null;\n    this.btnLoading = true;\n    console.log(this.advertisementForm.value);\n    this.dataservice.upload(this.file).subscribe((fileResponse: any) => {\n      if (fileResponse.status == 200) {\n        file = fileResponse.body[0]?.id;\n        console.log(fileResponse);\n        if (this.check == true) {\n          this.dataservice\n            .updateRetailerAd(this.advertisementForm?.value?.clickUrl, file)\n            .subscribe((result: any) => {\n              resp = result.data;\n              console.log(\"response\", result);\n              if (result.data.updateRetailerAdvertisement) {\n                this.toastr.success(\"Success!\");\n                this.getAdvertisements();\n                this.btnLoading = false;\n                this.advertisementModal.hide();\n              } else {\n                this.toastr.error(\"Failed. Please check the fields!\");\n                this.btnLoading = false;\n              }\n            });\n        } else {\n          this.dataservice\n            .updateDashboardAd(this.advertisementForm?.value?.clickUrl, file)\n            .subscribe((result: any) => {\n              resp = result.data;\n              console.log(\"response\", result);\n              if (result.data.updateAdvertisement) {\n                this.toastr.success(\"Success!\");\n                this.getAdvertisements();\n                this.btnLoading = false;\n                this.advertisementModal.hide();\n              } else {\n                this.toastr.error(\"Failed. Please check the fields!\");\n                this.btnLoading = false;\n              }\n            });\n        }\n      } else {\n        this.toastr.error(\"Image failed to upload!\");\n        this.btnLoading = false;\n      }\n    });\n  }\n}\n","export default \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"card\\\">\\n    <div class=\\\"card-header\\\" style=\\\"display: flex; justify-content: space-between\\\">\\n      <h2>Best Crop Practices</h2>\\n      <div>\\n      </div>\\n    </div>\\n    <div class=\\\"card-body\\\">\\n      <p class=\\\"text-muted\\\">Images to uploaded need to be of 375 x 80 resolution</p>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-6\\\">\\n          <div class=\\\"card\\\">\\n            <div class=\\\"img-container\\\">\\n              <img class=\\\"card-img-top\\\" height=\\\"200\\\" width=\\\"200\\\"\\n                src=\\\"{{baseURL}}{{retailerAdvertisement?.attributes?.Image?.data?.attributes?.url}}\\\" alt=\\\"Card image cap\\\" />\\n              <div class=\\\"overlay\\\">\\n                <div class=\\\"overlay-text\\\"><a target=\\\"_blank\\\"\\n                    href=\\\"{{baseURL}}{{retailerAdvertisement?.attributes?.Image?.data?.attributes?.url}}\\\" style=\\\"color: white;\\\">Click\\n                    to view file</a></div>\\n              </div>\\n            </div>\\n            <div class=\\\"card-body\\\">\\n              <div style=\\\"display: flex; justify-content: space-between\\\">\\n                <h5 class=\\\"card-title\\\">\\n                  Retailer Advertisement\\n                </h5>\\n                <div>\\n                  <!-- <button type=\\\"button\\\" class=\\\"btn btn-outline-primary p-1\\\">\\n                    <img src=\\\"../../../assets/edit.svg\\\">\\n                  </button> -->\\n                  <button type=\\\"button\\\" class=\\\"btn btn-outline-primary p-1\\\" (click)=\\\"openModal(true)\\\">\\n                    Change\\n                  </button>\\n                </div>\\n              </div>\\n              <!-- <p class=\\\"card-text\\\">\\n                {{retailerAdvertisement?.attributes?.url}}\\n              </p> -->\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n          <div class=\\\"card\\\">\\n            <div class=\\\"img-container\\\">\\n              <img class=\\\"card-img-top\\\" height=\\\"200\\\" width=\\\"200\\\"\\n                src=\\\"{{baseURL}}{{advertisement?.attributes?.AdImage?.data?.attributes?.url}}\\\" alt=\\\"Card image cap\\\" />\\n              <div class=\\\"overlay\\\">\\n                <div class=\\\"overlay-text\\\"><a target=\\\"_blank\\\"\\n                    href=\\\"{{baseURL}}{{advertisement?.attributes?.AdImage?.data?.attributes?.url}}\\\" style=\\\"color: white;\\\">Click\\n                    to view file</a></div>\\n              </div>\\n            </div>\\n            <div class=\\\"card-body\\\">\\n              <div style=\\\"display: flex; justify-content: space-between\\\">\\n                <h5 class=\\\"card-title\\\">\\n                  Dashboard Advertisement\\n                </h5>\\n                <div>\\n                  <!-- <button type=\\\"button\\\" class=\\\"btn btn-outline-primary p-1\\\">\\n                    <img src=\\\"../../../assets/edit.svg\\\">\\n                  </button> -->\\n                  <button type=\\\"button\\\" class=\\\"btn btn-outline-primary p-1\\\" (click)=\\\"openModal(false)\\\">\\n                    Change\\n                  </button>\\n                </div>\\n              </div>\\n              <!-- <p class=\\\"card-text\\\">\\n                {{advertisement?.attributes?.url}}\\n              </p> -->\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<div bsModal #advertisementModal=\\\"bs-modal\\\" class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"myModalLabel\\\"\\n  aria-hidden=\\\"true\\\">\\n  <div class=\\\"modal-dialog modal-dialog-centered\\\" role=\\\"document\\\">\\n    <div class=\\\"modal-content\\\">\\n      <div class=\\\"modal-header\\\">\\n        <h4 class=\\\"modal-title\\\">Change Advertisement</h4>\\n        <button type=\\\"button\\\" class=\\\"close\\\" (click)=\\\"advertisementModal.hide()\\\" aria-label=\\\"Close\\\">\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\n        </button>\\n      </div>\\n      <div class=\\\"modal-body\\\">\\n        <form [formGroup]=\\\"advertisementForm\\\" (ngSubmit)=\\\"advertisementSubmit()\\\">\\n          <!-- <div class=\\\"form-group\\\">\\n            <label for=\\\"content\\\">Redirect URL (Optional)</label>\\n            <textarea type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"clickUrl\\\" maxlength=\\\"150\\\" name=\\\"clickUrl\\\" rows=\\\"3\\\" formControlName=\\\"clickUrl\\\"\\n              placeholder=\\\"Enter URL\\\"></textarea>\\n          </div> -->\\n          <div class=\\\"form-group\\\">\\n            <label for=\\\"File\\\">Image</label>\\n            <div><input type=\\\"file\\\" id=\\\"File\\\" accept=\\\".jpg, .jpeg, .png\\\" name=\\\"File\\\" (change)=\\\"onChange($event)\\\"\\n              formControlName=\\\"File\\\" placeholder=\\\"Choose file\\\" /></div>\\n          </div>\\n          <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"advertisementModal.hide()\\\">\\n            Close\\n          </button>\\n          <button type=\\\"submit\\\" class=\\\"btn btn-primary ml-2\\\" [disabled]=\\\"btnLoading || !advertisementForm.valid\\\">\\n            <span *ngIf=\\\"btnLoading\\\" class=\\\"spinner-border spinner-border-sm\\\" role=\\\"status\\\" aria-hidden=\\\"true\\\"></span>\\n            Save changes\\n          </button>\\n        </form>\\n      </div>\\n    </div>\\n    <!-- /.modal-content -->\\n  </div>\\n  <!-- /.modal-dialog -->\\n</div>\";","import { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\n\nimport { AdvertisementComponent } from './advertisement.component';\n\n// Dropdowns Component\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { TabsModule } from 'ngx-bootstrap/tabs';\n\n// Buttons Routing\nimport { AdvertisementRoutingModule } from './advertisement-routing.module';\n\n// Angular\nimport { AgGridModule } from 'ag-grid-angular';\nimport { ModalModule } from 'ngx-bootstrap/modal';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TabsModule,\n    ReactiveFormsModule,\n    AgGridModule.withComponents([]),\n    AdvertisementRoutingModule,\n    BsDropdownModule.forRoot(),\n    ModalModule.forRoot(),\n    FormsModule\n  ],\n  declarations: [\n    AdvertisementComponent,\n  ]\n})\nexport class AdvertisementModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AdvertisementComponent } from './advertisement.component';\nimport { AuthGuard } from '../login/auth.guard';\n\nconst routes: Routes = [\n  {\n    path: '',\n    \n    children: [\n      {\n        path: '',\n        redirectTo: 'cropprices'\n      },\n      {\n        path: 'all',\n        // canActivate: [AuthGuard],\n        component: AdvertisementComponent,\n        data: {\n          roles: 'KP_CALLER',\n          title: 'Advertisement'\n        }\n      },\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AdvertisementRoutingModule {}\n"]}