(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"/dPm":function(t,e,s){"use strict";s.r(e),s.d(e,"SoilTestModule",function(){return T});var l=s("SVse"),i=s("s7LF"),a=s("YFAK"),r=s("LqlI"),o=s("Osdn"),b=s("iInd"),d=s("R7Hv"),u=s("7nfi"),n=s("8Y7J"),c=s("EApP");const v=["myModal"],m=["resultModal"];function S(t,e){if(1&t){const t=n.Tb();n.Sb(0,"button",3),n.Zb("click",function(){n.vc(t);const e=n.cc().$implicit;return n.cc().openModal(e,"edit")}),n.Dc(1," Edit results "),n.Rb()}}function h(t,e){if(1&t){const t=n.Tb();n.Sb(0,"button",3),n.Zb("click",function(){n.vc(t);const e=n.cc().$implicit;return n.cc().openModal(e,"add")}),n.Dc(1," Add results "),n.Rb()}}function p(t,e){if(1&t&&(n.Sb(0,"div",79),n.Sb(1,"div",1),n.Sb(2,"div",4),n.Sb(3,"div",7),n.Sb(4,"h5",80),n.Dc(5),n.Rb(),n.Bc(6,S,2,0,"button",81),n.Bc(7,h,2,0,"button",81),n.Rb(),n.Sb(8,"p",82),n.Dc(9),n.Rb(),n.Sb(10,"p",82),n.Dc(11),n.Rb(),n.Sb(12,"p",82),n.Dc(13),n.Rb(),n.Sb(14,"p"),n.Dc(15),n.Rb(),n.Sb(16,"table",83),n.Sb(17,"tbody"),n.Sb(18,"tr"),n.Sb(19,"th"),n.Dc(20,"Parameter"),n.Rb(),n.Sb(21,"th"),n.Dc(22,"Value observed"),n.Rb(),n.Rb(),n.Sb(23,"tr"),n.Sb(24,"td"),n.Dc(25,"pH"),n.Rb(),n.Sb(26,"td"),n.Dc(27),n.Rb(),n.Rb(),n.Sb(28,"tr"),n.Sb(29,"td"),n.Dc(30,"Organic Carbon"),n.Rb(),n.Sb(31,"td"),n.Dc(32),n.Rb(),n.Rb(),n.Sb(33,"tr"),n.Sb(34,"td"),n.Dc(35,"Total Nitrogen"),n.Rb(),n.Sb(36,"td"),n.Dc(37),n.Rb(),n.Rb(),n.Sb(38,"tr"),n.Sb(39,"td"),n.Dc(40,"Phosphorous"),n.Rb(),n.Sb(41,"td"),n.Dc(42),n.Rb(),n.Rb(),n.Sb(43,"tr"),n.Sb(44,"td"),n.Dc(45,"Pottasium"),n.Rb(),n.Sb(46,"td"),n.Dc(47),n.Rb(),n.Rb(),n.Sb(48,"tr"),n.Sb(49,"td"),n.Dc(50,"Calcium"),n.Rb(),n.Sb(51,"td"),n.Dc(52),n.Rb(),n.Rb(),n.Sb(53,"tr"),n.Sb(54,"td"),n.Dc(55,"Magnesium"),n.Rb(),n.Sb(56,"td"),n.Dc(57),n.Rb(),n.Rb(),n.Sb(58,"tr"),n.Sb(59,"td"),n.Dc(60,"Zinc"),n.Rb(),n.Sb(61,"td"),n.Dc(62),n.Rb(),n.Rb(),n.Sb(63,"tr"),n.Sb(64,"td"),n.Dc(65,"Sulphur"),n.Rb(),n.Sb(66,"td"),n.Dc(67),n.Rb(),n.Rb(),n.Sb(68,"tr"),n.Sb(69,"td"),n.Dc(70,"Iron"),n.Rb(),n.Sb(71,"td"),n.Dc(72),n.Rb(),n.Rb(),n.Sb(73,"tr"),n.Sb(74,"td"),n.Dc(75,"Copper"),n.Rb(),n.Sb(76,"td"),n.Dc(77),n.Rb(),n.Rb(),n.Sb(78,"tr"),n.Sb(79,"td"),n.Dc(80,"Boron"),n.Rb(),n.Sb(81,"td"),n.Dc(82),n.Rb(),n.Rb(),n.Sb(83,"tr"),n.Sb(84,"td"),n.Dc(85,"Manganese"),n.Rb(),n.Sb(86,"td"),n.Dc(87),n.Rb(),n.Rb(),n.Sb(88,"tr"),n.Sb(89,"td"),n.Dc(90,"Recommended Urea Qty"),n.Rb(),n.Sb(91,"td"),n.Dc(92),n.Rb(),n.Rb(),n.Sb(93,"tr"),n.Sb(94,"td"),n.Dc(95,"Recommended NPK Qty"),n.Rb(),n.Sb(96,"td"),n.Dc(97),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&t){const t=e.$implicit,s=n.cc();n.Ab(5),n.Fc(" Sample ID : ",null==t||null==t.attributes?null:t.attributes.SampleID," "),n.Ab(1),n.jc("ngIf",null==t||null==t.attributes||null==t.attributes.soil_test_results?null:t.attributes.soil_test_results.data[0]),n.Ab(1),n.jc("ngIf",!(null!=t&&null!=t.attributes&&null!=t.attributes.soil_test_results&&t.attributes.soil_test_results.data[0])),n.Ab(2),n.Fc(" Quantity of samples : ",null==t||null==t.attributes?null:t.attributes.QuantityOfSamples," "),n.Ab(2),n.Fc(" Created on : ",s.dateConvertor(null==t||null==t.attributes?null:t.attributes.createdAt)," "),n.Ab(2),n.Fc(" Added by : ",null==t||null==t.attributes||null==t.attributes.SampleAddedBy||null==t.attributes.SampleAddedBy.data||null==t.attributes.SampleAddedBy.data.attributes?null:t.attributes.SampleAddedBy.data.attributes.Name," "),n.Ab(2),n.Fc("Result updated on : ",s.dateConvertor(null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.updatedAt),""),n.Ab(12),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.phObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.OrganicCarbonObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.TotalNitrogenObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.PhosphorousObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.PotassiumObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.CalciumObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.MagnesiumObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.ZincObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.SulphurObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.IronObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.CopperObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.BoronObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.ManganeseObserved," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.RecommendedUreaQty," "),n.Ab(5),n.Fc(" ",null==t||null==t.attributes||null==t.attributes.soil_test_results||null==t.attributes.soil_test_results.data[0]||null==t.attributes.soil_test_results.data[0].attributes?null:t.attributes.soil_test_results.data[0].attributes.RecommendedNPKQty," ")}}function g(t,e){if(1&t&&(n.Sb(0,"option",84),n.Dc(1),n.Rb()),2&t){const t=e.$implicit;n.kc("value",t.id),n.Ab(1),n.Fc(" ",t.attributes.Name," ")}}function R(t,e){if(1&t&&(n.Sb(0,"option",84),n.Dc(1),n.Rb()),2&t){const t=e.$implicit;n.kc("value",t.id),n.Ab(1),n.Fc(" ",t.attributes.Name," ")}}function f(t,e){if(1&t&&(n.Sb(0,"option",84),n.Dc(1),n.Rb()),2&t){const t=e.$implicit;n.kc("value",t.id),n.Ab(1),n.Fc(" ",t.attributes.Name," ")}}function _(t,e){if(1&t&&(n.Sb(0,"option",84),n.Dc(1),n.Rb()),2&t){const t=e.$implicit;n.kc("value",t.id),n.Ab(1),n.Fc(" ",t.attributes.Name," ")}}function D(t,e){1&t&&n.Nb(0,"span",85)}function O(t,e){1&t&&n.Nb(0,"span",85)}let C=(()=>{class t{constructor(t,e,s,l,a){this.dataservice=t,this.activatedRouter=e,this.router=s,this.fb=l,this.toastr=a,this.loading=!0,this.details=[],this.btnLoading=!1,this.dateConverterMin=u.s,this.dateConverter=u.r,this.users=[],this.Villages=[],this.LGA=[],this.Areas=[],this.Farmers=[],this.States=[],this.Crops=[],this.agentForm=this.fb.group({ContactNumber:["",i.s.required],ReasonForSoilTest:["",i.s.required],Status:["",i.s.required],nutrient:["",i.s.required],Farmer:["",i.s.required],area:["",i.s.required],state:["",i.s.required],lga:["",i.s.required]}),this.resultForm=this.fb.group({soil_test_sample:[""],phObserved:["",i.s.required],OrganicCarbonObserved:["",i.s.required],TotalNitrogenObserved:["",i.s.required],PhosphorousObserved:["",i.s.required],PotassiumObserved:["",i.s.required],CalciumObserved:["",i.s.required],MagnesiumObserved:["",i.s.required],ZincObserved:["",i.s.required],SulphurObserved:["",i.s.required],IronObserved:["",i.s.required],CopperObserved:["",i.s.required],BoronObserved:["",i.s.required],ManganeseObserved:["",i.s.required],RecommendedUreaQty:["",i.s.required],RecommendedNPKQty:["",i.s.required]})}ngOnInit(){this.getLists(),this.getAreas(),this.getCrops(),this.getLGAs(),this.getStates(),this.getVillages(),this.getFarmers(),this.activatedRouter.params.subscribe(t=>{this.id=t.id}),this.getTest()}getTest(){this.dataservice.getsingleSoilTests(this.id).valueChanges.subscribe(t=>{var e,s,l,a,r,o,b,d,u,n,c,v,m,S,h;console.log("getsingleSoilTests",t.data.soilTest.data),this.details=t.data.soilTest.data,this.agentForm=this.fb.group({ContactNumber:[null===(e=this.details.attributes)||void 0===e?void 0:e.ContactNumber,i.s.required],ReasonForSoilTest:[null===(l=null===(s=this.details)||void 0===s?void 0:s.attributes)||void 0===l?void 0:l.ReasonForSoilTest,i.s.required],Status:[null===(r=null===(a=this.details)||void 0===a?void 0:a.attributes)||void 0===r?void 0:r.Status,i.s.required],nutrient:[null===(b=null===(o=this.details)||void 0===o?void 0:o.attributes)||void 0===b?void 0:b.nutrient,i.s.required],Farmer:[null===(u=null===(d=this.details)||void 0===d?void 0:d.attributes)||void 0===u?void 0:u.Farmer.data.id,i.s.required],area:[null===(c=null===(n=this.details)||void 0===n?void 0:n.attributes)||void 0===c?void 0:c.area.data.id,i.s.required],state:[null===(m=null===(v=this.details)||void 0===v?void 0:v.attributes)||void 0===m?void 0:m.lga.data.attributes.state.data.id,i.s.required],lga:[null===(h=null===(S=this.details)||void 0===S?void 0:S.attributes)||void 0===h?void 0:h.lga.data.id,i.s.required]}),this.loading=!1})}getCrops(){this.dataservice.getCrops(1,1e4,"").valueChanges.subscribe(t=>{console.log("getCrops",t.data.crops.data),this.Crops=t.data.crops.data})}getStates(){this.dataservice.getStates(1,1e4,"").valueChanges.subscribe(t=>{console.log("getStates",t.data.states.data),this.States=t.data.states.data})}getLGAs(t){this.dataservice.getLGAs(1,1e4,"",t).valueChanges.subscribe(t=>{console.log("getLGAs",t.data.lgas.data),this.LGA=t.data.lgas.data})}getAreas(t){this.dataservice.getAreas(1,1e4,"",t).valueChanges.subscribe(t=>{console.log("getAreas",t.data.areas.data),this.Areas=t.data.areas.data})}getFarmers(){this.dataservice.getUsers(void 0,void 0,"Farmer").valueChanges.subscribe(t=>{console.log("getFarmers",t.data.usersPermissionsUsers.data),this.Farmers=t.data.usersPermissionsUsers.data})}getVillages(){this.dataservice.getVillages(1,1e4,"").valueChanges.subscribe(t=>{console.log("getVillages",t.data.villages.data),this.Villages=t.data.villages.data})}dateConvertor(t){return null==t?"Nil":new Date(t)}getLists(){this.loading=!0}openModal(t,e){var s,l,a,r,o,b,d,u,n,c,v,m,S,h,p,g,R,f,_,D,O,C,A,y,N,F,T,M,q,P,E,L,w,x,B,I,k,Q,Z,G,j,U,K,z,$,V,J,H,W,Y,X,tt,et,st,lt,it,at,rt,ot,bt,dt,ut,nt;this.resultModal.show(),console.log(t,e),this.flag=e,this.resultForm=this.fb.group({id:[null===(a=null===(l=null===(s=null==t?void 0:t.attributes)||void 0===s?void 0:s.soil_test_results)||void 0===l?void 0:l.data[0])||void 0===a?void 0:a.id],soil_test_sample:[null==t?void 0:t.id],phObserved:[null===(d=null===(b=null===(o=null===(r=null==t?void 0:t.attributes)||void 0===r?void 0:r.soil_test_results)||void 0===o?void 0:o.data[0])||void 0===b?void 0:b.attributes)||void 0===d?void 0:d.phObserved,i.s.required],OrganicCarbonObserved:[null===(v=null===(c=null===(n=null===(u=null==t?void 0:t.attributes)||void 0===u?void 0:u.soil_test_results)||void 0===n?void 0:n.data[0])||void 0===c?void 0:c.attributes)||void 0===v?void 0:v.OrganicCarbonObserved,i.s.required],TotalNitrogenObserved:[null===(p=null===(h=null===(S=null===(m=null==t?void 0:t.attributes)||void 0===m?void 0:m.soil_test_results)||void 0===S?void 0:S.data[0])||void 0===h?void 0:h.attributes)||void 0===p?void 0:p.TotalNitrogenObserved,i.s.required],PhosphorousObserved:[null===(_=null===(f=null===(R=null===(g=null==t?void 0:t.attributes)||void 0===g?void 0:g.soil_test_results)||void 0===R?void 0:R.data[0])||void 0===f?void 0:f.attributes)||void 0===_?void 0:_.PhosphorousObserved,i.s.required],PotassiumObserved:[null===(A=null===(C=null===(O=null===(D=null==t?void 0:t.attributes)||void 0===D?void 0:D.soil_test_results)||void 0===O?void 0:O.data[0])||void 0===C?void 0:C.attributes)||void 0===A?void 0:A.PotassiumObserved,i.s.required],CalciumObserved:[null===(T=null===(F=null===(N=null===(y=null==t?void 0:t.attributes)||void 0===y?void 0:y.soil_test_results)||void 0===N?void 0:N.data[0])||void 0===F?void 0:F.attributes)||void 0===T?void 0:T.CalciumObserved,i.s.required],MagnesiumObserved:[null===(E=null===(P=null===(q=null===(M=null==t?void 0:t.attributes)||void 0===M?void 0:M.soil_test_results)||void 0===q?void 0:q.data[0])||void 0===P?void 0:P.attributes)||void 0===E?void 0:E.MagnesiumObserved,i.s.required],ZincObserved:[null===(B=null===(x=null===(w=null===(L=null==t?void 0:t.attributes)||void 0===L?void 0:L.soil_test_results)||void 0===w?void 0:w.data[0])||void 0===x?void 0:x.attributes)||void 0===B?void 0:B.ZincObserved,i.s.required],SulphurObserved:[null===(Z=null===(Q=null===(k=null===(I=null==t?void 0:t.attributes)||void 0===I?void 0:I.soil_test_results)||void 0===k?void 0:k.data[0])||void 0===Q?void 0:Q.attributes)||void 0===Z?void 0:Z.SulphurObserved,i.s.required],IronObserved:[null===(K=null===(U=null===(j=null===(G=null==t?void 0:t.attributes)||void 0===G?void 0:G.soil_test_results)||void 0===j?void 0:j.data[0])||void 0===U?void 0:U.attributes)||void 0===K?void 0:K.IronObserved,i.s.required],CopperObserved:[null===(J=null===(V=null===($=null===(z=null==t?void 0:t.attributes)||void 0===z?void 0:z.soil_test_results)||void 0===$?void 0:$.data[0])||void 0===V?void 0:V.attributes)||void 0===J?void 0:J.CopperObserved,i.s.required],BoronObserved:[null===(X=null===(Y=null===(W=null===(H=null==t?void 0:t.attributes)||void 0===H?void 0:H.soil_test_results)||void 0===W?void 0:W.data[0])||void 0===Y?void 0:Y.attributes)||void 0===X?void 0:X.BoronObserved,i.s.required],ManganeseObserved:[null===(lt=null===(st=null===(et=null===(tt=null==t?void 0:t.attributes)||void 0===tt?void 0:tt.soil_test_results)||void 0===et?void 0:et.data[0])||void 0===st?void 0:st.attributes)||void 0===lt?void 0:lt.ManganeseObserved,i.s.required],RecommendedUreaQty:[null===(ot=null===(rt=null===(at=null===(it=null==t?void 0:t.attributes)||void 0===it?void 0:it.soil_test_results)||void 0===at?void 0:at.data[0])||void 0===rt?void 0:rt.attributes)||void 0===ot?void 0:ot.RecommendedUreaQty,i.s.required],RecommendedNPKQty:[null===(nt=null===(ut=null===(dt=null===(bt=null==t?void 0:t.attributes)||void 0===bt?void 0:bt.soil_test_results)||void 0===dt?void 0:dt.data[0])||void 0===ut?void 0:ut.attributes)||void 0===nt?void 0:nt.RecommendedNPKQty,i.s.required]})}FormSubmit(){let t={};this.btnLoading=!0,console.log(this.agentForm.value),this.dataservice.UpdateSoilTest(this.agentForm.value,this.id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateSoilTest?(this.toastr.success("Test updated successfully!"),this.btnLoading=!1,this.myModal.hide(),this.getTest()):(this.toastr.error("Failed. Please check the fields!"),this.btnLoading=!1)},t=>{this.btnLoading=!1})}filterLGA(t){this.getLGAs(t.target.value)}filterArea(t){this.getAreas(t.target.value)}ResultSubmit(){if(this.btnLoading=!0,"edit"==this.flag){console.log("edit",this.resultForm.value);let t={};console.log(this.resultForm.value),this.dataservice.UpdateSoilTestResult(this.resultForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateSoilTestResult?(this.toastr.success("Result updated successfully!"),this.btnLoading=!1,this.resultModal.hide(),this.getTest()):(this.toastr.error("Failed. Please check the fields!"),this.btnLoading=!1)},t=>{this.btnLoading=!1})}else{console.log("new",this.resultForm.value);let t={};console.log(this.resultForm.value),this.dataservice.AddSoilTestResult(this.resultForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.createSoilTestResult?(this.toastr.success("Result added successfully!"),this.btnLoading=!1,this.resultModal.hide(),this.getTest()):(this.toastr.error("Failed. Please check the fields!"),this.btnLoading=!1)},t=>{this.btnLoading=!1})}}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(d.a),n.Mb(b.a),n.Mb(b.c),n.Mb(i.c),n.Mb(c.b))},t.\u0275cmp=n.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(n.Ic(v,1),n.Ic(m,1)),2&t){let t;n.rc(t=n.ac())&&(e.myModal=t.first),n.rc(t=n.ac())&&(e.resultModal=t.first)}},decls:234,vars:23,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"row"],[1,"col"],[2,"display","flex","justify-content","space-between"],[1,"table","table-striped"],["class","col-4",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Farmer"],["id","Farmer","required","","ngModel","","name","Farmer","formControlName","Farmer",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","market"],["type","text","id","ContactNumber","name","ContactNumber","formControlName","ContactNumber","placeholder","Enter contact number",1,"form-control"],["for","ReasonForSoilTest"],["type","text","id","ReasonForSoilTest","name","ReasonForSoilTest","formControlName","ReasonForSoilTest","placeholder","Enter contact number",1,"form-control"],["for","nutrient"],["type","text","id","nutrient","name","nutrient","formControlName","nutrient","placeholder","Enter nutrient",1,"form-control"],["for","Status"],["id","Status","required","","ngModel","","name","Status","formControlName","Status",1,"form-control"],["value","NEW_REQUEST"],["value","SAMPLE_COLLECTED"],["value","RESULTS_ADDED"],["for","state"],["id","state","required","","ngModel","","name","state","formControlName","state",1,"form-control",3,"change"],["for","lga"],["id","lga","required","","ngModel","","name","lga","formControlName","lga",1,"form-control",3,"change"],["for","area"],["id","area","required","","ngModel","","name","area","formControlName","area",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","resultModalLabel","aria-hidden","true",1,"modal","fade"],["resultModal","bs-modal"],["for","soil_test_sample"],["type","text","id","soil_test_sample","disabled","true","name","soil_test_sample","formControlName","soil_test_sample",1,"form-control"],["for","phObserved"],["type","text","id","phObserved","name","phObserved","formControlName","phObserved","placeholder","Enter value",1,"form-control"],["for","OrganicCarbonObserved"],["type","text","id","OrganicCarbonObserved","name","OrganicCarbonObserved","formControlName","OrganicCarbonObserved","placeholder","Enter value",1,"form-control"],["for","TotalNitrogenObserved"],["type","text","id","TotalNitrogenObserved","name","TotalNitrogenObserved","formControlName","TotalNitrogenObserved","placeholder","Enter value",1,"form-control"],["for","ManganeseObserved"],["type","text","id","ManganeseObserved","name","ManganeseObserved","formControlName","ManganeseObserved","placeholder","Enter value",1,"form-control"],["for","PhosphorousObserved"],["type","text","id","PhosphorousObserved","name","PhosphorousObserved","formControlName","PhosphorousObserved","placeholder","Enter value",1,"form-control"],["for","PotassiumObserved"],["type","text","id","PotassiumObserved","name","PotassiumObserved","formControlName","PotassiumObserved","placeholder","Enter value",1,"form-control"],["for","CalciumObserved"],["type","text","id","CalciumObserved","name","CalciumObserved","formControlName","CalciumObserved","placeholder","Enter value",1,"form-control"],["for","MagnesiumObserved"],["type","text","id","MagnesiumObserved","name","MagnesiumObserved","formControlName","MagnesiumObserved","placeholder","Enter value",1,"form-control"],["for","ZincObserved"],["type","text","id","ZincObserved","name","ZincObserved","formControlName","ZincObserved","placeholder","Enter value",1,"form-control"],["for","SulphurObserved"],["type","text","id","SulphurObserved","name","SulphurObserved","formControlName","SulphurObserved","placeholder","Enter value",1,"form-control"],["for","IronObserved"],["type","text","id","IronObserved","name","IronObserved","formControlName","IronObserved","placeholder","Enter value",1,"form-control"],["for","CopperObserved"],["type","text","id","CopperObserved","name","CopperObserved","formControlName","CopperObserved","placeholder","Enter value",1,"form-control"],["for","BoronObserved"],["type","text","id","BoronObserved","name","BoronObserved","formControlName","BoronObserved","placeholder","Enter value",1,"form-control"],["for","RecommendedUreaQty"],["type","text","id","RecommendedUreaQty","name","RecommendedUreaQty","formControlName","RecommendedUreaQty","placeholder","Enter value",1,"form-control"],["for","RecommendedNPKQty"],["type","text","id","RecommendedNPKQty","name","RecommendedNPKQty","formControlName","RecommendedNPKQty","placeholder","Enter value",1,"form-control"],[1,"col-4"],[1,"card-title"],["type","button","class","btn btn-primary","data-toggle","modal",3,"click",4,"ngIf"],[1,"card-text"],[1,"table"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){const t=n.Tb();n.Sb(0,"div",0),n.Sb(1,"div",1),n.Sb(2,"div",2),n.Sb(3,"h2"),n.Dc(4,"Soil Test Details"),n.Rb(),n.Sb(5,"span"),n.Sb(6,"button",3),n.Zb("click",function(){return n.vc(t),n.sc(82).show()}),n.Dc(7," Edit "),n.Rb(),n.Rb(),n.Rb(),n.Sb(8,"div",4),n.Sb(9,"div",5),n.Sb(10,"div",6),n.Sb(11,"div",5),n.Sb(12,"div",7),n.Sb(13,"h4"),n.Dc(14,"Request details"),n.Rb(),n.Rb(),n.Sb(15,"table",8),n.Sb(16,"tbody"),n.Sb(17,"tr"),n.Sb(18,"td"),n.Dc(19,"ID"),n.Rb(),n.Sb(20,"td"),n.Dc(21),n.Rb(),n.Rb(),n.Sb(22,"tr"),n.Sb(23,"td"),n.Dc(24,"Farmer"),n.Rb(),n.Sb(25,"td"),n.Dc(26),n.Rb(),n.Rb(),n.Sb(27,"tr"),n.Sb(28,"td"),n.Dc(29,"Contact number"),n.Rb(),n.Sb(30,"td"),n.Dc(31),n.Rb(),n.Rb(),n.Sb(32,"tr"),n.Sb(33,"td"),n.Dc(34,"Reason for testing"),n.Rb(),n.Sb(35,"td"),n.Dc(36),n.Rb(),n.Rb(),n.Sb(37,"tr"),n.Sb(38,"td"),n.Dc(39,"Preferred nutrient"),n.Rb(),n.Sb(40,"td"),n.Dc(41),n.Rb(),n.Rb(),n.Sb(42,"tr"),n.Sb(43,"td"),n.Dc(44,"City"),n.Rb(),n.Sb(45,"td"),n.Dc(46),n.Rb(),n.Rb(),n.Sb(47,"tr"),n.Sb(48,"td"),n.Dc(49,"Postal code"),n.Rb(),n.Sb(50,"td"),n.Dc(51),n.Rb(),n.Rb(),n.Sb(52,"tr"),n.Sb(53,"td"),n.Dc(54,"LGA"),n.Rb(),n.Sb(55,"td"),n.Dc(56),n.Rb(),n.Rb(),n.Sb(57,"tr"),n.Sb(58,"td"),n.Dc(59,"State"),n.Rb(),n.Sb(60,"td"),n.Dc(61),n.Rb(),n.Rb(),n.Sb(62,"tr"),n.Sb(63,"td"),n.Dc(64,"Preferred date for sample collection"),n.Rb(),n.Sb(65,"td"),n.Dc(66),n.Rb(),n.Rb(),n.Sb(67,"tr"),n.Sb(68,"td"),n.Dc(69,"Created at"),n.Rb(),n.Sb(70,"td"),n.Dc(71),n.Rb(),n.Rb(),n.Sb(72,"tr"),n.Sb(73,"td"),n.Dc(74,"Last updated"),n.Rb(),n.Sb(75,"td"),n.Dc(76),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(77,"h4"),n.Dc(78,"Samples"),n.Rb(),n.Sb(79,"div",5),n.Bc(80,p,98,22,"div",9),n.Rb(),n.Rb(),n.Rb(),n.Sb(81,"div",10,11),n.Sb(83,"div",12),n.Sb(84,"div",13),n.Sb(85,"div",14),n.Sb(86,"h4",15),n.Dc(87,"Edit details"),n.Rb(),n.Sb(88,"button",16),n.Zb("click",function(){return n.vc(t),n.sc(82).hide()}),n.Sb(89,"span",17),n.Dc(90,"\xd7"),n.Rb(),n.Rb(),n.Rb(),n.Sb(91,"div",18),n.Sb(92,"form",19),n.Zb("ngSubmit",function(){return e.FormSubmit()}),n.Sb(93,"div",20),n.Sb(94,"label",21),n.Dc(95,"Farmer"),n.Rb(),n.Sb(96,"select",22),n.Sb(97,"option",23),n.Dc(98,"Choose..."),n.Rb(),n.Bc(99,g,2,2,"option",24),n.Rb(),n.Rb(),n.Sb(100,"div",20),n.Sb(101,"label",25),n.Dc(102,"Contact Number"),n.Rb(),n.Nb(103,"input",26),n.Rb(),n.Sb(104,"div",20),n.Sb(105,"label",27),n.Dc(106,"Reason for test"),n.Rb(),n.Nb(107,"input",28),n.Rb(),n.Sb(108,"div",20),n.Sb(109,"label",29),n.Dc(110,"Testing for"),n.Rb(),n.Nb(111,"input",30),n.Rb(),n.Sb(112,"div",20),n.Sb(113,"label",31),n.Dc(114,"Status"),n.Rb(),n.Sb(115,"select",32),n.Sb(116,"option",23),n.Dc(117,"Choose..."),n.Rb(),n.Sb(118,"option",33),n.Dc(119,"NEW_REQUEST"),n.Rb(),n.Sb(120,"option",34),n.Dc(121,"SAMPLE_COLLECTED"),n.Rb(),n.Sb(122,"option",35),n.Dc(123,"RESULTS_ADDED"),n.Rb(),n.Rb(),n.Rb(),n.Sb(124,"div",20),n.Sb(125,"label",36),n.Dc(126,"State"),n.Rb(),n.Sb(127,"select",37),n.Zb("change",function(t){return e.filterLGA(t)}),n.Sb(128,"option",23),n.Dc(129,"Choose..."),n.Rb(),n.Bc(130,R,2,2,"option",24),n.Rb(),n.Rb(),n.Sb(131,"div",20),n.Sb(132,"label",38),n.Dc(133,"LGA"),n.Rb(),n.Sb(134,"select",39),n.Zb("change",function(t){return e.filterArea(t)}),n.Sb(135,"option",23),n.Dc(136,"Choose..."),n.Rb(),n.Bc(137,f,2,2,"option",24),n.Rb(),n.Rb(),n.Sb(138,"div",20),n.Sb(139,"label",40),n.Dc(140,"City"),n.Rb(),n.Sb(141,"select",41),n.Sb(142,"option",23),n.Dc(143,"Choose..."),n.Rb(),n.Bc(144,_,2,2,"option",24),n.Rb(),n.Rb(),n.Sb(145,"button",42),n.Zb("click",function(){return n.vc(t),n.sc(82).hide()}),n.Dc(146," Close "),n.Rb(),n.Sb(147,"button",43),n.Bc(148,D,1,0,"span",44),n.Dc(149," Save changes "),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(150,"div",45,46),n.Sb(152,"div",12),n.Sb(153,"div",13),n.Sb(154,"div",14),n.Sb(155,"h4",15),n.Dc(156,"Add/Edit result"),n.Rb(),n.Sb(157,"button",16),n.Zb("click",function(){return n.vc(t),n.sc(151).hide()}),n.Sb(158,"span",17),n.Dc(159,"\xd7"),n.Rb(),n.Rb(),n.Rb(),n.Sb(160,"div",18),n.Sb(161,"form",19),n.Zb("ngSubmit",function(){return e.ResultSubmit()}),n.Sb(162,"div",5),n.Sb(163,"div",6),n.Sb(164,"div",20),n.Sb(165,"label",47),n.Dc(166,"Soil Test ID"),n.Rb(),n.Nb(167,"input",48),n.Rb(),n.Sb(168,"div",20),n.Sb(169,"label",49),n.Dc(170,"ph Observed"),n.Rb(),n.Nb(171,"input",50),n.Rb(),n.Sb(172,"div",20),n.Sb(173,"label",51),n.Dc(174,"Organic Carbon Observed"),n.Rb(),n.Nb(175,"input",52),n.Rb(),n.Sb(176,"div",20),n.Sb(177,"label",53),n.Dc(178,"Total Nitrogen Observed"),n.Rb(),n.Nb(179,"input",54),n.Rb(),n.Sb(180,"div",20),n.Sb(181,"label",55),n.Dc(182,"Manganese Observed"),n.Rb(),n.Nb(183,"input",56),n.Rb(),n.Sb(184,"div",20),n.Sb(185,"label",57),n.Dc(186,"Phosphorous Observed"),n.Rb(),n.Nb(187,"input",58),n.Rb(),n.Sb(188,"div",20),n.Sb(189,"label",59),n.Dc(190,"Potassium Observed"),n.Rb(),n.Nb(191,"input",60),n.Rb(),n.Rb(),n.Sb(192,"div",6),n.Sb(193,"div",20),n.Sb(194,"label",61),n.Dc(195,"Calcium Observed"),n.Rb(),n.Nb(196,"input",62),n.Rb(),n.Sb(197,"div",20),n.Sb(198,"label",63),n.Dc(199,"Magnesium Observed"),n.Rb(),n.Nb(200,"input",64),n.Rb(),n.Sb(201,"div",20),n.Sb(202,"label",65),n.Dc(203,"Zinc Observed"),n.Rb(),n.Nb(204,"input",66),n.Rb(),n.Sb(205,"div",20),n.Sb(206,"label",67),n.Dc(207,"Sulphur Observed"),n.Rb(),n.Nb(208,"input",68),n.Rb(),n.Sb(209,"div",20),n.Sb(210,"label",69),n.Dc(211,"Iron Observed"),n.Rb(),n.Nb(212,"input",70),n.Rb(),n.Sb(213,"div",20),n.Sb(214,"label",71),n.Dc(215,"Copper Observed"),n.Rb(),n.Nb(216,"input",72),n.Rb(),n.Sb(217,"div",20),n.Sb(218,"label",73),n.Dc(219,"Boron Observed"),n.Rb(),n.Nb(220,"input",74),n.Rb(),n.Sb(221,"div",20),n.Sb(222,"label",75),n.Dc(223,"Recommended Urea Qty"),n.Rb(),n.Nb(224,"input",76),n.Rb(),n.Sb(225,"div",20),n.Sb(226,"label",77),n.Dc(227,"Recommended NPK Qty"),n.Rb(),n.Nb(228,"input",78),n.Rb(),n.Rb(),n.Rb(),n.Sb(229,"button",42),n.Zb("click",function(){return n.vc(t),n.sc(151).hide()}),n.Dc(230," Close "),n.Rb(),n.Sb(231,"button",43),n.Bc(232,O,1,0,"span",44),n.Dc(233," Save changes "),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()}2&t&&(n.Ab(21),n.Fc("STR",null==e.details?null:e.details.id,""),n.Ab(5),n.Fc(" ",null==e.details||null==e.details.attributes||null==e.details.attributes.Farmer?null:e.details.attributes.Farmer.data.attributes.Name," "),n.Ab(5),n.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.ContactNumber),n.Ab(5),n.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.ReasonForSoilTest),n.Ab(5),n.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.nutrient),n.Ab(5),n.Ec(null==e.details||null==e.details.attributes||null==e.details.attributes.area?null:e.details.attributes.area.data.attributes.Name),n.Ab(5),n.Fc(" ",null==e.details||null==e.details.attributes||null==e.details.attributes.area?null:e.details.attributes.area.data.attributes.PostalCode," "),n.Ab(5),n.Ec(null==e.details||null==e.details.attributes||null==e.details.attributes.lga?null:e.details.attributes.lga.data.attributes.Name),n.Ab(5),n.Fc(" ",null==e.details||null==e.details.attributes||null==e.details.attributes.lga||null==e.details.attributes.lga.data||null==e.details.attributes.lga.data.attributes||null==e.details.attributes.lga.data.attributes.state||null==e.details.attributes.lga.data.attributes.state.data||null==e.details.attributes.lga.data.attributes.state.data.attributes?null:e.details.attributes.lga.data.attributes.state.data.attributes.Name," "),n.Ab(5),n.Fc(" ",e.dateConverterMin(null==e.details||null==e.details.attributes?null:e.details.attributes.PreferredCollectionDate)," "),n.Ab(5),n.Ec(e.dateConvertor(null==e.details||null==e.details.attributes?null:e.details.attributes.createdAt)),n.Ab(5),n.Ec(e.dateConvertor(null==e.details||null==e.details.attributes?null:e.details.attributes.updatedAt)),n.Ab(4),n.jc("ngForOf",null==e.details||null==e.details.attributes||null==e.details.attributes.soil_test_samples?null:e.details.attributes.soil_test_samples.data),n.Ab(12),n.jc("formGroup",e.agentForm),n.Ab(7),n.jc("ngForOf",e.Farmers),n.Ab(31),n.jc("ngForOf",e.States),n.Ab(7),n.jc("ngForOf",e.LGA),n.Ab(7),n.jc("ngForOf",e.Areas),n.Ab(3),n.jc("disabled",e.btnLoading||!e.agentForm.valid),n.Ab(1),n.jc("ngIf",e.btnLoading),n.Ab(13),n.jc("formGroup",e.resultForm),n.Ab(70),n.jc("disabled",e.btnLoading),n.Ab(1),n.jc("ngIf",e.btnLoading))},directives:[l.j,r.a,i.t,i.j,i.e,i.q,i.p,i.i,i.d,i.m,i.u,i.b,l.k],encapsulation:2}),t})();var A=s("AytR");const y=["myModal"],N=[{path:"",children:[{path:"",redirectTo:"soiltest"},{path:"customers",component:(()=>{class t{constructor(t,e,s,l){this.dataservice=t,this.router=e,this.fb=s,this.toastr=l,this.loading=!0,this.btnLoading=!1,this.disableNextButton=!1,this.disablePrevButton=!0,this.pageSize=20,this.from=1,this.to=20,this.count=1,this.columnDefs=[],this.rowData=[],this.columnDefs=[...u.m],this.rowSelection="single"}ngOnInit(){this.getLists()}getLists(){this.loading=!0,this.dataservice.getsoilTests(1,this.pageSize).valueChanges.subscribe(t=>{var e,s,l,i,a,r;console.log("getCustomers",t.data.soilTests.data),this.rowData=t.data.soilTests.data,this.meta=t.data.soilTests.meta,(null===(s=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===s?void 0:s.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0),(null===(i=null===(l=this.meta)||void 0===l?void 0:l.pagination)||void 0===i?void 0:i.total)<this.pageSize&&(this.to=null===(r=null===(a=this.meta)||void 0===a?void 0:a.pagination)||void 0===r?void 0:r.total)})}downloadExcel(){let t={};this.btnLoading=!0,this.dataservice.downloadSoilTests().subscribe(e=>{var s;t=e.body,console.log(e),200===e.status&&"Success"==e.body.status?(this.toastr.success(e.body.message),this.btnLoading=!1,window.open(`${A.a.apiUrl}${null===(s=null==e?void 0:e.body)||void 0===s?void 0:s.path}`,"_blank")):(this.btnLoading=!1,this.toastr.error(e.body.message))})}loadNext(){var t,e,s,l;this.count++,this.disablePrevButton=!1,this.from=this.from+this.pageSize,this.to=this.to+this.pageSize>(null===(e=null===(t=this.meta)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.total)?null===(l=null===(s=this.meta)||void 0===s?void 0:s.pagination)||void 0===l?void 0:l.total:this.to+this.pageSize,this.count===this.meta.pagination.pageCount&&(this.disableNextButton=!0),this.dataservice.getsoilTests(this.count,this.pageSize).valueChanges.subscribe(t=>{this.meta=t.data.soilTests.meta,this.rowData=t.data.soilTests.data})}loadPrev(){this.count--,this.count<this.meta.pagination.pageCount&&(this.disableNextButton=!1),1===this.count&&(this.disablePrevButton=!0),this.from=this.from-this.pageSize,this.to=this.to-this.rowData.length,this.dataservice.getsoilTests(this.count,this.pageSize).valueChanges.subscribe(t=>{this.meta=t.data.soilTests.meta,this.rowData=t.data.soilTests.data})}onGridReady(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi}onSelectionChanged(t){var e=this.gridApi.getSelectedRows();console.log(e),this.router.navigate(["/soiltest/test_details",e[0].id],{state:{data:e}})}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(d.a),n.Mb(b.c),n.Mb(i.c),n.Mb(c.b))},t.\u0275cmp=n.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.Ic(y,1),2&t){let t;n.rc(t=n.ac())&&(e.myModal=t.first)}},decls:20,vars:10,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-outline-primary",3,"click"],[1,"card-body"],[1,"row"],[1,"col-12"],["id","myGrid","animateRows","true",1,"ag-theme-alpine",2,"width","100%","height","500px",3,"columnDefs","rowData","rowSelection","gridReady","selectionChanged"],["agGrid",""],[1,"float-left","mt-3"],["type","button",1,"btn","btn-primary","float-right","m-2",3,"disabled","click"],[1,"float-right","mt-3"]],template:function(t,e){1&t&&(n.Sb(0,"div",0),n.Sb(1,"div",1),n.Sb(2,"div",2),n.Sb(3,"h2"),n.Dc(4,"Soil Analysis Home"),n.Rb(),n.Sb(5,"button",3),n.Zb("click",function(){return e.downloadExcel()}),n.Dc(6," Download excel "),n.Rb(),n.Rb(),n.Sb(7,"div",4),n.Sb(8,"div",5),n.Sb(9,"div",6),n.Sb(10,"ag-grid-angular",7,8),n.Zb("gridReady",function(t){return e.onGridReady(t)})("selectionChanged",function(t){return e.onSelectionChanged(t)}),n.Rb(),n.Sb(12,"span",9),n.Dc(13),n.Rb(),n.Sb(14,"button",10),n.Zb("click",function(){return e.loadNext()}),n.Dc(15," Next "),n.Rb(),n.Sb(16,"span",11),n.Dc(17),n.Rb(),n.Sb(18,"button",10),n.Zb("click",function(){return e.loadPrev()}),n.Dc(19," Prev "),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&t&&(n.Ab(10),n.jc("columnDefs",e.columnDefs)("rowData",e.rowData)("rowSelection",e.rowSelection),n.Ab(3),n.Hc("",e.from," to ",e.to," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.total,""),n.Ab(1),n.jc("disabled",e.disableNextButton),n.Ab(3),n.Gc("Page ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.page," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.pageCount,""),n.Ab(1),n.jc("disabled",e.disablePrevButton))},directives:[a.a],encapsulation:2}),t})(),data:{roles:"MANAGER",title:"Soil Analysis"}},{path:"test_details/:id",component:C,data:{roles:"MANAGER",title:"Test Details"}}]}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({imports:[[b.g.forChild(N)],b.g]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({imports:[[l.c,F,i.o,a.b.withComponents([]),r.b.forRoot(),o.a.forRoot(),i.f]]}),t})()}}]);