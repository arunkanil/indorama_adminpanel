(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{NPE9:function(t,e,a){"use strict";a.r(e),a.d(e,"MastersModule",function(){return Z});var s=a("SVse"),i=a("s7LF"),o=a("FE24"),r=a("2ZVE"),l=a("iInd"),d=a("R7Hv"),c=a("MYrn"),n=a("7nfi"),b=a("AytR"),h=a("8Y7J"),u=a("EApP"),g=a("YFAK"),m=a("LqlI");const p=["stateModal"],v=["lgaModal"],S=["villageModal"],f=["marketModal"],R=["areaModal"],A=["cropModal"],C=["deleteModal"],k=["searchInput"];function w(t,e){1&t&&h.Nb(0,"span",64)}function D(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function F(t,e){1&t&&h.Nb(0,"span",64)}function M(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function N(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function y(t,e){1&t&&h.Nb(0,"span",64)}function L(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function x(t,e){1&t&&h.Nb(0,"span",64)}function G(t,e){if(1&t&&h.Nb(0,"img",66),2&t){const t=h.cc();h.kc("src",t.imageUrl,h.xc)}}function q(t,e){1&t&&h.Nb(0,"span",64)}function B(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function V(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function j(t,e){if(1&t&&(h.Sb(0,"option",65),h.Dc(1),h.Rb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Ab(1),h.Fc(" ",t.attributes.Name," ")}}function z(t,e){1&t&&h.Nb(0,"span",64)}let P=(()=>{class t{constructor(t,e,a,s,o){this.dataservice=t,this.route=e,this.router=a,this.fb=s,this.toastr=o,this.columnDefs=[],this.loading=!0,this.disableButton=!0,this.btnLoading=!1,this.disableNextButton=!1,this.disablePrevButton=!0,this.searchTerm="",this.count=1,this.Villages=[],this.LGA=[],this.Areas=[],this.States=[],this.Markets=[],this.Crops=[],this.file=null,this.pageSize=20,this.from=1,this.to=20,this.frameworkComponents={statusRenderer:new c.a},this.stateForm=this.fb.group({state:["",i.s.required]}),this.lgaForm=this.fb.group({lga:["",i.s.required],state:["",i.s.required]}),this.areaForm=this.fb.group({area:["",i.s.required],PostalCode:["",i.s.required],lga:["",i.s.required],state:["",i.s.required]}),this.marketForm=this.fb.group({market:["",i.s.required],state:["",i.s.required]}),this.cropForm=this.fb.group({crop:["",i.s.required],Image:["",i.s.required]}),this.villageForm=this.fb.group({village:["",i.s.required],area:["",i.s.required],lga:[""],state:[""]}),this.selectedYear=(new Date).getFullYear(),this.years=[],this.filter={},this.selectedRows=[],this.context={componentParent:this},this.rowSelection="single"}ngOnInit(){switch(this.loading=!0,console.log(this.router.url),this.router.url){case"/masters/Villages":this.columnDefs=[...n.q],this.dataservice.getVillages(this.count,this.pageSize).valueChanges.subscribe(t=>{var e,a;console.log("getVillages",t.data.villages.data),this.rowData=t.data.villages.data,this.meta=t.data.villages.meta,(null===(a=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===a?void 0:a.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0)});break;case"/masters/Cities":this.columnDefs=[...n.b],this.dataservice.getAreas(this.count,this.pageSize).valueChanges.subscribe(t=>{var e,a;console.log("getAreas",t.data.areas.data),this.rowData=t.data.areas.data,this.meta=t.data.areas.meta,(null===(a=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===a?void 0:a.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0)});break;case"/masters/LGA":this.columnDefs=[...n.h],this.dataservice.getLGAs(this.count,this.pageSize).valueChanges.subscribe(t=>{var e,a;console.log("getLGAs",t.data.lgas.data),this.rowData=t.data.lgas.data,this.meta=t.data.lgas.meta,(null===(a=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===a?void 0:a.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0)});break;case"/masters/States":this.columnDefs=[...n.n],this.dataservice.getStates(this.count,this.pageSize).valueChanges.subscribe(t=>{var e,a;console.log("getStates",t.data.states.data),this.rowData=t.data.states.data,this.meta=t.data.states.meta,(null===(a=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===a?void 0:a.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0)});break;case"/masters/Markets":this.columnDefs=[...n.i],this.dataservice.getMarkets(this.count,this.pageSize).valueChanges.subscribe(t=>{var e,a;console.log("getMarkets",t.data.markets.data),this.rowData=t.data.markets.data,this.meta=t.data.markets.meta,(null===(a=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===a?void 0:a.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0)});break;case"/masters/Crops":this.columnDefs=[...n.c],this.dataservice.getCrops(this.count,this.pageSize).valueChanges.subscribe(t=>{var e,a;console.log("getCrops",t.data.crops.data),this.rowData=t.data.crops.data,this.meta=t.data.crops.meta,(null===(a=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===a?void 0:a.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0)})}this.getAreas(this.count,this.pageSize),this.getCrops(this.count,this.pageSize),this.getLGAs(this.count,this.pageSize),this.getMarkets(this.count,this.pageSize),this.getStates(this.count,this.pageSize),this.getVillages(this.count,this.pageSize)}search(){this.loadData(this.count,this.pageSize,this.searchTerm)}onInputChange(t){this.search()}loadData(t,e,a){switch(this.router.url){case"/masters/Villages":this.getVillages(t,e,a);break;case"/masters/States":this.getStates(t,e,a);break;case"/masters/Cities":this.getAreas(t,e,a);break;case"/masters/LGA":this.getLGAs(t,e,a);break;case"/masters/Markets":this.getMarkets(t,e,a);break;case"/masters/Crops":this.getCrops(t,e,a)}}loadNext(){var t,e,a,s;this.count++,this.disablePrevButton=!1,this.from=this.from+this.pageSize,this.to=this.to+this.pageSize>(null===(e=null===(t=this.meta)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.total)?null===(s=null===(a=this.meta)||void 0===a?void 0:a.pagination)||void 0===s?void 0:s.total:this.to+this.pageSize,this.count===this.meta.pagination.pageCount&&(this.disableNextButton=!0),this.loadData(this.count,this.pageSize,this.searchTerm)}loadPrev(){this.count--,this.count<this.meta.pagination.pageCount&&(this.disableNextButton=!1),1===this.count&&(this.disablePrevButton=!0),this.from=this.from-this.pageSize,this.to=this.to-this.rowData.length,this.loadData(this.count,this.pageSize,this.searchTerm)}downloadExcel(){let t="";switch(this.router.url){case"/masters/Villages":t="villages";break;case"/masters/States":t="states";break;case"/masters/Cities":t="cities";break;case"/masters/LGA":t="lgas";break;case"/masters/Markets":t="markets";break;case"/masters/Crops":t="crops"}let e={};this.btnLoading=!0,this.dataservice.downloadMaster(t).subscribe(t=>{var a;e=t.body,console.log(t),200===t.status&&"Success"==t.body.status?(this.toastr.success(t.body.message),this.btnLoading=!1,window.open(`${b.a.apiUrl}${null===(a=null==t?void 0:t.body)||void 0===a?void 0:a.path}`,"_blank")):(this.btnLoading=!1,this.toastr.error(t.body.message))})}getCrops(t,e,a){this.dataservice.getCrops(t,e,a).valueChanges.subscribe(t=>{console.log("getCrops2Function",t.data.crops.data),this.Crops=t.data.crops.data,"/masters/Crops"===this.router.url&&(this.rowData=t.data.crops.data,this.meta=t.data.crops.meta)})}getStates(t,e,a){this.dataservice.getStates(t,e,a).valueChanges.subscribe(t=>{console.log("getStates2Function",t.data.states.data),this.States=t.data.states.data,"/masters/States"===this.router.url&&(this.rowData=t.data.states.data,this.meta=t.data.states.meta)})}getLGAs(t,e,a,s){this.dataservice.getLGAs(t,e,a,s).valueChanges.subscribe(t=>{console.log("getLGAs2Function",t.data.lgas.data),this.LGA=t.data.lgas.data,"/masters/LGA"===this.router.url&&(this.rowData=t.data.lgas.data,this.meta=t.data.lgas.meta)})}getAreas(t,e,a,s){this.dataservice.getAreas(t,e,a,s).valueChanges.subscribe(t=>{console.log("getAreas2Function",t.data.areas.data),this.Areas=t.data.areas.data,"/masters/Cities"===this.router.url&&(this.rowData=t.data.areas.data,this.meta=t.data.areas.meta)})}getVillages(t,e,a,s){this.dataservice.getVillages(t,e,a,s).valueChanges.subscribe(t=>{console.log("getVillages2Function",t.data.villages.data),this.Villages=t.data.villages.data,"/masters/Villages"===this.router.url&&(this.rowData=t.data.villages.data,this.meta=t.data.villages.meta)})}getMarkets(t,e,a){this.dataservice.getMarkets(t,e,a).valueChanges.subscribe(t=>{console.log("getMarkets2Function",t.data.markets.data),this.Markets=t.data.markets.data,"/masters/Markets"===this.router.url&&(this.rowData=t.data.markets.data,this.meta=t.data.markets.meta)})}onGridReady(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.gridApi.sizeColumnsToFit()}onRowClicked(t){console.log("row",t),alert("Parent Component Method from "+t+"!")}onSelectionChanged(t){this.selectedRows=this.gridApi.getSelectedRows(),this.disableButton=!(this.selectedRows.length>0),console.log(this.selectedRows,this.selectedRows[0].attributes.Name)}openModal(t){var e,a,s,o,r,l,d,c;switch(this.router.url){case"/masters/Villages":this.villageModal.show(),this.villageForm=this.fb.group(t?{village:[this.selectedRows[0].attributes.Name,i.s.required],area:[Number(this.selectedRows[0].attributes.area.data.id),i.s.required],lga:[Number(this.selectedRows[0].attributes.area.data.attributes.lga.data.id)],state:[Number(this.selectedRows[0].attributes.area.data.attributes.lga.data.attributes.state.data.id)]}:{village:["",i.s.required],area:["",i.s.required],lga:[""],state:[""]});break;case"/masters/Cities":this.areaModal.show(),this.areaForm=this.fb.group(t?{area:[this.selectedRows[0].attributes.Name,i.s.required],PostalCode:[this.selectedRows[0].attributes.PostalCode,i.s.required],lga:[Number(this.selectedRows[0].attributes.lga.data.id),i.s.required],state:[Number(this.selectedRows[0].attributes.lga.data.attributes.state.data.id),i.s.required]}:{area:["",i.s.required],PostalCode:["",i.s.required],lga:["",i.s.required],state:["",i.s.required]});break;case"/masters/LGA":this.lgaModal.show(),this.lgaForm=this.fb.group(t?{lga:[this.selectedRows[0].attributes.Name,i.s.required],state:[Number(this.selectedRows[0].attributes.state.data.id),i.s.required]}:{lga:["",i.s.required],state:["",i.s.required]});break;case"/masters/States":this.stateModal.show(),this.stateForm=this.fb.group(t?{state:[this.selectedRows[0].attributes.Name,i.s.required]}:{state:["",i.s.required]});break;case"/masters/Markets":this.marketModal.show(),this.marketForm=this.fb.group(t?{market:[this.selectedRows[0].attributes.Name,i.s.required],state:[this.selectedRows[0].attributes.state.data.id,i.s.required]}:{market:["",i.s.required],state:["",i.s.required]});break;case"/masters/Crops":this.cropModal.show(),t?(this.cropForm=this.fb.group({crop:[this.selectedRows[0].attributes.Name,i.s.required],Image:[null===(a=null===(e=this.selectedRows[0].attributes.Image)||void 0===e?void 0:e.data)||void 0===a?void 0:a.id,i.s.required]}),this.imageUrl=(null===(r=null===(o=null===(s=this.selectedRows[0].attributes.Image)||void 0===s?void 0:s.data)||void 0===o?void 0:o.attributes)||void 0===r?void 0:r.url)?`${b.a.apiUrl}`+(null===(c=null===(d=null===(l=this.selectedRows[0].attributes.Image)||void 0===l?void 0:l.data)||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.url):null):(this.cropForm=this.fb.group({crop:["",i.s.required],Image:["",i.s.required]}),this.imageUrl=null)}}onChange(t){this.file=[];for(var e=0;e<t.target.files.length;e++)this.file.push(t.target.files[e]);console.log(this.file)}filterLGA(t){this.getLGAs(this.count,this.pageSize,t.target.value)}filterArea(t){this.getAreas(this.count,this.pageSize,t.target.value)}stateSubmit(){let t={};console.log(this.stateForm.value),this.disableButton?this.dataservice.AddStates(this.stateForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.createState?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.stateModal.hide(),this.stateForm.reset(),this.dataservice.getStates(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getStates",t.data.states.data),this.rowData=t.data.states.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")},t=>{console.log(t),this.toastr.error("Failed.")}):this.dataservice.UpdateState(this.stateForm.value,this.selectedRows[0].id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateState?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.stateModal.hide(),this.stateForm.reset(),this.dataservice.getStates(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getStates",t.data.states.data),this.rowData=t.data.states.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")})}lgaSubmit(){let t={};console.log(this.lgaForm.value),this.disableButton?this.dataservice.AddLGA(this.lgaForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.createLga?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.lgaModal.hide(),this.lgaForm.reset(),this.dataservice.getLGAs(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getLGAs",t.data.lgas.data),this.rowData=t.data.lgas.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")}):this.dataservice.UpdateLGA(this.lgaForm.value,this.selectedRows[0].id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateLga?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.lgaModal.hide(),this.lgaForm.reset(),this.dataservice.getLGAs(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getLGAs",t.data.lgas.data),this.rowData=t.data.lgas.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")})}areaSubmit(){let t={};console.log(this.areaForm.value),this.disableButton?this.dataservice.AddArea(this.areaForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.createArea?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.areaModal.hide(),this.areaForm.reset(),this.dataservice.getAreas(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getAreas",t.data.areas.data),this.rowData=t.data.areas.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")}):this.dataservice.UpdateArea(this.areaForm.value,this.selectedRows[0].id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateArea?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.areaModal.hide(),this.areaForm.reset(),this.dataservice.getAreas(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getAreas",t.data.areas.data),this.rowData=t.data.areas.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")})}marketSubmit(){let t={};console.log(this.marketForm.value),this.disableButton?this.dataservice.AddMarket(this.marketForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.createMarket?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.marketModal.hide(),this.marketForm.reset(),this.dataservice.getMarkets(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getMarkets",t.data.markets.data),this.rowData=t.data.markets.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")}):this.dataservice.UpdateMarket(this.marketForm.value,this.selectedRows[0].id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateMarket?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.marketModal.hide(),this.marketForm.reset(),this.dataservice.getMarkets(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getMarkets",t.data.markets.data),this.rowData=t.data.markets.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")})}cropSubmit(){let t={};this.btnLoading=!0,console.log(this.cropForm.value),this.disableButton?this.dataservice.upload(this.file).subscribe(e=>{var a;200==e.status&&(console.log(e),this.dataservice.AddCrop(this.cropForm.value,null===(a=e.body[0])||void 0===a?void 0:a.id).subscribe(e=>{t=e.data,console.log("response",e),e.data.createCrop?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.cropModal.hide(),this.cropForm.reset(),this.dataservice.getCrops(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getCrops",t.data.crops.data),this.rowData=t.data.crops.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")}))}):this.file?this.dataservice.upload(this.file).subscribe(e=>{var a;200==e.status&&(console.log(e),this.dataservice.UpdateCrop(this.cropForm.value,this.selectedRows[0].id,null===(a=e.body[0])||void 0===a?void 0:a.id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateCrop?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.cropModal.hide(),this.cropForm.reset(),this.btnLoading=!1,this.dataservice.getCrops(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getCrops",t.data.crops.data),this.rowData=t.data.crops.data})):"ValidationError"==e.errors[0].extensions.error.name?(this.toastr.error("Can't be added as the value already exists"),this.btnLoading=!1):(this.toastr.error("Failed. Please check the fields!"),this.btnLoading=!1)},t=>{this.btnLoading=!1}))}):this.dataservice.UpdateCrop(this.cropForm.value,this.selectedRows[0].id,null).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateCrop?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.cropModal.hide(),this.cropForm.reset(),this.dataservice.getCrops(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getCrops",t.data.crops.data),this.rowData=t.data.crops.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")})}vilageSubmit(){let t={};console.log(this.villageForm.value),this.disableButton?this.dataservice.Addvillage(this.villageForm.value).subscribe(e=>{t=e.data,console.log("response",e),e.data.createVillage?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.villageModal.hide(),this.villageForm.reset(),this.dataservice.getVillages(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getVillages",t.data.villages.data),this.rowData=t.data.villages.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")}):this.dataservice.Updatevillage(this.villageForm.value,this.selectedRows[0].id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateVillage?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.villageModal.hide(),this.villageForm.reset(),this.dataservice.getVillages(this.count,this.pageSize).valueChanges.subscribe(t=>{console.log("getVillages",t.data.villages.data),this.rowData=t.data.villages.data})):this.toastr.error("ValidationError"==e.errors[0].extensions.error.name?"Can't be added as the value already exists":"Failed. Please check the fields!")})}deleteRecord(){switch(console.log(this.lgaForm.value),this.router.url){case"/masters/Villages":this.dataservice.deleteVillage(this.selectedRows[0].id).subscribe(t=>{console.log("response",t),t.data.deleteVillage?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.deleteModal.hide(),this.dataservice.getVillages(this.count,this.pageSize).valueChanges.subscribe(t=>{this.rowData=t.data.villages.data})):this.toastr.error("Failed!")});break;case"/masters/Cities":this.dataservice.deleteArea(this.selectedRows[0].id).subscribe(t=>{console.log("response",t),t.data.deleteArea?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.deleteModal.hide(),this.dataservice.getAreas(this.count,this.pageSize).valueChanges.subscribe(t=>{this.rowData=t.data.areas.data})):this.toastr.error("Failed!")});break;case"/masters/LGA":this.dataservice.deleteLGA(this.selectedRows[0].id).subscribe(t=>{console.log("response",t),t.data.deleteLga?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.deleteModal.hide(),this.dataservice.getLGAs(this.count,this.pageSize).valueChanges.subscribe(t=>{this.rowData=t.data.lgas.data})):this.toastr.error("Failed!")});break;case"/masters/States":this.dataservice.deleteState(this.selectedRows[0].id).subscribe(t=>{console.log("response",t),t.data.deleteState?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.deleteModal.hide(),this.dataservice.getStates(this.count,this.pageSize).valueChanges.subscribe(t=>{this.rowData=t.data.states.data})):this.toastr.error("Failed!")});break;case"/masters/Markets":this.dataservice.deleteMarket(this.selectedRows[0].id).subscribe(t=>{console.log("response",t),t.data.deleteMarket?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.deleteModal.hide(),this.dataservice.getMarkets(this.count,this.pageSize).valueChanges.subscribe(t=>{this.rowData=t.data.markets.data})):this.toastr.error("Failed!")});break;case"/masters/Crops":this.dataservice.deleteCrop(this.selectedRows[0].id).subscribe(t=>{console.log("response",t),t.data.deleteCrop?(this.toastr.success("Success!"),this.gridApi.deselectAll(),this.deleteModal.hide(),this.dataservice.getCrops(this.count,this.pageSize).valueChanges.subscribe(t=>{this.rowData=t.data.crops.data})):this.toastr.error("Failed!")})}}}return t.\u0275fac=function(e){return new(e||t)(h.Mb(d.a),h.Mb(l.a),h.Mb(l.c),h.Mb(i.c),h.Mb(u.b))},t.\u0275cmp=h.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(h.Ic(p,1),h.Ic(v,1),h.Ic(S,1),h.Ic(f,1),h.Ic(R,1),h.Ic(A,1),h.Ic(C,1),h.Ic(k,3)),2&t){let t;h.rc(t=h.ac())&&(e.stateModal=t.first),h.rc(t=h.ac())&&(e.lgaModal=t.first),h.rc(t=h.ac())&&(e.villageModal=t.first),h.rc(t=h.ac())&&(e.marketModal=t.first),h.rc(t=h.ac())&&(e.areaModal=t.first),h.rc(t=h.ac())&&(e.cropModal=t.first),h.rc(t=h.ac())&&(e.deleteModal=t.first),h.rc(t=h.ac())&&(e.searchInput=t.first)}},decls:227,vars:45,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","text","name","searchField","placeholder","Search...",1,"search-input",3,"ngModel","ngModelChange","input"],["searchInput",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","data-toggle","modal",1,"btn","btn-outline-primary",3,"click"],["type","button","data-toggle","modal",1,"btn","btn-danger",3,"disabled","click"],["type","button","data-toggle","modal",1,"btn","btn-info",3,"disabled","click"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"row"],[1,"col-12"],["id","myGrid","animateRows","true",1,"ag-theme-alpine",2,"width","100%","height","65vh",3,"columnDefs","rowData","context","pagination","rowSelection","frameworkComponents","selectionChanged","gridReady"],["agGrid",""],[1,"float-left","mt-3"],["type","button",1,"btn","btn-primary","float-right","m-2",3,"disabled","click"],[1,"float-right","mt-3"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["stateModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","state","name","state","formControlName","state","placeholder","Enter State Name",1,"form-control"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["lgaModal","bs-modal"],["for","lga"],["type","text","id","lga","name","lga","formControlName","lga","placeholder","Enter LGA Name",1,"form-control"],["for","state"],["id","state","required","","ngModel","","name","state","formControlName","state",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["areaModal","bs-modal"],["for","area"],["type","text","id","area","name","area","formControlName","area","placeholder","Enter City Name",1,"form-control"],["type","text","id","PostalCode","name","PostalCode","formControlName","PostalCode","placeholder","Enter Postal Code",1,"form-control"],["id","state","required","","ngModel","","name","state","formControlName","state",1,"form-control",3,"change"],["id","lga","required","","ngModel","","name","lga","formControlName","lga",1,"form-control"],["marketModal","bs-modal"],["for","market"],["type","text","id","market","name","market","formControlName","market","placeholder","Enter Market Name",1,"form-control"],["cropModal","bs-modal"],["type","text","id","crop","name","crop","formControlName","crop","placeholder","Enter Crop Name",1,"form-control"],["for","Image"],["width","100","height","100","style","object-fit: cover",3,"src",4,"ngIf"],["type","file","id","Image","accept",".jpg,.jpeg,.JPEG,.png","name","Image","formControlName","Image","placeholder","Choose image",1,"form-control",3,"change"],["villageModal","bs-modal"],["type","text","id","village","name","village","formControlName","village","placeholder","Enter Village Name",1,"form-control"],["id","state","ngModel","","name","state","formControlName","state",1,"form-control",3,"change"],["id","lga","ngModel","","name","lga","formControlName","lga",1,"form-control",3,"change"],["id","area","ngModel","","name","area","formControlName","area",1,"form-control"],["deleteModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-body","text-center"],[1,"modal-footer","justify-content-around"],["type","button",1,"btn","btn-primary",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[3,"value"],["width","100","height","100",2,"object-fit","cover",3,"src"]],template:function(t,e){if(1&t){const t=h.Tb();h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"h2"),h.Dc(4),h.Rb(),h.Sb(5,"div"),h.Sb(6,"input",3,4),h.Zb("ngModelChange",function(t){return e.searchTerm=t})("input",function(t){return e.onInputChange(t.target.value)}),h.Rb(),h.Sb(8,"button",5),h.Zb("click",function(){return e.search()}),h.Dc(9," Search "),h.Rb(),h.Sb(10,"button",6),h.Zb("click",function(){return e.downloadExcel()}),h.Dc(11," Download excel "),h.Rb(),h.Sb(12,"button",7),h.Zb("click",function(){return h.vc(t),h.sc(217).show()}),h.Dc(13," Delete "),h.Rb(),h.Sb(14,"button",8),h.Zb("click",function(){return e.openModal("Edit")}),h.Dc(15," Edit "),h.Rb(),h.Sb(16,"button",9),h.Zb("click",function(){return e.openModal()}),h.Dc(17),h.Rb(),h.Rb(),h.Rb(),h.Sb(18,"div",10),h.Sb(19,"div",11),h.Sb(20,"div",12),h.Sb(21,"ag-grid-angular",13,14),h.Zb("selectionChanged",function(t){return e.onSelectionChanged(t)})("gridReady",function(t){return e.onGridReady(t)}),h.Rb(),h.Sb(23,"span",15),h.Dc(24),h.Rb(),h.Sb(25,"button",16),h.Zb("click",function(){return e.loadNext()}),h.Dc(26," Next "),h.Rb(),h.Sb(27,"span",17),h.Dc(28),h.Rb(),h.Sb(29,"button",16),h.Zb("click",function(){return e.loadPrev()}),h.Dc(30," Prev "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(31,"div",18,19),h.Sb(33,"div",20),h.Sb(34,"div",21),h.Sb(35,"div",22),h.Sb(36,"h4",23),h.Dc(37,"Add/Edit State"),h.Rb(),h.Sb(38,"button",24),h.Zb("click",function(){return h.vc(t),h.sc(32).hide()}),h.Sb(39,"span",25),h.Dc(40,"\xd7"),h.Rb(),h.Rb(),h.Rb(),h.Sb(41,"div",26),h.Sb(42,"form",27),h.Zb("ngSubmit",function(){return e.stateSubmit()}),h.Sb(43,"div",28),h.Sb(44,"label",29),h.Dc(45,"State"),h.Rb(),h.Nb(46,"input",30),h.Rb(),h.Sb(47,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(32).hide()}),h.Dc(48," Close "),h.Rb(),h.Sb(49,"button",31),h.Bc(50,w,1,0,"span",32),h.Dc(51," Save changes "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(52,"div",18,33),h.Sb(54,"div",20),h.Sb(55,"div",21),h.Sb(56,"div",22),h.Sb(57,"h4",23),h.Dc(58,"Add/Edit LGA"),h.Rb(),h.Sb(59,"button",24),h.Zb("click",function(){return h.vc(t),h.sc(53).hide()}),h.Sb(60,"span",25),h.Dc(61,"\xd7"),h.Rb(),h.Rb(),h.Rb(),h.Sb(62,"div",26),h.Sb(63,"form",27),h.Zb("ngSubmit",function(){return e.lgaSubmit()}),h.Sb(64,"div",28),h.Sb(65,"label",34),h.Dc(66,"LGA"),h.Rb(),h.Nb(67,"input",35),h.Rb(),h.Sb(68,"div",28),h.Sb(69,"label",36),h.Dc(70,"State"),h.Rb(),h.Sb(71,"select",37),h.Sb(72,"option",38),h.Dc(73,"Choose..."),h.Rb(),h.Bc(74,D,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(75,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(53).hide()}),h.Dc(76," Close "),h.Rb(),h.Sb(77,"button",31),h.Bc(78,F,1,0,"span",32),h.Dc(79," Save changes "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(80,"div",18,40),h.Sb(82,"div",20),h.Sb(83,"div",21),h.Sb(84,"div",22),h.Sb(85,"h4",23),h.Dc(86,"Add/Edit City"),h.Rb(),h.Sb(87,"button",24),h.Zb("click",function(){return h.vc(t),h.sc(81).hide()}),h.Sb(88,"span",25),h.Dc(89,"\xd7"),h.Rb(),h.Rb(),h.Rb(),h.Sb(90,"div",26),h.Sb(91,"form",27),h.Zb("ngSubmit",function(){return e.areaSubmit()}),h.Sb(92,"div",28),h.Sb(93,"label",41),h.Dc(94,"City Name"),h.Rb(),h.Nb(95,"input",42),h.Rb(),h.Sb(96,"div",28),h.Sb(97,"label",41),h.Dc(98,"Postal code"),h.Rb(),h.Nb(99,"input",43),h.Rb(),h.Sb(100,"div",28),h.Sb(101,"label",36),h.Dc(102,"State"),h.Rb(),h.Sb(103,"select",44),h.Zb("change",function(t){return e.filterLGA(t)}),h.Sb(104,"option",38),h.Dc(105,"Choose..."),h.Rb(),h.Bc(106,M,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(107,"div",28),h.Sb(108,"label",34),h.Dc(109,"LGA"),h.Rb(),h.Sb(110,"select",45),h.Sb(111,"option",38),h.Dc(112,"Choose..."),h.Rb(),h.Bc(113,N,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(114,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(81).hide()}),h.Dc(115," Close "),h.Rb(),h.Sb(116,"button",31),h.Bc(117,y,1,0,"span",32),h.Dc(118," Save changes "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(119,"div",18,46),h.Sb(121,"div",20),h.Sb(122,"div",21),h.Sb(123,"div",22),h.Sb(124,"h4",23),h.Dc(125,"Add/Edit Market"),h.Rb(),h.Sb(126,"button",24),h.Zb("click",function(){return h.vc(t),h.sc(120).hide()}),h.Sb(127,"span",25),h.Dc(128,"\xd7"),h.Rb(),h.Rb(),h.Rb(),h.Sb(129,"div",26),h.Sb(130,"form",27),h.Zb("ngSubmit",function(){return e.marketSubmit()}),h.Sb(131,"div",28),h.Sb(132,"label",47),h.Dc(133,"Market"),h.Rb(),h.Nb(134,"input",48),h.Rb(),h.Sb(135,"div",28),h.Sb(136,"label",36),h.Dc(137,"State"),h.Rb(),h.Sb(138,"select",37),h.Sb(139,"option",38),h.Dc(140,"Choose..."),h.Rb(),h.Bc(141,L,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(142,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(120).hide()}),h.Dc(143," Close "),h.Rb(),h.Sb(144,"button",31),h.Bc(145,x,1,0,"span",32),h.Dc(146," Save changes "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(147,"div",18,49),h.Sb(149,"div",20),h.Sb(150,"div",21),h.Sb(151,"div",22),h.Sb(152,"h4",23),h.Dc(153,"Add/Edit Crop"),h.Rb(),h.Sb(154,"button",24),h.Zb("click",function(){return h.vc(t),h.sc(148).hide()}),h.Sb(155,"span",25),h.Dc(156,"\xd7"),h.Rb(),h.Rb(),h.Rb(),h.Sb(157,"div",26),h.Sb(158,"form",27),h.Zb("ngSubmit",function(){return e.cropSubmit()}),h.Sb(159,"div",28),h.Sb(160,"label",29),h.Dc(161,"Crop"),h.Rb(),h.Nb(162,"input",50),h.Rb(),h.Sb(163,"div",28),h.Sb(164,"label",51),h.Dc(165,"Image"),h.Rb(),h.Sb(166,"div"),h.Bc(167,G,1,1,"img",52),h.Rb(),h.Sb(168,"input",53),h.Zb("change",function(t){return e.onChange(t)}),h.Rb(),h.Rb(),h.Sb(169,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(148).hide()}),h.Dc(170," Close "),h.Rb(),h.Sb(171,"button",31),h.Bc(172,q,1,0,"span",32),h.Dc(173," Save changes "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(174,"div",18,54),h.Sb(176,"div",20),h.Sb(177,"div",21),h.Sb(178,"div",22),h.Sb(179,"h4",23),h.Dc(180,"Add/Edit Village"),h.Rb(),h.Sb(181,"button",24),h.Zb("click",function(){return h.vc(t),h.sc(175).hide()}),h.Sb(182,"span",25),h.Dc(183,"\xd7"),h.Rb(),h.Rb(),h.Rb(),h.Sb(184,"div",26),h.Sb(185,"form",27),h.Zb("ngSubmit",function(){return e.vilageSubmit()}),h.Sb(186,"div",28),h.Sb(187,"label",47),h.Dc(188,"Village Name"),h.Rb(),h.Nb(189,"input",55),h.Rb(),h.Sb(190,"div",28),h.Sb(191,"label",36),h.Dc(192,"State"),h.Rb(),h.Sb(193,"select",56),h.Zb("change",function(t){return e.filterLGA(t)}),h.Sb(194,"option",38),h.Dc(195,"Choose..."),h.Rb(),h.Bc(196,B,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(197,"div",28),h.Sb(198,"label",34),h.Dc(199,"LGA"),h.Rb(),h.Sb(200,"select",57),h.Zb("change",function(t){return e.filterArea(t)}),h.Sb(201,"option",38),h.Dc(202,"Choose..."),h.Rb(),h.Bc(203,V,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(204,"div",28),h.Sb(205,"label",41),h.Dc(206,"City"),h.Rb(),h.Sb(207,"select",58),h.Sb(208,"option",38),h.Dc(209,"Choose..."),h.Rb(),h.Bc(210,j,2,2,"option",39),h.Rb(),h.Rb(),h.Sb(211,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(175).hide()}),h.Dc(212," Close "),h.Rb(),h.Sb(213,"button",31),h.Bc(214,z,1,0,"span",32),h.Dc(215," Save changes "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(216,"div",18,59),h.Sb(218,"div",60),h.Sb(219,"div",21),h.Sb(220,"div",61),h.Dc(221," Do you want to delete this record? "),h.Rb(),h.Sb(222,"div",62),h.Sb(223,"button",5),h.Zb("click",function(){return h.vc(t),h.sc(217).hide()}),h.Dc(224," No! Cancel. "),h.Rb(),h.Sb(225,"button",63),h.Zb("click",function(){return e.deleteRecord()}),h.Dc(226," Yes! Delete. "),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb()}2&t&&(h.Ab(4),h.Fc("",e.route.snapshot.data.title," Master"),h.Ab(2),h.jc("ngModel",e.searchTerm),h.Ab(6),h.jc("disabled",e.disableButton),h.Ab(2),h.jc("disabled",e.disableButton),h.Ab(2),h.jc("disabled",!e.disableButton),h.Ab(1),h.Fc(" Add New ",e.route.snapshot.data.title," "),h.Ab(4),h.jc("columnDefs",e.columnDefs)("rowData",e.rowData)("context",e.context)("pagination",!1)("rowSelection",e.rowSelection)("frameworkComponents",e.frameworkComponents),h.Ab(3),h.Hc("",e.from," to ",e.to," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.total,""),h.Ab(1),h.jc("disabled",e.disableNextButton),h.Ab(3),h.Gc("Page ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.page," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.pageCount,""),h.Ab(1),h.jc("disabled",e.disablePrevButton),h.Ab(13),h.jc("formGroup",e.stateForm),h.Ab(7),h.jc("disabled",e.btnLoading||!e.stateForm.valid),h.Ab(1),h.jc("ngIf",e.btnLoading),h.Ab(13),h.jc("formGroup",e.lgaForm),h.Ab(11),h.jc("ngForOf",e.States),h.Ab(3),h.jc("disabled",e.btnLoading||!e.lgaForm.valid),h.Ab(1),h.jc("ngIf",e.btnLoading),h.Ab(13),h.jc("formGroup",e.areaForm),h.Ab(15),h.jc("ngForOf",e.States),h.Ab(7),h.jc("ngForOf",e.LGA),h.Ab(3),h.jc("disabled",e.btnLoading||!e.areaForm.valid),h.Ab(1),h.jc("ngIf",e.btnLoading),h.Ab(13),h.jc("formGroup",e.marketForm),h.Ab(11),h.jc("ngForOf",e.States),h.Ab(3),h.jc("disabled",e.btnLoading||!e.marketForm.valid),h.Ab(1),h.jc("ngIf",e.btnLoading),h.Ab(13),h.jc("formGroup",e.cropForm),h.Ab(9),h.jc("ngIf",e.imageUrl),h.Ab(4),h.jc("disabled",e.btnLoading||!e.cropForm.valid),h.Ab(1),h.jc("ngIf",e.btnLoading),h.Ab(13),h.jc("formGroup",e.villageForm),h.Ab(11),h.jc("ngForOf",e.States),h.Ab(7),h.jc("ngForOf",e.LGA),h.Ab(7),h.jc("ngForOf",e.Areas),h.Ab(3),h.jc("disabled",e.btnLoading||!e.villageForm.valid),h.Ab(1),h.jc("ngIf",e.btnLoading))},directives:[i.b,i.i,i.l,g.a,m.a,i.t,i.j,i.e,i.d,s.k,i.q,i.p,i.m,i.u,s.j],encapsulation:2}),t})();const I=[{path:"",children:[{path:"",redirectTo:"masters"},{path:"States",component:P,data:{roles:"States",title:"States"}},{path:"LGA",component:P,data:{roles:"LGA",title:"LGA"}},{path:"Cities",component:P,data:{roles:"Cities",title:"Cities"}},{path:"Villages",component:P,data:{roles:"Villages",title:"Villages"}},{path:"Markets",component:P,data:{roles:"Markets",title:"Markets"}},{path:"Crops",component:P,data:{roles:"Crops",title:"Crops"}}]}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({imports:[[l.g.forChild(I)],l.g]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({imports:[[s.c,r.a,i.o,g.b.withComponents([]),E,o.c.forRoot(),m.b.forRoot(),i.f]]}),t})()}}]);