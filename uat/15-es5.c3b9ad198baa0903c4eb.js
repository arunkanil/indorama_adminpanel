!function(){function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function a(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{jykL:function(e,i,r){"use strict";r.r(i),r.d(i,"ChatModule",function(){return j});var l=r("SVse"),s=r("s7LF"),u=r("FE24"),n=r("2ZVE"),c=r("iInd"),b=r("AytR"),o=r("R7Hv"),d=r("8Y7J"),h=r("EApP"),m=["searchfield"];function g(t,a){if(1&t){var e=d.Tb();d.Sb(0,"ul",31),d.Sb(1,"li",32),d.Sb(2,"a",33),d.Zb("click",function(){return d.vc(e),d.cc().toggleChat(!1)}),d.Dc(3,"All Chats"),d.Rb(),d.Sb(4,"a",33),d.Zb("click",function(){return d.vc(e),d.cc().toggleChat(!0)}),d.Dc(5,"Ask Indorama"),d.Rb(),d.Rb(),d.Rb()}}function f(t,a){if(1&t&&d.Nb(0,"img",39),2&t){var e=d.cc().$implicit,i=d.cc();d.lc("src","",i.baseURL,"",null==e||null==e.attributes||null==e.attributes.chatInitiatedBy||null==e.attributes.chatInitiatedBy.data||null==e.attributes.chatInitiatedBy.data.attributes||null==e.attributes.chatInitiatedBy.data.attributes.prof_pic||null==e.attributes.chatInitiatedBy.data.attributes.prof_pic.data||null==e.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes?null:e.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes.url,"",d.xc)}}function p(t,a){1&t&&d.Nb(0,"img",40)}function v(t,a){if(1&t){var e=d.Tb();d.Sb(0,"a",34),d.Zb("click",function(){d.vc(e);var t=a.$implicit;return d.cc().getChatMessages(t)}),d.Sb(1,"div",35),d.Bc(2,f,1,2,"img",36),d.Bc(3,p,1,0,"img",26),d.Sb(4,"div",37),d.Dc(5),d.Sb(6,"div",38),d.Dc(7),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var i=a.$implicit;d.Ab(2),d.jc("ngIf",null==i||null==i.attributes||null==i.attributes.chatInitiatedBy||null==i.attributes.chatInitiatedBy.data||null==i.attributes.chatInitiatedBy.data.attributes||null==i.attributes.chatInitiatedBy.data.attributes.prof_pic.data||null==i.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes?null:i.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes.url),d.Ab(1),d.jc("ngIf",!(null!=i&&null!=i.attributes&&null!=i.attributes.chatInitiatedBy&&null!=i.attributes.chatInitiatedBy.data&&null!=i.attributes.chatInitiatedBy.data.attributes&&null!=i.attributes.chatInitiatedBy.data.attributes.prof_pic.data&&null!=i.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes&&i.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes.url)),d.Ab(2),d.Fc(" ",null==i||null==i.attributes||null==i.attributes.chatInitiatedBy||null==i.attributes.chatInitiatedBy.data||null==i.attributes.chatInitiatedBy.data.attributes?null:i.attributes.chatInitiatedBy.data.attributes.Name," "),d.Ab(2),d.Gc(" ",null==i||null==i.attributes||null==i.attributes.members||null==i.attributes.members.data[1]||null==i.attributes.members.data[1].attributes?null:i.attributes.members.data[1].attributes.Name," - ",null==i||null==i.attributes||null==i.attributes.members||null==i.attributes.members.data[0]||null==i.attributes.members.data[0].attributes?null:i.attributes.members.data[0].attributes.Name," ")}}function _(t,a){if(1&t&&d.Nb(0,"img",41),2&t){var e=d.cc();d.lc("src","",e.baseURL,"",null==e.chatMembers[0]||null==e.chatMembers[0].attributes||null==e.chatMembers[0].attributes.prof_pic.data||null==e.chatMembers[0].attributes.prof_pic.data.attributes?null:e.chatMembers[0].attributes.prof_pic.data.attributes.url,"",d.xc)}}function y(t,a){1&t&&d.Nb(0,"img",40)}function M(t,a){if(1&t&&d.Nb(0,"img",41),2&t){var e=d.cc();d.lc("src","",e.baseURL,"",null==e.chatMembers[1]||null==e.chatMembers[1].attributes||null==e.chatMembers[1].attributes.prof_pic.data||null==e.chatMembers[1].attributes.prof_pic.data.attributes?null:e.chatMembers[1].attributes.prof_pic.data.attributes.url,"",d.xc)}}function S(t,a){1&t&&d.Nb(0,"img",40)}function C(t,a){if(1&t&&d.Nb(0,"img",50),2&t){var e=d.cc().$implicit,i=d.cc();d.lc("src","",i.baseURL,"",null==e||null==e.attributes||null==e.attributes.from_user||null==e.attributes.from_user.data||null==e.attributes.from_user.data.attributes||null==e.attributes.from_user.data.attributes.prof_pic||null==e.attributes.from_user.data.attributes.prof_pic.data||null==e.attributes.from_user.data.attributes.prof_pic.data.attributes?null:e.attributes.from_user.data.attributes.prof_pic.data.attributes.url,"",d.xc)}}function R(t,a){1&t&&d.Nb(0,"img",51)}function w(t,a){if(1&t&&d.Nb(0,"img",52),2&t){var e=d.cc().$implicit,i=d.cc();d.lc("src","",i.baseURL,"",null==e||null==e.attributes||null==e.attributes.image_attachment||null==e.attributes.image_attachment.data||null==e.attributes.image_attachment.data.attributes?null:e.attributes.image_attachment.data.attributes.url,"",d.xc)}}function k(t,a){if(1&t&&(d.Sb(0,"div",42),d.Sb(1,"div"),d.Bc(2,C,1,2,"img",43),d.Bc(3,R,1,0,"img",44),d.Sb(4,"div",45),d.Dc(5),d.Nb(6,"br"),d.Dc(7),d.Rb(),d.Rb(),d.Sb(8,"div",46),d.Sb(9,"div",47),d.Dc(10),d.Rb(),d.Sb(11,"a",48),d.Bc(12,w,1,2,"img",49),d.Rb(),d.Sb(13,"div"),d.Dc(14),d.Rb(),d.Rb(),d.Rb()),2&t){var e=a.$implicit,i=d.cc();d.Eb("chat-message-right",(null==e||null==e.attributes||null==e.attributes.from_user||null==e.attributes.from_user.data||null==e.attributes.from_user.data.attributes?null:e.attributes.from_user.data.attributes.Name)==(null==i.chatMembers[1]||null==i.chatMembers[1].attributes?null:i.chatMembers[1].attributes.Name))("chat-message-left",(null==e||null==e.attributes||null==e.attributes.from_user||null==e.attributes.from_user.data||null==e.attributes.from_user.data.attributes?null:e.attributes.from_user.data.attributes.Name)!==(null==i.chatMembers[1]||null==i.chatMembers[1].attributes?null:i.chatMembers[1].attributes.Name)),d.Ab(2),d.jc("ngIf",null==e||null==e.attributes||null==e.attributes.from_user||null==e.attributes.from_user.data||null==e.attributes.from_user.data.attributes||null==e.attributes.from_user.data.attributes.prof_pic||null==e.attributes.from_user.data.attributes.prof_pic.data||null==e.attributes.from_user.data.attributes.prof_pic.data.attributes?null:e.attributes.from_user.data.attributes.prof_pic.data.attributes.url),d.Ab(1),d.jc("ngIf",!(null!=e&&null!=e.attributes&&null!=e.attributes.from_user&&null!=e.attributes.from_user.data&&null!=e.attributes.from_user.data.attributes&&null!=e.attributes.from_user.data.attributes.prof_pic&&null!=e.attributes.from_user.data.attributes.prof_pic.data&&null!=e.attributes.from_user.data.attributes.prof_pic.data.attributes&&e.attributes.from_user.data.attributes.prof_pic.data.attributes.url)),d.Ab(2),d.Fc(" ",i.convertDate(null==e||null==e.attributes?null:e.attributes.createdAt),""),d.Ab(2),d.Fc("",i.convertTime(null==e||null==e.attributes?null:e.attributes.createdAt)," "),d.Ab(3),d.Fc(" ",null==e||null==e.attributes||null==e.attributes.from_user||null==e.attributes.from_user.data||null==e.attributes.from_user.data.attributes?null:e.attributes.from_user.data.attributes.Name," "),d.Ab(1),d.lc("href","",i.baseURL,"",null==e||null==e.attributes||null==e.attributes.image_attachment||null==e.attributes.image_attachment.data||null==e.attributes.image_attachment.data.attributes?null:e.attributes.image_attachment.data.attributes.url,"",d.xc),d.Ab(1),d.jc("ngIf",null==e||null==e.attributes||null==e.attributes.image_attachment||null==e.attributes.image_attachment.data||null==e.attributes.image_attachment.data.attributes?null:e.attributes.image_attachment.data.attributes.url),d.Ab(2),d.Ec(null==e||null==e.attributes?null:e.attributes.message)}}var I,x,B,D=[{path:"",children:[{path:"",redirectTo:"cropprices"},{path:"all",component:(I=function(){function e(a,i,r){t(this,e),this.dataservice=a,this.router=i,this.toastr=r,this.chatData=[],this.messageData=[],this.chatMembers=[],this.loading=!0,this.messageLoading=!1,this.btnLoading=!1,this.pageSize=10,this.count=0,this.key=null,this.selectedList="All Chats",this.listCheck=!1,this.baseURL=b.a.apiUrl}var i,r,l;return i=e,(r=[{key:"ngOnInit",value:function(){console.log(this.router),this.getallChats(this.pageSize,this.pageSize*this.count,this.key)}},{key:"getallChats",value:function(t,a,e,i){var r=this;console.log(t,a),this.loading=!0,this.dataservice.getallChats(t,a,e,i).valueChanges.subscribe(function(t){var a;r.chatData=r.chatData.concat(null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.chats.data),console.log("getallChats",r.chatData),r.loading=!1})}},{key:"toggleChat",value:function(t){t?(this.chatData=[],this.selectedList="Ask Indorama",this.listCheck=t,this.getallChats(this.pageSize,0,void 0,!0)):(this.chatData=[],this.selectedList="All Chats",this.listCheck=t,this.getallChats(this.pageSize,0,void 0,!1))}},{key:"searchChats",value:function(){this.chatData=[],this.count=0,this.getallChats(this.pageSize,0,this.key,this.listCheck)}},{key:"clearSearch",value:function(){this.chatData=[],this.count=0,this.key=void 0,this.searchfield.nativeElement.value=" ",this.getallChats(this.pageSize,0,void 0,this.listCheck)}},{key:"loadMoreChats",value:function(){this.count++,this.getallChats(this.pageSize,this.pageSize*this.count,this.key,this.listCheck)}},{key:"convertDate",value:function(t){return new Date(t).toLocaleDateString()}},{key:"convertTime",value:function(t){return new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})}},{key:"onChange",value:function(t){this.key=t.target.value,console.log(t.target.value)}},{key:"getChatMessages",value:function(t){var a,e,i=this;this.messageLoading=!0,this.chatMembers=null===(e=null===(a=t.attributes)||void 0===a?void 0:a.members)||void 0===e?void 0:e.data,console.log(this.chatMembers),this.dataservice.getChatMessages(t.id).valueChanges.subscribe(function(t){var a,e,r;console.log("getChatMessages",null===(e=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.chat)||void 0===e?void 0:e.data),i.messageData=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.chat.data,i.messageLoading=!1})}}])&&a(i.prototype,r),l&&a(i,l),e}(),I.\u0275fac=function(t){return new(t||I)(d.Mb(o.a),d.Mb(c.c),d.Mb(h.b))},I.\u0275cmp=d.Gb({type:I,selectors:[["ng-component"]],viewQuery:function(t,a){var e;1&t&&d.Ic(m,1),2&t&&d.rc(e=d.ac())&&(a.searchfield=e.first)},decls:47,vars:9,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["dropdown","",1,"btn-group","float-right"],["dropdownToggle","","type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["class","dropdown-menu","role","menu",4,"dropdownMenu"],[1,"content"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-12","col-lg-5","col-xl-3","border-right",2,"max-height","90vh","overflow-y","scroll"],[1,"px-4","d-none","d-md-block"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["ngModel","","type","text","placeholder","Search...",1,"form-control","my-3",3,"change"],["searchfield",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],["class","list-group-item list-group-item-action border-0",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary",2,"float","right",3,"click"],[1,"d-block","d-lg-none","mt-1","mb-0"],[1,"col-12","col-lg-7","col-xl-9"],[1,"py-2","px-4","border-bottom","d-none","d-lg-block"],[1,"d-flex","align-items-center","py-1",2,"justify-content","space-between"],[1,"flex-grow-1","pl-3"],["class","rounded-circle mr-1","alt","Sharon Lessman","width","40","height","40",3,"src",4,"ngIf"],["src","assets/img/avatars/6.png","class","rounded-circle mr-1","alt","profile pic","width","40","height","40",4,"ngIf"],[1,"position-relative"],[1,"chat-messages","p-4",2,"max-height","80vh","overflow-y","scroll"],["messageSection",""],["class","pb-4",3,"chat-message-right","chat-message-left",4,"ngFor","ngForOf"],["role","menu",1,"dropdown-menu"],["role","menuitem"],[1,"dropdown-item",3,"click"],[1,"list-group-item","list-group-item-action","border-0",3,"click"],[1,"d-flex","align-items-start"],["class","rounded-circle mr-1","alt","profile pic","width","40","height","40",3,"src",4,"ngIf"],[1,"flex-grow-1","ml-3"],[1,"small"],["alt","profile pic","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],["src","assets/img/avatars/6.png","alt","profile pic","width","40","height","40",1,"rounded-circle","mr-1"],["alt","Sharon Lessman","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],[1,"pb-4"],["class","rounded-circle mr-1","alt","Chris Wood","width","40","height","40",3,"src",4,"ngIf"],["src","assets/img/avatars/6.png","class","rounded-circle mr-1","alt","Chris Wood","width","40","height","40",4,"ngIf"],[1,"text-muted","small","text-nowrap","mt-2"],[1,"flex-shrink-1","bg-light","rounded","py-2","px-3","mx-3",2,"max-width","400px"],[1,"font-weight-bold","mb-1"],["target","_blank",3,"href"],["class","mr-1","alt","Chris Wood","width","100%","height","100",3,"src",4,"ngIf"],["alt","Chris Wood","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],["src","assets/img/avatars/6.png","alt","Chris Wood","width","40","height","40",1,"rounded-circle","mr-1"],["alt","Chris Wood","width","100%","height","100",1,"mr-1",3,"src"]],template:function(t,a){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"h2"),d.Dc(4,"Chat Home"),d.Rb(),d.Sb(5,"div",3),d.Sb(6,"button",4),d.Dc(7),d.Nb(8,"span",5),d.Rb(),d.Bc(9,g,6,0,"ul",6),d.Rb(),d.Rb(),d.Sb(10,"main",7),d.Sb(11,"div",8),d.Sb(12,"div",1),d.Sb(13,"div",9),d.Sb(14,"div",10),d.Sb(15,"div",11),d.Sb(16,"div",12),d.Sb(17,"div",13),d.Sb(18,"input",14,15),d.Zb("change",function(t){return a.onChange(t)}),d.Rb(),d.Sb(20,"button",16),d.Zb("click",function(){return a.searchChats()}),d.Dc(21," Search "),d.Rb(),d.Sb(22,"button",17),d.Zb("click",function(){return a.clearSearch()}),d.Dc(23," Clear "),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Bc(24,v,8,5,"a",18),d.Sb(25,"button",19),d.Zb("click",function(){return a.loadMoreChats()}),d.Dc(26," Load more "),d.Rb(),d.Nb(27,"hr",20),d.Rb(),d.Sb(28,"div",21),d.Sb(29,"div",22),d.Sb(30,"div",23),d.Sb(31,"div"),d.Sb(32,"div",24),d.Bc(33,_,1,2,"img",25),d.Bc(34,y,1,0,"img",26),d.Sb(35,"strong"),d.Dc(36),d.Rb(),d.Rb(),d.Rb(),d.Sb(37,"div"),d.Sb(38,"div",24),d.Bc(39,M,1,2,"img",25),d.Bc(40,S,1,0,"img",26),d.Sb(41,"strong"),d.Dc(42),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(43,"div",27),d.Sb(44,"div",28,29),d.Bc(46,k,15,13,"div",30),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Ab(7),d.Fc(" ",a.selectedList,""),d.Ab(17),d.jc("ngForOf",a.chatData),d.Ab(9),d.jc("ngIf",null==a.chatMembers[0]||null==a.chatMembers[0].attributes||null==a.chatMembers[0].attributes.prof_pic.data||null==a.chatMembers[0].attributes.prof_pic.data.attributes?null:a.chatMembers[0].attributes.prof_pic.data.attributes.url),d.Ab(1),d.jc("ngIf",!(null!=a.chatMembers[0]&&null!=a.chatMembers[0].attributes&&null!=a.chatMembers[0].attributes.prof_pic.data&&null!=a.chatMembers[0].attributes.prof_pic.data.attributes&&a.chatMembers[0].attributes.prof_pic.data.attributes.url)),d.Ab(2),d.Ec(null==a.chatMembers[0]||null==a.chatMembers[0].attributes?null:a.chatMembers[0].attributes.Name),d.Ab(3),d.jc("ngIf",null==a.chatMembers[1]||null==a.chatMembers[1].attributes||null==a.chatMembers[1].attributes.prof_pic.data||null==a.chatMembers[1].attributes.prof_pic.data.attributes?null:a.chatMembers[1].attributes.prof_pic.data.attributes.url),d.Ab(1),d.jc("ngIf",!(null!=a.chatMembers[1]&&null!=a.chatMembers[1].attributes&&null!=a.chatMembers[1].attributes.prof_pic.data&&null!=a.chatMembers[1].attributes.prof_pic.data.attributes&&a.chatMembers[1].attributes.prof_pic.data.attributes.url)),d.Ab(2),d.Ec(null==a.chatMembers[1]||null==a.chatMembers[1].attributes?null:a.chatMembers[1].attributes.Name),d.Ab(4),d.jc("ngForOf",null==a.messageData||null==a.messageData.attributes||null==a.messageData.attributes.messages?null:a.messageData.attributes.messages.data))},directives:[u.a,u.d,u.b,s.b,s.i,s.l,l.j,l.k],styles:["body[_ngcontent-%COMP%]{margin-top:20px}.chat-online[_ngcontent-%COMP%]{color:#34ce57}.chat-offline[_ngcontent-%COMP%]{color:#e4606d}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:800px;overflow-y:scroll}.chat-message-left[_ngcontent-%COMP%], .chat-message-right[_ngcontent-%COMP%]{display:flex;flex-shrink:0}.chat-message-left[_ngcontent-%COMP%]{margin-right:auto}.chat-message-right[_ngcontent-%COMP%]{flex-direction:row-reverse;margin-left:auto}.py-3[_ngcontent-%COMP%]{padding-top:1rem!important;padding-bottom:1rem!important}.px-4[_ngcontent-%COMP%]{padding-right:1.5rem!important;padding-left:1.5rem!important}.flex-grow-0[_ngcontent-%COMP%]{flex-grow:0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #dee2e6!important}"]}),I),data:{title:"Chats"}}]}],A=((x=function a(){t(this,a)}).\u0275fac=function(t){return new(t||x)},x.\u0275mod=d.Kb({type:x}),x.\u0275inj=d.Jb({imports:[[c.g.forChild(D)],c.g]}),x),L=r("YFAK"),N=r("LqlI"),j=((B=function a(){t(this,a)}).\u0275fac=function(t){return new(t||B)},B.\u0275mod=d.Kb({type:B}),B.\u0275inj=d.Jb({imports:[[l.c,n.a,s.o,L.b.withComponents([]),A,u.c.forRoot(),N.b.forRoot(),s.f]]}),B)}}])}();