!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{mjQe:function(t,a,o){"use strict";o.r(a),o.d(a,"BestCropPracticesModule",function(){return j});var n=o("SVse"),c=o("s7LF"),s=o("FE24"),l=o("2ZVE"),b=o("iInd"),d=o("R7Hv"),u=o("7nfi"),f=o("AytR"),p=o("8Y7J"),h=o("EApP"),m=o("LqlI"),g=["practicesModal"],v=["deleteModal"];function S(e,t){if(1&e){var i=p.Tb();p.Sb(0,"div",37),p.Sb(1,"div",1),p.Sb(2,"div",38),p.Nb(3,"img",39),p.Sb(4,"div",40),p.Sb(5,"div",41),p.Sb(6,"a",42),p.Dc(7,"Click to view file"),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(8,"div",4),p.Sb(9,"div",43),p.Sb(10,"h5",44),p.Dc(11),p.Rb(),p.Sb(12,"div"),p.Sb(13,"button",45),p.Zb("click",function(){p.vc(i);var e=t.$implicit;return p.cc().openModal(e)}),p.Nb(14,"img",46),p.Rb(),p.Rb(),p.Rb(),p.Sb(15,"p",47),p.Dc(16),p.Rb(),p.Rb(),p.Rb(),p.Rb()}if(2&e){var r=t.$implicit,a=p.cc();p.Ab(3),p.lc("src","",a.baseURL,"",null==r||null==r.attributes||null==r.attributes.cropImage||null==r.attributes.cropImage.data||null==r.attributes.cropImage.data.attributes?null:r.attributes.cropImage.data.attributes.url,"",p.xc),p.Ab(3),p.lc("href","",a.baseURL,"",null==r||null==r.attributes||null==r.attributes.media||null==r.attributes.media.data||null==r.attributes.media.data.attributes?null:r.attributes.media.data.attributes.url,"",p.xc),p.Ab(5),p.Fc(" ",r.attributes.crop.data.attributes.Name," "),p.Ab(5),p.Fc(" ",r.attributes.content," ")}}function R(e,t){if(1&e&&(p.Sb(0,"option",48),p.Dc(1),p.Rb()),2&e){var i=t.$implicit;p.kc("value",i.id),p.Ab(1),p.Fc(" ",i.attributes.Name," ")}}function y(e,t){if(1&e&&p.Nb(0,"img",49),2&e){var i=p.cc();p.kc("src",i.imageUrl,p.xc)}}function C(e,t){1&e&&p.Nb(0,"span",50)}var w,k,D,I=[{path:"",children:[{path:"",redirectTo:"cropprices"},{path:"all",component:(w=function(){function t(r,a,o,n){i(this,t),this.dataservice=r,this.router=a,this.fb=o,this.toastr=n,this.loading=!0,this.btnLoading=!1,this.disableButton=!0,this.title="Verification",this.orders={},this.columnDefs=[],this.Crops=[],this.baseURL=f.a.apiUrl,this.practicesForm=this.fb.group({crop:["",c.s.required],content:["",c.s.required],File:["",c.s.required],Image:["",c.s.required]}),this.rowData=[],this.selectedRows=[],this.filter={},this.file=null,this.image=null,this.columnDefs=e(u.d),this.rowSelection="single"}var a,o,n;return a=t,(o=[{key:"ngOnInit",value:function(){this.loading=!0,console.log(this.router),this.getBestCropPractises(),this.getCrops()}},{key:"getBestCropPractises",value:function(){var e=this;this.dataservice.getBestCropPractises().valueChanges.subscribe(function(t){e.rowData=t.data.bestCropPractises.data})}},{key:"getCrops",value:function(){var e=this;this.dataservice.getCrops().valueChanges.subscribe(function(t){e.Crops=t.data.crops.data})}},{key:"onChange",value:function(e,t){if(1==t){this.file=[];for(var i=0;i<e.target.files.length;i++)this.file.push(e.target.files[i])}else for(this.image=[],i=0;i<e.target.files.length;i++)this.image.push(e.target.files[i]);console.log(this.file,this.image)}},{key:"openModal",value:function(e){this.deleteModal.show(),this.deleteId=e.id}},{key:"deletePractice",value:function(){var e=this;this.dataservice.deleteBestPractice(this.deleteId).subscribe(function(t){console.log("response",t),t.data.deleteBestCropPractise?(e.dataservice.getBestCropPractises().refetch(),e.toastr.success("Success!"),e.deleteModal.hide()):e.toastr.error("Failed!")})}},{key:"practicesSubmit",value:function(){var e=this,t=null,i=null;this.btnLoading=!0,console.log(this.practicesForm.value),this.dataservice.upload(this.image).subscribe(function(r){var a;200==r.status?(t=null===(a=r.body[0])||void 0===a?void 0:a.id,console.log(r),e.dataservice.upload(e.file).subscribe(function(r){var a;200==r.status?(i=null===(a=r.body[0])||void 0===a?void 0:a.id,console.log(r),e.dataservice.createBestCropPractise(e.practicesForm.value,t,i).subscribe(function(t){t.data,console.log("response",t),t.data.createBestCropPractise?(e.toastr.success("Success!"),e.dataservice.getBestCropPractises().refetch(),e.practicesModal.hide(),e.btnLoading=!1):(e.toastr.error("Failed. Please check the fields!"),e.btnLoading=!1)})):(e.toastr.error("Image failed to upload!"),e.btnLoading=!1)})):(e.toastr.error("Image failed to upload!"),e.btnLoading=!1)})}}])&&r(a.prototype,o),n&&r(a,n),t}(),w.\u0275fac=function(e){return new(e||w)(p.Mb(d.a),p.Mb(b.c),p.Mb(c.c),p.Mb(h.b))},w.\u0275cmp=p.Gb({type:w,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(p.Ic(g,1),p.Ic(v,1)),2&e&&(p.rc(i=p.ac())&&(t.practicesModal=i.first),p.rc(i=p.ac())&&(t.deleteModal=i.first))},decls:61,vars:7,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["practicesModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","crop"],["id","crop","required","","ngModel","","name","crop","formControlName","crop",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","content"],["type","text","id","content","maxlength","150","name","content","rows","3","formControlName","content","placeholder","Enter description",1,"form-control"],["for","File"],["type","file","id","File","accept",".pdf","name","File","formControlName","File","placeholder","Choose file",3,"change"],["for","Image"],["width","100","height","100","style","object-fit: cover",3,"src",4,"ngIf"],["type","file","id","Image","accept",".jpg,.jpeg,.JPEG,.png","name","Image","formControlName","Image","placeholder","Choose image",3,"change"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["deleteModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-body","text-center"],[1,"modal-footer","justify-content-around"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-3"],[1,"img-container"],["height","200","width","200","alt","Card image cap",1,"card-img-top",3,"src"],[1,"overlay"],[1,"overlay-text"],["target","_blank",2,"color","white",3,"href"],[2,"display","flex","justify-content","space-between"],[1,"card-title"],["type","button",1,"btn","btn-outline-primary","p-1",3,"click"],["src","assets/deleteIcon.svg"],[1,"card-text"],[3,"value"],["width","100","height","100",2,"object-fit","cover",3,"src"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){if(1&e){var i=p.Tb();p.Sb(0,"div",0),p.Sb(1,"div",1),p.Sb(2,"div",2),p.Sb(3,"h2"),p.Dc(4,"Best Crop Practices"),p.Rb(),p.Sb(5,"div"),p.Sb(6,"button",3),p.Zb("click",function(){return p.vc(i),p.sc(12).show()}),p.Dc(7," Add New "),p.Rb(),p.Rb(),p.Rb(),p.Sb(8,"div",4),p.Sb(9,"div",5),p.Bc(10,S,17,6,"div",6),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(11,"div",7,8),p.Sb(13,"div",9),p.Sb(14,"div",10),p.Sb(15,"div",11),p.Sb(16,"h4",12),p.Dc(17,"Add/Edit Practice"),p.Rb(),p.Sb(18,"button",13),p.Zb("click",function(){return p.vc(i),p.sc(12).hide()}),p.Sb(19,"span",14),p.Dc(20,"\xd7"),p.Rb(),p.Rb(),p.Rb(),p.Sb(21,"div",15),p.Sb(22,"form",16),p.Zb("ngSubmit",function(){return t.practicesSubmit()}),p.Sb(23,"div",17),p.Sb(24,"label",18),p.Dc(25,"Crop"),p.Rb(),p.Sb(26,"select",19),p.Sb(27,"option",20),p.Dc(28,"Choose..."),p.Rb(),p.Bc(29,R,2,2,"option",21),p.Rb(),p.Rb(),p.Sb(30,"div",17),p.Sb(31,"label",22),p.Dc(32,"Description"),p.Rb(),p.Nb(33,"textarea",23),p.Rb(),p.Sb(34,"div",17),p.Sb(35,"label",24),p.Dc(36,"PDF File"),p.Rb(),p.Sb(37,"div"),p.Sb(38,"input",25),p.Zb("change",function(e){return t.onChange(e,!0)}),p.Rb(),p.Rb(),p.Rb(),p.Sb(39,"div",17),p.Sb(40,"label",26),p.Dc(41,"Preview image"),p.Rb(),p.Sb(42,"div"),p.Bc(43,y,1,1,"img",27),p.Rb(),p.Sb(44,"input",28),p.Zb("change",function(e){return t.onChange(e,!1)}),p.Rb(),p.Rb(),p.Sb(45,"button",29),p.Zb("click",function(){return p.vc(i),p.sc(12).hide()}),p.Dc(46," Close "),p.Rb(),p.Sb(47,"button",30),p.Bc(48,C,1,0,"span",31),p.Dc(49," Save changes "),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(50,"div",7,32),p.Sb(52,"div",33),p.Sb(53,"div",10),p.Sb(54,"div",34),p.Dc(55," Do you want to delete this record? "),p.Rb(),p.Sb(56,"div",35),p.Sb(57,"button",29),p.Zb("click",function(){return p.vc(i),p.sc(51).hide()}),p.Dc(58," No! Cancel. "),p.Rb(),p.Sb(59,"button",36),p.Zb("click",function(){return t.deletePractice()}),p.Dc(60," Yes! Delete. "),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Rb()}2&e&&(p.Ab(6),p.jc("disabled",!t.disableButton),p.Ab(4),p.jc("ngForOf",t.rowData),p.Ab(12),p.jc("formGroup",t.practicesForm),p.Ab(7),p.jc("ngForOf",t.Crops),p.Ab(14),p.jc("ngIf",t.imageUrl),p.Ab(4),p.jc("disabled",t.btnLoading||!t.practicesForm.valid),p.Ab(1),p.jc("ngIf",t.btnLoading))},directives:[n.j,m.a,c.t,c.j,c.e,c.q,c.p,c.i,c.d,c.m,c.u,c.b,c.g,n.k],encapsulation:2}),w),data:{roles:"KP_CALLER",title:"Best Crop Practices"}}]}],F=((k=function e(){i(this,e)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=p.Kb({type:k}),k.\u0275inj=p.Jb({imports:[[b.g.forChild(I)],b.g]}),k),A=o("YFAK"),j=((D=function e(){i(this,e)}).\u0275fac=function(e){return new(e||D)},D.\u0275mod=p.Kb({type:D}),D.\u0275inj=p.Jb({imports:[[n.c,l.a,c.o,A.b.withComponents([]),F,s.c.forRoot(),m.b.forRoot(),c.f]]}),D)}}])}();