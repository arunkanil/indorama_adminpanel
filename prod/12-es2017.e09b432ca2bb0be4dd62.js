(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ve2J:function(t,e,i){"use strict";i.r(e),i.d(e,"ActivitiesModule",function(){return q});var a=i("SVse"),o=i("s7LF"),l=i("FE24"),n=i("2ZVE"),r=i("iInd"),s=i("R7Hv"),d=i("7nfi"),b=i("AytR"),c=i("8Y7J"),u=i("EApP"),v=i("YFAK"),m=i("LqlI");const p=["activitiesModal"],h=["downloadActivitiesModal"],S=["uploadActivitiesModal"];function g(t,e){if(1&t&&(c.Sb(0,"option",74),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function f(t,e){if(1&t&&(c.Sb(0,"option",74),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function R(t,e){if(1&t&&(c.Sb(0,"option",74),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function D(t,e){1&t&&(c.Sb(0,"div",26),c.Dc(1," Maximum 9999999 "),c.Rb())}function A(t,e){1&t&&(c.Sb(0,"div",26),c.Dc(1," Special characters not permitted "),c.Rb())}function y(t,e){if(1&t&&(c.Sb(0,"option",74),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function C(t,e){1&t&&c.Nb(0,"span",75)}function F(t,e){1&t&&c.Nb(0,"span",75)}function N(t,e){1&t&&c.Nb(0,"span",75)}const w=["editModal"],M=["resultModal"],L=["deleteModal"];function T(t,e){if(1&t&&(c.Sb(0,"option",60),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function k(t,e){if(1&t&&(c.Sb(0,"option",60),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function G(t,e){if(1&t&&(c.Sb(0,"option",60),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function O(t,e){if(1&t&&(c.Sb(0,"option",60),c.Dc(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.id),c.Ab(1),c.Fc(" ",t.attributes.Name," ")}}function j(t,e){1&t&&c.Nb(0,"span",61)}const x=[{path:"",children:[{path:"",redirectTo:"cropprices"},{path:"all",component:(()=>{class t{constructor(t,e,i,a){this.dataservice=t,this.router=e,this.fb=i,this.toastr=a,this.loading=!0,this.btnLoading=!1,this.disableButton=!0,this.disableNextButton=!1,this.disablePrevButton=!0,this.count=1,this.columnDefs=[],this.States=[],this.LGA=[],this.Areas=[],this.Crops=[],this.file=null,this.activitiesForm=this.fb.group({ActivityType:["",o.s.required],Latitude:[""],Longitude:[""],state:["",o.s.required],lga:["",o.s.required],NoOfAttendees:["",[o.s.max(9999999),o.s.min(1)]],area:["",o.s.required],crop:["",o.s.required],FarmerName:["",o.s.pattern("[a-zA-Z ]*")],PlannedFarmDay:[""],ConditionOfCrop:[""],Date:["",o.s.required],Time:[""],Reason:[""]}),this.downloadExcelForm=this.fb.group({fromDate:["",o.s.required],toDate:["",o.s.required]}),this.uploadExcelForm=this.fb.group({File:["",o.s.required]}),this.rowData=[],this.pageSize=20,this.from=1,this.to=20,this.columnDefs=[...d.a],this.rowSelection="single"}ngOnInit(){this.loading=!0,this.getActivities(),this.getCrops(),this.getAreas(),this.getStates()}checkSpecialCharacters(t){return!!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(t)}getLGAs(t){this.dataservice.getLGAs(1,1e4,"",t).valueChanges.subscribe(t=>{console.log("getLGAs",t.data.lgas.data),this.LGA=t.data.lgas.data})}filterArea(t){this.getAreas(t.target.value)}filterLGA(t){this.getLGAs(t.target.value)}getActivities(){console.log("jshdbfkjhsdfkjsdf"),this.dataservice.getActivities(1,this.pageSize).valueChanges.subscribe(t=>{var e,i,a,o,l,n;this.meta=t.data.activities.meta,(null===(i=null===(e=this.meta)||void 0===e?void 0:e.pagination)||void 0===i?void 0:i.pageCount)<=1&&(this.disablePrevButton=!0,this.disableNextButton=!0),(null===(o=null===(a=this.meta)||void 0===a?void 0:a.pagination)||void 0===o?void 0:o.total)<this.pageSize&&(this.to=null===(n=null===(l=this.meta)||void 0===l?void 0:l.pagination)||void 0===n?void 0:n.total),this.rowData=t.data.activities.data}),this.dataservice.getStates().valueChanges.subscribe(t=>{console.log("getStates",t.data.states.data),this.States=t.data.states.data})}loadNext(){var t,e,i,a;this.count++,this.disablePrevButton=!1,this.from=this.from+this.pageSize,this.to=this.to+this.pageSize>(null===(e=null===(t=this.meta)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.total)?null===(a=null===(i=this.meta)||void 0===i?void 0:i.pagination)||void 0===a?void 0:a.total:this.to+this.pageSize,this.count===this.meta.pagination.pageCount&&(this.disableNextButton=!0),this.dataservice.getActivities(this.count,this.pageSize).valueChanges.subscribe(t=>{this.meta=t.data.activities.meta,this.rowData=t.data.activities.data})}loadPrev(){this.count--,this.count<this.meta.pagination.pageCount&&(this.disableNextButton=!1),1===this.count&&(this.disablePrevButton=!0),this.from=this.from-this.pageSize,this.to=this.to-this.rowData.length,this.dataservice.getActivities(this.count,this.pageSize).valueChanges.subscribe(t=>{this.meta=t.data.activities.meta,this.rowData=t.data.activities.data})}getCrops(){this.dataservice.getCrops().valueChanges.subscribe(t=>{this.Crops=t.data.crops.data})}getStates(){this.dataservice.getStates(1,1e4).valueChanges.subscribe(t=>{this.States=t.data.states.data})}getAreas(t){this.dataservice.getAreas(1,1e4,"",t).valueChanges.subscribe(t=>{this.Areas=t.data.areas.data})}onGridReady(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.gridApi.sizeColumnsToFit()}onRowClicked(t){console.log("row",t.data)}onChange(t){this.file=[];for(var e=0;e<t.target.files.length;e++)this.file.push(t.target.files[e]);console.log(this.file)}onSelectionChanged(t){let e=this.gridApi.getSelectedRows();this.router.navigate(["/activities/activity_details",e[0].id],{state:{data:e}})}openModal(){this.activitiesModal.show()}activitiesSubmit(){console.log("Values before submit",this.activitiesForm.value);let t={};this.btnLoading=!0,this.dataservice.createActivity(this.activitiesForm.value).subscribe(e=>{t=e.data,e.data.createActivity?(this.toastr.success("Success!"),this.getActivities(),this.activitiesForm.reset(),this.btnLoading=!1,this.activitiesModal.hide(),this.gridApi.deselectAll()):(this.toastr.error("Failed. Please check the fields!"),this.btnLoading=!1)})}downloadActivities(){console.log(this.downloadExcelForm.value);let t={};this.btnLoading=!0,this.dataservice.downloadActivities(this.downloadExcelForm.value).subscribe(e=>{var i;t=e.body,console.log(e),200===e.status&&"Success"==e.body.status?(this.toastr.success(e.body.message),this.btnLoading=!1,window.open(`${b.a.apiUrl}${null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.path}`,"_blank")):(this.btnLoading=!1,this.toastr.error(e.body.message))})}uploadActivities(){this.dataservice.uploadActivities(this.file).subscribe(t=>{200==t.status?(console.log(t),this.toastr.success("Success!"),this.file=null,this.getActivities(),this.uploadActivitiesModal.hide()):this.toastr.error("Failed!")})}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(s.a),c.Mb(r.c),c.Mb(o.c),c.Mb(u.b))},t.\u0275cmp=c.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(c.Ic(p,1),c.Ic(h,1),c.Ic(S,1)),2&t){let t;c.rc(t=c.ac())&&(e.activitiesModal=t.first),c.rc(t=c.ac())&&(e.downloadActivitiesModal=t.first),c.rc(t=c.ac())&&(e.uploadActivitiesModal=t.first)}},decls:196,vars:26,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-outline-secondary",3,"click"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"row"],[1,"col-12"],["id","myGrid","animateRows","true",1,"ag-theme-alpine",2,"width","100%","height","65vh",3,"columnDefs","rowData","rowSelection","selectionChanged","gridReady"],["agGrid",""],[1,"float-left","mt-3"],["type","button",1,"btn","btn-primary","float-right","m-2",3,"disabled","click"],[1,"float-right","mt-3"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["activitiesModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"col"],[1,"form-group"],["for","ActivityType"],[1,"danger"],["id","ActivityType","required","","ngModel","","name","ActivityType","formControlName","ActivityType",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","FarmDemo"],["value","GroupFarmerTraining"],["value","MegaFarmerTraining"],["value","FarmDay"],["value","RetailersTraining"],["for","state"],["id","state","required","","ngModel","","name","state","formControlName","state",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","lga"],["id","lga","required","","ngModel","","name","lga","formControlName","lga",1,"form-control",3,"change"],["for","area"],["id","area","required","","ngModel","","name","area","formControlName","area",1,"form-control"],["for","NoOfAttendees"],["type","number","id","NoOfAttendees","name","NoOfAttendees","formControlName","NoOfAttendees","placeholder","Enter no. of attendees",1,"form-control"],["class","danger",4,"ngIf"],["for","Reason"],["id","Reason","rows","5","name","Reason","formControlName","Reason","placeholder","Enter body",1,"form-control"],["for","FarmerName"],["type","text","id","FarmerName","name","FarmerName","formControlName","FarmerName","placeholder","Enter name",1,"form-control"],["for","crop"],["id","crop","ngModel","","name","crop","formControlName","crop",1,"form-control"],["for","ConditionOfCrop"],["id","ConditionOfCrop","name","ConditionOfCrop","formControlName","ConditionOfCrop",1,"form-control"],["value","Good"],["value","VeryGood"],["value","Excellent"],["for","PlannedFarmDay"],["type","date","id","PlannedFarmDay","name","PlannedFarmDay","formControlName","PlannedFarmDay","placeholder","Enter Date",1,"form-control"],["for","Date"],["type","date","id","Date","name","Date","formControlName","Date","placeholder","Enter Date",1,"form-control"],["for","Time"],["type","time","id","Time","name","Time","formControlName","Time","placeholder","Enter Time",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["downloadActivitiesModal","bs-modal"],["for","fromDate"],["type","date","id","fromDate","required","","ngModel","","name","fromDate","formControlName","fromDate",1,"form-control"],["for","toDate"],["type","date","id","toDate","required","","ngModel","","name","toDate","formControlName","toDate",1,"form-control"],["uploadActivitiesModal","bs-modal"],["for","Image"],["type","file","id","File","accept",".xlsx","name","File","formControlName","File","placeholder","Choose file",1,"form-control",3,"change"],[1,"row","template-download"],["href","/assets/activities_template.xlsx","download","activities_template.xlsx","target","_blank"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"h2"),c.Dc(4,"Activities"),c.Rb(),c.Sb(5,"div"),c.Sb(6,"button",3),c.Zb("click",function(){return c.vc(t),c.sc(140).show()}),c.Dc(7," Download sheets "),c.Rb(),c.Sb(8,"button",3),c.Zb("click",function(){return c.vc(t),c.sc(171).show()}),c.Dc(9," Upload sheet "),c.Rb(),c.Sb(10,"button",4),c.Zb("click",function(){return e.openModal()}),c.Dc(11," Add New Activity "),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",5),c.Sb(13,"div",6),c.Sb(14,"div",7),c.Sb(15,"ag-grid-angular",8,9),c.Zb("selectionChanged",function(t){return e.onSelectionChanged(t)})("gridReady",function(t){return e.onGridReady(t)}),c.Rb(),c.Sb(17,"span",10),c.Dc(18),c.Rb(),c.Sb(19,"button",11),c.Zb("click",function(){return e.loadNext()}),c.Dc(20," Next "),c.Rb(),c.Sb(21,"span",12),c.Dc(22),c.Rb(),c.Sb(23,"button",11),c.Zb("click",function(){return e.loadPrev()}),c.Dc(24," Prev "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(25,"div",13,14),c.Sb(27,"div",15),c.Sb(28,"div",16),c.Sb(29,"div",17),c.Sb(30,"h4",18),c.Dc(31,"Add Activity"),c.Rb(),c.Sb(32,"button",19),c.Zb("click",function(){return c.vc(t),c.sc(26).hide()}),c.Sb(33,"span",20),c.Dc(34,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(35,"div",21),c.Sb(36,"form",22),c.Zb("ngSubmit",function(){return e.activitiesSubmit()}),c.Sb(37,"div",6),c.Sb(38,"div",23),c.Sb(39,"div",24),c.Sb(40,"label",25),c.Dc(41,"Activity Type "),c.Sb(42,"span",26),c.Dc(43,"*"),c.Rb(),c.Rb(),c.Sb(44,"select",27),c.Sb(45,"option",28),c.Dc(46,"Choose..."),c.Rb(),c.Sb(47,"option",29),c.Dc(48,"Farm Demo"),c.Rb(),c.Sb(49,"option",30),c.Dc(50," Group Farmer Training "),c.Rb(),c.Sb(51,"option",31),c.Dc(52," Mega Farmer Training "),c.Rb(),c.Sb(53,"option",32),c.Dc(54,"Farm Day"),c.Rb(),c.Sb(55,"option",33),c.Dc(56,"Retailers Training"),c.Rb(),c.Rb(),c.Rb(),c.Sb(57,"div",24),c.Sb(58,"label",34),c.Dc(59,"State "),c.Sb(60,"span",26),c.Dc(61,"*"),c.Rb(),c.Rb(),c.Sb(62,"select",35),c.Zb("change",function(t){return e.filterLGA(t)}),c.Sb(63,"option",28),c.Dc(64," Choose... "),c.Rb(),c.Bc(65,g,2,2,"option",36),c.Rb(),c.Rb(),c.Sb(66,"div",24),c.Sb(67,"label",37),c.Dc(68,"LGA "),c.Sb(69,"span",26),c.Dc(70,"*"),c.Rb(),c.Rb(),c.Sb(71,"select",38),c.Zb("change",function(t){return e.filterArea(t)}),c.Sb(72,"option",28),c.Dc(73," Choose... "),c.Rb(),c.Bc(74,f,2,2,"option",36),c.Rb(),c.Rb(),c.Sb(75,"div",24),c.Sb(76,"label",39),c.Dc(77,"City "),c.Sb(78,"span",26),c.Dc(79,"*"),c.Rb(),c.Rb(),c.Sb(80,"select",40),c.Sb(81,"option",28),c.Dc(82,"Choose..."),c.Rb(),c.Bc(83,R,2,2,"option",36),c.Rb(),c.Rb(),c.Sb(84,"div",24),c.Sb(85,"label",41),c.Dc(86,"Number of attendees"),c.Rb(),c.Nb(87,"input",42),c.Bc(88,D,2,0,"div",43),c.Rb(),c.Sb(89,"div",24),c.Sb(90,"label",44),c.Dc(91,"Body"),c.Rb(),c.Nb(92,"textarea",45),c.Rb(),c.Rb(),c.Sb(93,"div",23),c.Sb(94,"div",24),c.Sb(95,"label",46),c.Dc(96,"Farmer name"),c.Rb(),c.Nb(97,"input",47),c.Bc(98,A,2,0,"div",43),c.Rb(),c.Sb(99,"div",24),c.Sb(100,"label",48),c.Dc(101,"Crop "),c.Sb(102,"span",26),c.Dc(103,"*"),c.Rb(),c.Rb(),c.Sb(104,"select",49),c.Sb(105,"option",28),c.Dc(106,"Choose..."),c.Rb(),c.Bc(107,y,2,2,"option",36),c.Rb(),c.Rb(),c.Sb(108,"div",24),c.Sb(109,"label",50),c.Dc(110,"Condition of crop"),c.Rb(),c.Sb(111,"select",51),c.Sb(112,"option",28),c.Dc(113,"Choose..."),c.Rb(),c.Sb(114,"option",52),c.Dc(115,"Good"),c.Rb(),c.Sb(116,"option",53),c.Dc(117,"Very Good"),c.Rb(),c.Sb(118,"option",54),c.Dc(119,"Excellent"),c.Rb(),c.Rb(),c.Rb(),c.Sb(120,"div",24),c.Sb(121,"label",55),c.Dc(122,"Planned farm day"),c.Rb(),c.Nb(123,"input",56),c.Rb(),c.Sb(124,"div",24),c.Sb(125,"label",57),c.Dc(126,"Date "),c.Sb(127,"span",26),c.Dc(128,"*"),c.Rb(),c.Rb(),c.Nb(129,"input",58),c.Rb(),c.Sb(130,"div",24),c.Sb(131,"label",59),c.Dc(132,"Time"),c.Rb(),c.Nb(133,"input",60),c.Rb(),c.Rb(),c.Rb(),c.Sb(134,"button",61),c.Zb("click",function(){return c.vc(t),c.sc(26).hide()}),c.Dc(135," Close "),c.Rb(),c.Sb(136,"button",62),c.Bc(137,C,1,0,"span",63),c.Dc(138," Save changes "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(139,"div",13,64),c.Sb(141,"div",15),c.Sb(142,"div",16),c.Sb(143,"div",17),c.Sb(144,"h4",18),c.Dc(145,"Download Activity"),c.Rb(),c.Sb(146,"button",19),c.Zb("click",function(){return c.vc(t),c.sc(140).hide()}),c.Sb(147,"span",20),c.Dc(148,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(149,"div",21),c.Sb(150,"form",22),c.Zb("ngSubmit",function(){return e.downloadActivities()}),c.Sb(151,"div",6),c.Sb(152,"div",23),c.Sb(153,"div",24),c.Sb(154,"label",65),c.Dc(155,"From"),c.Sb(156,"span",26),c.Dc(157,"*"),c.Rb(),c.Rb(),c.Nb(158,"input",66),c.Rb(),c.Sb(159,"div",24),c.Sb(160,"label",67),c.Dc(161,"From"),c.Sb(162,"span",26),c.Dc(163,"*"),c.Rb(),c.Rb(),c.Nb(164,"input",68),c.Rb(),c.Rb(),c.Rb(),c.Sb(165,"button",61),c.Zb("click",function(){return c.vc(t),c.sc(140).hide()}),c.Dc(166," Close "),c.Rb(),c.Sb(167,"button",62),c.Bc(168,F,1,0,"span",63),c.Dc(169," Download "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(170,"div",13,69),c.Sb(172,"div",15),c.Sb(173,"div",16),c.Sb(174,"div",17),c.Sb(175,"h4",18),c.Dc(176,"Upload Activities"),c.Rb(),c.Sb(177,"button",19),c.Zb("click",function(){return c.vc(t),c.sc(171).hide()}),c.Sb(178,"span",20),c.Dc(179,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(180,"div",21),c.Sb(181,"form",22),c.Zb("ngSubmit",function(){return e.uploadActivities()}),c.Sb(182,"div",6),c.Sb(183,"div",23),c.Sb(184,"div",24),c.Sb(185,"label",70),c.Dc(186,"Excel file"),c.Rb(),c.Sb(187,"input",71),c.Zb("change",function(t){return e.onChange(t)}),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(188,"div",72),c.Sb(189,"a",73),c.Dc(190,"Download Template"),c.Rb(),c.Rb(),c.Sb(191,"button",61),c.Zb("click",function(){return c.vc(t),c.sc(171).hide()}),c.Dc(192," Close "),c.Rb(),c.Sb(193,"button",62),c.Bc(194,N,1,0,"span",63),c.Dc(195," Upload "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&t&&(c.Ab(10),c.jc("disabled",!e.disableButton),c.Ab(5),c.jc("columnDefs",e.columnDefs)("rowData",e.rowData)("rowSelection",e.rowSelection),c.Ab(3),c.Hc("",e.from," to ",e.to," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.total,""),c.Ab(1),c.jc("disabled",e.disableNextButton),c.Ab(3),c.Gc("Page ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.page," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.pageCount,""),c.Ab(1),c.jc("disabled",e.disablePrevButton),c.Ab(13),c.jc("formGroup",e.activitiesForm),c.Ab(29),c.jc("ngForOf",e.States),c.Ab(9),c.jc("ngForOf",e.LGA),c.Ab(9),c.jc("ngForOf",e.Areas),c.Ab(5),c.jc("ngIf",e.activitiesForm.value.NoOfAttendees>999999),c.Ab(10),c.jc("ngIf",e.checkSpecialCharacters(e.activitiesForm.value.FarmerName)),c.Ab(9),c.jc("ngForOf",e.Crops),c.Ab(29),c.jc("disabled",e.btnLoading||!e.activitiesForm.valid),c.Ab(1),c.jc("ngIf",e.btnLoading),c.Ab(13),c.jc("formGroup",e.downloadExcelForm),c.Ab(17),c.jc("disabled",e.btnLoading||!e.downloadExcelForm.valid),c.Ab(1),c.jc("ngIf",e.btnLoading),c.Ab(13),c.jc("formGroup",e.uploadExcelForm),c.Ab(12),c.jc("disabled",e.btnLoading||!e.uploadExcelForm.valid),c.Ab(1),c.jc("ngIf",e.btnLoading))},directives:[v.a,m.a,o.t,o.j,o.e,o.q,o.p,o.i,o.d,o.m,o.u,a.j,o.n,o.b,a.k],encapsulation:2}),t})(),data:{title:"Activities"}},{path:"activity_details/:id",component:(()=>{class t{constructor(t,e,i,a,l){this.dataservice=t,this.activatedRouter=e,this.router=i,this.fb=a,this.toastr=l,this.loading=!0,this.details=[],this.btnLoading=!1,this.dateConverterMin=d.s,this.dateConverter=d.r,this.Areas=[],this.States=[],this.LGA=[],this.Crops=[],this.activitiesForm=this.fb.group({ActivityType:["",o.s.required],Latitude:[""],Longitude:[""],NoOfAttendees:[""],state:["",o.s.required],lga:["",o.s.required],area:["",o.s.required],crop:["",o.s.required],FarmerName:[""],PlannedFarmDay:[""],ConditionOfCrop:[""],Date:["",o.s.required],Time:[""],Reason:[""]})}ngOnInit(){this.activatedRouter.params.subscribe(t=>{this.id=t.id}),this.getActivity(),this.getStates(),this.getLGAs(),this.getAreas(),this.getCrops()}getActivity(){this.dataservice.getActivity(this.id).valueChanges.subscribe(t=>{var e,i,a,l,n,r,s,d,b,c,u,v,m,p,h,S,g,f,R,D,A,y,C,F,N,w,M,L,T,k,G,O,j,x,E,q,Z,B,P,I,$,z,_,J,V,U,K,Y,H,Q,W,X,tt,et,it;console.log("getActivity",null===(i=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.activity)||void 0===i?void 0:i.data),this.details=null===(l=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.activity)||void 0===l?void 0:l.data,this.activitiesForm=this.fb.group({ActivityType:[null===(r=null===(n=this.details)||void 0===n?void 0:n.attributes)||void 0===r?void 0:r.ActivityType,o.s.required],Latitude:[null===(d=null===(s=this.details)||void 0===s?void 0:s.attributes)||void 0===d?void 0:d.Latitude],Longitude:[null===(c=null===(b=this.details)||void 0===b?void 0:b.attributes)||void 0===c?void 0:c.Longitude],NoOfAttendees:[null===(v=null===(u=this.details)||void 0===u?void 0:u.attributes)||void 0===v?void 0:v.NoOfAttendees],state:[null===(y=null===(A=null===(D=null===(R=null===(f=null===(g=null===(S=null===(h=null===(p=null===(m=this.details)||void 0===m?void 0:m.attributes)||void 0===p?void 0:p.area)||void 0===h?void 0:h.data)||void 0===S?void 0:S.attributes)||void 0===g?void 0:g.lga)||void 0===f?void 0:f.data)||void 0===R?void 0:R.attributes)||void 0===D?void 0:D.state)||void 0===A?void 0:A.data)||void 0===y?void 0:y.id,o.s.required],lga:[null===(T=null===(L=null===(M=null===(w=null===(N=null===(F=null===(C=this.details)||void 0===C?void 0:C.attributes)||void 0===F?void 0:F.area)||void 0===N?void 0:N.data)||void 0===w?void 0:w.attributes)||void 0===M?void 0:M.lga)||void 0===L?void 0:L.data)||void 0===T?void 0:T.id,o.s.required],area:[null===(j=null===(O=null===(G=null===(k=this.details)||void 0===k?void 0:k.attributes)||void 0===G?void 0:G.area)||void 0===O?void 0:O.data)||void 0===j?void 0:j.id,o.s.required],crop:[null===(Z=null===(q=null===(E=null===(x=this.details)||void 0===x?void 0:x.attributes)||void 0===E?void 0:E.crop)||void 0===q?void 0:q.data)||void 0===Z?void 0:Z.id],FarmerName:[null===(P=null===(B=this.details)||void 0===B?void 0:B.attributes)||void 0===P?void 0:P.FarmerName],PlannedFarmDay:[null===($=null===(I=this.details)||void 0===I?void 0:I.attributes)||void 0===$?void 0:$.PlannedFarmDay],ConditionOfCrop:[null===(_=null===(z=this.details)||void 0===z?void 0:z.attributes)||void 0===_?void 0:_.ConditionOfCrop],Date:[null===(V=null===(J=this.details)||void 0===J?void 0:J.attributes)||void 0===V?void 0:V.Date,o.s.required],Time:[null===(K=null===(U=this.details)||void 0===U?void 0:U.attributes)||void 0===K?void 0:K.Time],Reason:[null===(H=null===(Y=this.details)||void 0===Y?void 0:Y.attributes)||void 0===H?void 0:H.Reason]}),this.maplink="https://maps.google.com/?q="+(null===(X=null===(W=null===(Q=this.details)||void 0===Q?void 0:Q.attributes)||void 0===W?void 0:W.Latitude)||void 0===X?void 0:X.toString())+","+(null===(it=null===(et=null===(tt=this.details)||void 0===tt?void 0:tt.attributes)||void 0===et?void 0:et.Longitude)||void 0===it?void 0:it.toString()),this.loading=!1})}getCrops(){this.dataservice.getCrops(1,1e3).valueChanges.subscribe(t=>{console.log("getCrops",t.data.crops.data),this.Crops=t.data.crops.data})}getAreas(t){this.dataservice.getAreas(1,1e4,"",t).valueChanges.subscribe(t=>{console.log("getAreas",t.data.areas.data),this.Areas=t.data.areas.data})}getStates(){this.dataservice.getStates(1,1e4).valueChanges.subscribe(t=>{this.States=t.data.states.data})}getLGAs(t){this.dataservice.getLGAs(1,1e4,"",t).valueChanges.subscribe(t=>{console.log("getLGAs",t.data.lgas.data),this.LGA=t.data.lgas.data})}filterArea(t){this.getAreas(t.target.value)}filterLGA(t){this.getLGAs(t.target.value)}returnActivityType(t){if(t)return t.replace(/([A-Z])/g," $1").trim()}dateConvertor(t){return new Date(t)}openModal(t,e){this.resultModal.show(),console.log(t,e),this.flag=e}FormSubmit(){let t={};console.log(this.activitiesForm.value),this.btnLoading=!0,this.dataservice.updateActivity(this.activitiesForm.value,this.id).subscribe(e=>{t=e.data,console.log("response",e),e.data.updateActivity?(this.toastr.success("Activity updated successfully!"),this.btnLoading=!1,this.editModal.hide(),this.getActivity()):(this.toastr.error("Failed. Please check the fields!"),this.btnLoading=!1)})}deleteActivity(){this.dataservice.deleteActivity(this.id).subscribe(t=>{console.log("response",t),t.data.deleteActivity?(this.toastr.success("Success!"),this.deleteModal.hide(),this.router.navigate(["/activities/all"])):this.toastr.error("Failed!")})}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(s.a),c.Mb(r.a),c.Mb(r.c),c.Mb(o.c),c.Mb(u.b))},t.\u0275cmp=c.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(c.Ic(w,1),c.Ic(M,1),c.Ic(L,1)),2&t){let t;c.rc(t=c.ac())&&(e.editModal=t.first),c.rc(t=c.ac())&&(e.resultModal=t.first),c.rc(t=c.ac())&&(e.deleteModal=t.first)}},decls:206,vars:22,consts:[[1,"animated","fadeIn"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","editModalLabel","aria-hidden","true",1,"modal","fade"],["deleteModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-content"],[1,"modal-body","text-center"],[1,"modal-footer","justify-content-around"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"click"],["type","button","data-toggle","modal",1,"btn","btn-danger",3,"click"],[1,"card-body"],[1,"row"],[1,"col"],[1,"table","table-striped"],["editModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","ActivityType"],[1,"danger"],["id","ActivityType","required","","ngModel","","name","ActivityType","formControlName","ActivityType",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","FarmDemo"],["value","GroupFarmerTraining"],["value","MegaFarmerTraining"],["value","FarmDay"],["value","RetailersTraining"],["for","state"],["id","state","required","","ngModel","","name","state","formControlName","state",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","lga"],["id","lga","required","","ngModel","","name","lga","formControlName","lga",1,"form-control",3,"change"],["for","area"],["id","area","required","","ngModel","","name","area","formControlName","area",1,"form-control"],["for","NoOfAttendees"],["type","text","id","NoOfAttendees","name","NoOfAttendees","formControlName","NoOfAttendees","placeholder","Enter No. of attendees",1,"form-control"],["for","Reason"],["id","Reason","rows","5","name","Reason","formControlName","Reason","placeholder","Enter body",1,"form-control"],["for","FarmerName"],["type","text","id","FarmerName","name","FarmerName","formControlName","FarmerName","placeholder","Enter name",1,"form-control"],["for","crop"],["id","crop","ngModel","","name","crop","formControlName","crop",1,"form-control"],["for","ConditionOfCrop"],["type","text","id","ConditionOfCrop","name","ConditionOfCrop","formControlName","ConditionOfCrop","placeholder","Enter condition",1,"form-control"],["for","PlannedFarmDay"],["type","date","id","PlannedFarmDay","name","PlannedFarmDay","formControlName","PlannedFarmDay","placeholder","Enter Date",1,"form-control"],["for","Date"],["type","date","id","Date","name","Date","formControlName","Date","placeholder","Enter Date",1,"form-control"],["for","Time"],["type","time","id","Time","name","Time","formControlName","Time","placeholder","Enter Time",1,"form-control"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",0),c.Sb(1,"div",1,2),c.Sb(3,"div",3),c.Sb(4,"div",4),c.Sb(5,"div",5),c.Dc(6," Do you want to delete this activity? "),c.Rb(),c.Sb(7,"div",6),c.Sb(8,"button",7),c.Zb("click",function(){return c.vc(t),c.sc(2).hide()}),c.Dc(9," No! Cancel. "),c.Rb(),c.Sb(10,"button",8),c.Zb("click",function(){return e.deleteActivity()}),c.Dc(11," Yes! Delete. "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",9),c.Sb(13,"div",10),c.Sb(14,"h2"),c.Dc(15,"Activity Details"),c.Rb(),c.Sb(16,"span"),c.Sb(17,"button",11),c.Zb("click",function(){return c.vc(t),c.sc(103).show()}),c.Dc(18," Edit "),c.Rb(),c.Sb(19,"button",12),c.Zb("click",function(){return c.vc(t),c.sc(2).show()}),c.Dc(20," Delete "),c.Rb(),c.Rb(),c.Rb(),c.Sb(21,"div",13),c.Sb(22,"div",14),c.Sb(23,"div",15),c.Sb(24,"div",14),c.Sb(25,"table",16),c.Sb(26,"tbody"),c.Sb(27,"tr"),c.Sb(28,"td"),c.Dc(29,"ID"),c.Rb(),c.Sb(30,"td"),c.Dc(31),c.Rb(),c.Rb(),c.Sb(32,"tr"),c.Sb(33,"td"),c.Dc(34,"Activity type"),c.Rb(),c.Sb(35,"td"),c.Dc(36),c.Rb(),c.Rb(),c.Sb(37,"tr"),c.Sb(38,"td"),c.Dc(39,"Date"),c.Rb(),c.Sb(40,"td"),c.Dc(41),c.Rb(),c.Rb(),c.Sb(42,"tr"),c.Sb(43,"td"),c.Dc(44,"Time"),c.Rb(),c.Sb(45,"td"),c.Dc(46),c.Rb(),c.Rb(),c.Sb(47,"tr"),c.Sb(48,"td"),c.Dc(49,"City"),c.Rb(),c.Sb(50,"td"),c.Dc(51),c.Rb(),c.Rb(),c.Sb(52,"tr"),c.Sb(53,"td"),c.Dc(54,"LGA"),c.Rb(),c.Sb(55,"td"),c.Dc(56),c.Rb(),c.Rb(),c.Sb(57,"tr"),c.Sb(58,"td"),c.Dc(59,"State"),c.Rb(),c.Sb(60,"td"),c.Dc(61),c.Rb(),c.Rb(),c.Sb(62,"tr"),c.Sb(63,"td"),c.Dc(64,"No. of Attendees"),c.Rb(),c.Sb(65,"td"),c.Dc(66),c.Rb(),c.Rb(),c.Sb(67,"tr"),c.Sb(68,"td"),c.Dc(69,"Farmer Name"),c.Rb(),c.Sb(70,"td"),c.Dc(71),c.Rb(),c.Rb(),c.Sb(72,"tr"),c.Sb(73,"td"),c.Dc(74,"Crop"),c.Rb(),c.Sb(75,"td"),c.Dc(76),c.Rb(),c.Rb(),c.Sb(77,"tr"),c.Sb(78,"td"),c.Dc(79,"Condition of crop"),c.Rb(),c.Sb(80,"td"),c.Dc(81),c.Rb(),c.Rb(),c.Sb(82,"tr"),c.Sb(83,"td"),c.Dc(84,"Planned farm day"),c.Rb(),c.Sb(85,"td"),c.Dc(86),c.Rb(),c.Rb(),c.Sb(87,"tr"),c.Sb(88,"td"),c.Dc(89,"Body"),c.Rb(),c.Sb(90,"td"),c.Dc(91),c.Rb(),c.Rb(),c.Sb(92,"tr"),c.Sb(93,"td"),c.Dc(94,"Created at"),c.Rb(),c.Sb(95,"td"),c.Dc(96),c.Rb(),c.Rb(),c.Sb(97,"tr"),c.Sb(98,"td"),c.Dc(99,"Last updated"),c.Rb(),c.Sb(100,"td"),c.Dc(101),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(102,"div",1,17),c.Sb(104,"div",18),c.Sb(105,"div",4),c.Sb(106,"div",19),c.Sb(107,"h4",20),c.Dc(108,"Edit details"),c.Rb(),c.Sb(109,"button",21),c.Zb("click",function(){return c.vc(t),c.sc(103).hide()}),c.Sb(110,"span",22),c.Dc(111,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(112,"div",23),c.Sb(113,"form",24),c.Zb("ngSubmit",function(){return e.FormSubmit()}),c.Sb(114,"div",14),c.Sb(115,"div",15),c.Sb(116,"div",25),c.Sb(117,"label",26),c.Dc(118,"Activity Type "),c.Sb(119,"span",27),c.Dc(120,"*"),c.Rb(),c.Rb(),c.Sb(121,"select",28),c.Sb(122,"option",29),c.Dc(123,"Choose..."),c.Rb(),c.Sb(124,"option",30),c.Dc(125,"Farm Demo"),c.Rb(),c.Sb(126,"option",31),c.Dc(127," Group Farmer Training "),c.Rb(),c.Sb(128,"option",32),c.Dc(129," Mega Farmer Training "),c.Rb(),c.Sb(130,"option",33),c.Dc(131,"Farm Day"),c.Rb(),c.Sb(132,"option",34),c.Dc(133,"Retailers Training"),c.Rb(),c.Rb(),c.Rb(),c.Sb(134,"div",25),c.Sb(135,"label",35),c.Dc(136,"State "),c.Sb(137,"span",27),c.Dc(138,"*"),c.Rb(),c.Rb(),c.Sb(139,"select",36),c.Zb("change",function(t){return e.filterLGA(t)}),c.Sb(140,"option",29),c.Dc(141," Choose... "),c.Rb(),c.Bc(142,T,2,2,"option",37),c.Rb(),c.Rb(),c.Sb(143,"div",25),c.Sb(144,"label",38),c.Dc(145,"LGA "),c.Sb(146,"span",27),c.Dc(147,"*"),c.Rb(),c.Rb(),c.Sb(148,"select",39),c.Zb("change",function(t){return e.filterArea(t)}),c.Sb(149,"option",29),c.Dc(150," Choose... "),c.Rb(),c.Bc(151,k,2,2,"option",37),c.Rb(),c.Rb(),c.Sb(152,"div",25),c.Sb(153,"label",40),c.Dc(154,"City "),c.Sb(155,"span",27),c.Dc(156,"*"),c.Rb(),c.Rb(),c.Sb(157,"select",41),c.Sb(158,"option",29),c.Dc(159,"Choose..."),c.Rb(),c.Bc(160,G,2,2,"option",37),c.Rb(),c.Rb(),c.Sb(161,"div",25),c.Sb(162,"label",42),c.Dc(163,"Number of attendees"),c.Rb(),c.Nb(164,"input",43),c.Rb(),c.Sb(165,"div",25),c.Sb(166,"label",44),c.Dc(167,"Body "),c.Rb(),c.Nb(168,"textarea",45),c.Rb(),c.Rb(),c.Sb(169,"div",15),c.Sb(170,"div",25),c.Sb(171,"label",46),c.Dc(172,"Farmer name"),c.Rb(),c.Nb(173,"input",47),c.Rb(),c.Sb(174,"div",25),c.Sb(175,"label",48),c.Dc(176,"Crop "),c.Sb(177,"span",27),c.Dc(178,"*"),c.Rb(),c.Rb(),c.Sb(179,"select",49),c.Sb(180,"option",29),c.Dc(181,"Choose..."),c.Rb(),c.Bc(182,O,2,2,"option",37),c.Rb(),c.Rb(),c.Sb(183,"div",25),c.Sb(184,"label",50),c.Dc(185,"Condition of crop"),c.Rb(),c.Nb(186,"input",51),c.Rb(),c.Sb(187,"div",25),c.Sb(188,"label",52),c.Dc(189,"Planned farm day"),c.Rb(),c.Nb(190,"input",53),c.Rb(),c.Sb(191,"div",25),c.Sb(192,"label",54),c.Dc(193,"Date "),c.Sb(194,"span",27),c.Dc(195,"*"),c.Rb(),c.Rb(),c.Nb(196,"input",55),c.Rb(),c.Sb(197,"div",25),c.Sb(198,"label",56),c.Dc(199,"Time"),c.Rb(),c.Nb(200,"input",57),c.Rb(),c.Rb(),c.Rb(),c.Sb(201,"button",7),c.Zb("click",function(){return c.vc(t),c.sc(103).hide()}),c.Dc(202," Close "),c.Rb(),c.Sb(203,"button",58),c.Bc(204,j,1,0,"span",59),c.Dc(205," Save changes "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&t&&(c.Ab(31),c.Ec(null==e.details?null:e.details.id),c.Ab(5),c.Fc(" ",e.returnActivityType(null==e.details||null==e.details.attributes?null:e.details.attributes.ActivityType)," "),c.Ab(5),c.Fc(" ",e.dateConverterMin(null==e.details||null==e.details.attributes?null:e.details.attributes.Date)," "),c.Ab(5),c.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.Time),c.Ab(5),c.Ec(null==e.details||null==e.details.attributes||null==e.details.attributes.area||null==e.details.attributes.area.data||null==e.details.attributes.area.data.attributes?null:e.details.attributes.area.data.attributes.Name),c.Ab(5),c.Ec(null==e.details||null==e.details.attributes||null==e.details.attributes.area||null==e.details.attributes.area.data||null==e.details.attributes.area.data.attributes||null==e.details.attributes.area.data.attributes.lga||null==e.details.attributes.area.data.attributes.lga.data||null==e.details.attributes.area.data.attributes.lga.data.attributes?null:e.details.attributes.area.data.attributes.lga.data.attributes.Name),c.Ab(5),c.Ec(null==e.details||null==e.details.attributes||null==e.details.attributes.area||null==e.details.attributes.area.data||null==e.details.attributes.area.data.attributes||null==e.details.attributes.area.data.attributes.lga||null==e.details.attributes.area.data.attributes.lga.data||null==e.details.attributes.area.data.attributes.lga.data.attributes||null==e.details.attributes.area.data.attributes.lga.data.attributes.state||null==e.details.attributes.area.data.attributes.lga.data.attributes.state.data||null==e.details.attributes.area.data.attributes.lga.data.attributes.state.data.attributes?null:e.details.attributes.area.data.attributes.lga.data.attributes.state.data.attributes.Name),c.Ab(5),c.Fc(" ",null==e.details||null==e.details.attributes?null:e.details.attributes.NoOfAttendees," "),c.Ab(5),c.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.FarmerName),c.Ab(5),c.Fc(" ",null==e.details||null==e.details.attributes||null==e.details.attributes.crop||null==e.details.attributes.crop.data||null==e.details.attributes.crop.data.attributes?null:e.details.attributes.crop.data.attributes.Name," "),c.Ab(5),c.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.ConditionOfCrop),c.Ab(5),c.Fc(" ",e.dateConverterMin(null==e.details||null==e.details.attributes?null:e.details.attributes.PlannedFarmDay)," "),c.Ab(5),c.Fc(" ",null==e.details||null==e.details.attributes?null:e.details.attributes.Reason," "),c.Ab(5),c.Ec(e.dateConvertor(null==e.details||null==e.details.attributes?null:e.details.attributes.createdAt)),c.Ab(5),c.Ec(e.dateConvertor(null==e.details||null==e.details.attributes?null:e.details.attributes.updatedAt)),c.Ab(12),c.jc("formGroup",e.activitiesForm),c.Ab(29),c.jc("ngForOf",e.States),c.Ab(9),c.jc("ngForOf",e.LGA),c.Ab(9),c.jc("ngForOf",e.Areas),c.Ab(22),c.jc("ngForOf",e.Crops),c.Ab(21),c.jc("disabled",e.btnLoading||!e.activitiesForm.valid),c.Ab(1),c.jc("ngIf",e.btnLoading))},directives:[m.a,o.t,o.j,o.e,o.q,o.p,o.i,o.d,o.m,o.u,a.j,o.b,a.k],encapsulation:2}),t})(),data:{title:"Activity Details"}}]}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({imports:[[r.g.forChild(x)],r.g]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({imports:[[a.c,n.a,o.o,v.b.withComponents([]),E,l.c.forRoot(),m.b.forRoot(),o.f]]}),t})()}}]);