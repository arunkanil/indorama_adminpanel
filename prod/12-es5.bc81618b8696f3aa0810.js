!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ve2J:function(e,a,n){"use strict";n.r(a),n.d(a,"ActivitiesModule",function(){return B});var r=n("SVse"),l=n("s7LF"),d=n("FE24"),b=n("2ZVE"),s=n("iInd"),c=n("R7Hv"),u=n("7nfi"),v=n("AytR"),m=n("8Y7J"),p=n("EApP"),f=n("YFAK"),S=n("LqlI"),R=["activitiesModal"],h=["downloadActivitiesModal"],g=["uploadActivitiesModal"];function y(t,e){if(1&t&&(m.Sb(0,"option",72),m.Dc(1),m.Rb()),2&t){var i=e.$implicit;m.kc("value",i.id),m.Ab(1),m.Fc(" ",i.attributes.Name," ")}}function D(t,e){1&t&&(m.Sb(0,"div",26),m.Dc(1," Maximum 9999999 "),m.Rb())}function A(t,e){1&t&&(m.Sb(0,"div",26),m.Dc(1," Special characters not permitted "),m.Rb())}function C(t,e){if(1&t&&(m.Sb(0,"option",72),m.Dc(1),m.Rb()),2&t){var i=e.$implicit;m.kc("value",i.id),m.Ab(1),m.Fc(" ",i.attributes.Name," ")}}function F(t,e){1&t&&m.Nb(0,"span",73)}function N(t,e){1&t&&m.Nb(0,"span",73)}function k(t,e){1&t&&m.Nb(0,"span",73)}var w=["editModal"],L=["resultModal"],M=["deleteModal"];function T(t,e){if(1&t&&(m.Sb(0,"option",61),m.Dc(1),m.Rb()),2&t){var i=e.$implicit;m.kc("value",i.id),m.Ab(1),m.Fc(" ",i.attributes.Name," ")}}function E(t,e){if(1&t&&(m.Sb(0,"option",61),m.Dc(1),m.Rb()),2&t){var i=e.$implicit;m.kc("value",i.id),m.Ab(1),m.Fc(" ",i.attributes.Name," ")}}function j(t,e){1&t&&m.Nb(0,"span",62)}var O,q,x,P,I=[{path:"",children:[{path:"",redirectTo:"cropprices"},{path:"all",component:(q=function(){function e(a,o,n,r){i(this,e),this.dataservice=a,this.router=o,this.fb=n,this.toastr=r,this.loading=!0,this.btnLoading=!1,this.disableButton=!0,this.disableNextButton=!1,this.disablePrevButton=!0,this.count=1,this.columnDefs=[],this.States=[],this.Areas=[],this.Crops=[],this.file=null,this.activitiesForm=this.fb.group({ActivityType:["",l.s.required],Latitude:["",l.s.required],Longitude:["",l.s.required],NoOfAttendees:["",[l.s.max(9999999),l.s.min(1),l.s.required]],area:["",l.s.required],crop:[""],FarmerName:["",l.s.pattern("[a-zA-Z ]*")],PlannedFarmDay:[""],ConditionOfCrop:[""],Date:["",l.s.required],Time:["",l.s.required],Reason:["",l.s.required]}),this.downloadExcelForm=this.fb.group({fromDate:["",l.s.required],toDate:["",l.s.required]}),this.uploadExcelForm=this.fb.group({File:["",l.s.required]}),this.rowData=[],this.pageSize=20,this.from=1,this.to=20,this.columnDefs=t(u.a),this.rowSelection="single"}return o(e,[{key:"ngOnInit",value:function(){this.loading=!0,this.getActivities(),this.getCrops(),this.getAreas(),this.getStates()}},{key:"checkSpecialCharacters",value:function(t){return!!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(t)}},{key:"getActivities",value:function(){var t=this;console.log("jshdbfkjhsdfkjsdf"),this.dataservice.getActivities(1,this.pageSize).valueChanges.subscribe(function(e){var i,a,o,n,r,l;t.meta=e.data.activities.meta,(null===(a=null===(i=t.meta)||void 0===i?void 0:i.pagination)||void 0===a?void 0:a.pageCount)<=1&&(t.disablePrevButton=!0,t.disableNextButton=!0),(null===(n=null===(o=t.meta)||void 0===o?void 0:o.pagination)||void 0===n?void 0:n.total)<t.pageSize&&(t.to=null===(l=null===(r=t.meta)||void 0===r?void 0:r.pagination)||void 0===l?void 0:l.total),t.rowData=e.data.activities.data})}},{key:"loadNext",value:function(){var t,e,i,a,o=this;this.count++,this.disablePrevButton=!1,this.from=this.from+this.pageSize,this.to=this.to+this.pageSize>(null===(e=null===(t=this.meta)||void 0===t?void 0:t.pagination)||void 0===e?void 0:e.total)?null===(a=null===(i=this.meta)||void 0===i?void 0:i.pagination)||void 0===a?void 0:a.total:this.to+this.pageSize,this.count===this.meta.pagination.pageCount&&(this.disableNextButton=!0),this.dataservice.getActivities(this.count,this.pageSize).valueChanges.subscribe(function(t){o.meta=t.data.activities.meta,o.rowData=t.data.activities.data})}},{key:"loadPrev",value:function(){var t=this;this.count--,this.count<this.meta.pagination.pageCount&&(this.disableNextButton=!1),1===this.count&&(this.disablePrevButton=!0),this.from=this.from-this.pageSize,this.to=this.to-this.rowData.length,this.dataservice.getActivities(this.count,this.pageSize).valueChanges.subscribe(function(e){t.meta=e.data.activities.meta,t.rowData=e.data.activities.data})}},{key:"getCrops",value:function(){var t=this;this.dataservice.getCrops().valueChanges.subscribe(function(e){t.Crops=e.data.crops.data})}},{key:"getStates",value:function(){var t=this;this.dataservice.getStates().valueChanges.subscribe(function(e){t.States=e.data.states.data})}},{key:"getAreas",value:function(t){var e=this;this.dataservice.getAreas(t).valueChanges.subscribe(function(t){e.Areas=t.data.areas.data})}},{key:"onGridReady",value:function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.gridApi.sizeColumnsToFit()}},{key:"onRowClicked",value:function(t){console.log("row",t.data)}},{key:"onChange",value:function(t){this.file=[];for(var e=0;e<t.target.files.length;e++)this.file.push(t.target.files[e]);console.log(this.file)}},{key:"onSelectionChanged",value:function(t){var e=this.gridApi.getSelectedRows();this.router.navigate(["/activities/activity_details",e[0].id],{state:{data:e}})}},{key:"openModal",value:function(){this.activitiesModal.show()}},{key:"activitiesSubmit",value:function(){var t=this;this.btnLoading=!0,this.dataservice.createActivity(this.activitiesForm.value).subscribe(function(e){e.data,e.data.createActivity?(t.toastr.success("Success!"),t.getActivities(),t.activitiesForm.reset(),t.btnLoading=!1,t.activitiesModal.hide(),t.gridApi.deselectAll()):(t.toastr.error("Failed. Please check the fields!"),t.btnLoading=!1)})}},{key:"downloadActivities",value:function(){var t=this;console.log(this.downloadExcelForm.value),this.btnLoading=!0,this.dataservice.downloadActivities(this.downloadExcelForm.value).subscribe(function(e){var i;e.body,console.log(e),200===e.status&&"Success"==e.body.status?(t.toastr.success(e.body.message),t.btnLoading=!1,window.open("".concat(v.a.apiUrl).concat(null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.path),"_blank")):(t.btnLoading=!1,t.toastr.error(e.body.message))})}},{key:"uploadActivities",value:function(){var t=this;this.dataservice.uploadActivities(this.file).subscribe(function(e){200==e.status?(console.log(e),t.toastr.success("Success!"),t.file=null,t.getActivities(),t.uploadActivitiesModal.hide()):t.toastr.error("Failed!")})}}]),e}(),q.\u0275fac=function(t){return new(t||q)(m.Mb(c.a),m.Mb(s.c),m.Mb(l.c),m.Mb(p.b))},q.\u0275cmp=m.Gb({type:q,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(m.Ic(R,1),m.Ic(h,1),m.Ic(g,1)),2&t&&(m.rc(i=m.ac())&&(e.activitiesModal=i.first),m.rc(i=m.ac())&&(e.downloadActivitiesModal=i.first),m.rc(i=m.ac())&&(e.uploadActivitiesModal=i.first))},decls:191,vars:24,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-outline-secondary",3,"click"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"row"],[1,"col-12"],["id","myGrid","animateRows","true",1,"ag-theme-alpine",2,"width","100%","height","65vh",3,"columnDefs","rowData","rowSelection","selectionChanged","gridReady"],["agGrid",""],[1,"float-left","mt-3"],["type","button",1,"btn","btn-primary","float-right","m-2",3,"disabled","click"],[1,"float-right","mt-3"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["activitiesModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"col"],[1,"form-group"],["for","ActivityType"],[1,"danger"],["id","ActivityType","required","","ngModel","","name","ActivityType","formControlName","ActivityType",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","FarmDemo"],["value","GroupFarmerTraining"],["value","MegaFarmerTraining"],["value","FarmDay"],["value","RetailersTraining"],["for","area"],["id","area","required","","ngModel","","name","area","formControlName","area",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","Latitude"],["type","number","id","Latitude","name","Latitude","formControlName","Latitude","placeholder","Enter Latitude",1,"form-control"],["for","Longitude"],["type","number","id","Longitude","name","Longitude","formControlName","Longitude","placeholder","Enter Longitude",1,"form-control"],["for","NoOfAttendees"],["type","number","id","NoOfAttendees","name","NoOfAttendees","formControlName","NoOfAttendees","placeholder","Enter no. of attendees",1,"form-control"],["class","danger",4,"ngIf"],["for","Reason"],["id","Reason","rows","5","name","Reason","formControlName","Reason","placeholder","Enter body",1,"form-control"],["for","FarmerName"],["type","text","id","FarmerName","name","FarmerName","formControlName","FarmerName","placeholder","Enter name",1,"form-control"],["for","crop"],["id","crop","ngModel","","name","crop","formControlName","crop",1,"form-control"],["for","ConditionOfCrop"],["id","ConditionOfCrop","name","ConditionOfCrop","formControlName","ConditionOfCrop",1,"form-control"],["value","Good"],["value","VeryGood"],["value","Excellent"],["for","PlannedFarmDay"],["type","date","id","PlannedFarmDay","name","PlannedFarmDay","formControlName","PlannedFarmDay","placeholder","Enter Date",1,"form-control"],["for","Date"],["type","date","id","Date","name","Date","formControlName","Date","placeholder","Enter Date",1,"form-control"],["for","Time"],["type","time","id","Time","name","Time","formControlName","Time","placeholder","Enter Time",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["downloadActivitiesModal","bs-modal"],["for","fromDate"],["type","date","id","fromDate","required","","ngModel","","name","fromDate","formControlName","fromDate",1,"form-control"],["for","toDate"],["type","date","id","toDate","required","","ngModel","","name","toDate","formControlName","toDate",1,"form-control"],["uploadActivitiesModal","bs-modal"],["for","Image"],["type","file","id","File","accept",".xlsx","name","File","formControlName","File","placeholder","Choose file",1,"form-control",3,"change"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){var i=m.Tb();m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"h2"),m.Dc(4,"Activities"),m.Rb(),m.Sb(5,"div"),m.Sb(6,"button",3),m.Zb("click",function(){return m.vc(i),m.sc(138).show()}),m.Dc(7," Download sheets "),m.Rb(),m.Sb(8,"button",3),m.Zb("click",function(){return m.vc(i),m.sc(169).show()}),m.Dc(9," Upload sheet "),m.Rb(),m.Sb(10,"button",4),m.Zb("click",function(){return e.openModal()}),m.Dc(11," Add New Activity "),m.Rb(),m.Rb(),m.Rb(),m.Sb(12,"div",5),m.Sb(13,"div",6),m.Sb(14,"div",7),m.Sb(15,"ag-grid-angular",8,9),m.Zb("selectionChanged",function(t){return e.onSelectionChanged(t)})("gridReady",function(t){return e.onGridReady(t)}),m.Rb(),m.Sb(17,"span",10),m.Dc(18),m.Rb(),m.Sb(19,"button",11),m.Zb("click",function(){return e.loadNext()}),m.Dc(20," Next "),m.Rb(),m.Sb(21,"span",12),m.Dc(22),m.Rb(),m.Sb(23,"button",11),m.Zb("click",function(){return e.loadPrev()}),m.Dc(24," Prev "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(25,"div",13,14),m.Sb(27,"div",15),m.Sb(28,"div",16),m.Sb(29,"div",17),m.Sb(30,"h4",18),m.Dc(31,"Add Activity"),m.Rb(),m.Sb(32,"button",19),m.Zb("click",function(){return m.vc(i),m.sc(26).hide()}),m.Sb(33,"span",20),m.Dc(34,"\xd7"),m.Rb(),m.Rb(),m.Rb(),m.Sb(35,"div",21),m.Sb(36,"form",22),m.Zb("ngSubmit",function(){return e.activitiesSubmit()}),m.Sb(37,"div",6),m.Sb(38,"div",23),m.Sb(39,"div",24),m.Sb(40,"label",25),m.Dc(41,"Activity Type "),m.Sb(42,"span",26),m.Dc(43,"*"),m.Rb(),m.Rb(),m.Sb(44,"select",27),m.Sb(45,"option",28),m.Dc(46,"Choose..."),m.Rb(),m.Sb(47,"option",29),m.Dc(48,"Farm Demo"),m.Rb(),m.Sb(49,"option",30),m.Dc(50," Group Farmer Training "),m.Rb(),m.Sb(51,"option",31),m.Dc(52," Mega Farmer Training "),m.Rb(),m.Sb(53,"option",32),m.Dc(54,"Farm Day"),m.Rb(),m.Sb(55,"option",33),m.Dc(56,"Retailers Training"),m.Rb(),m.Rb(),m.Rb(),m.Sb(57,"div",24),m.Sb(58,"label",34),m.Dc(59,"City "),m.Sb(60,"span",26),m.Dc(61,"*"),m.Rb(),m.Rb(),m.Sb(62,"select",35),m.Sb(63,"option",28),m.Dc(64,"Choose..."),m.Rb(),m.Bc(65,y,2,2,"option",36),m.Rb(),m.Rb(),m.Sb(66,"div",24),m.Sb(67,"label",37),m.Dc(68,"Latitude "),m.Sb(69,"span",26),m.Dc(70,"*"),m.Rb(),m.Rb(),m.Nb(71,"input",38),m.Rb(),m.Sb(72,"div",24),m.Sb(73,"label",39),m.Dc(74,"Longitude "),m.Sb(75,"span",26),m.Dc(76,"*"),m.Rb(),m.Rb(),m.Nb(77,"input",40),m.Rb(),m.Sb(78,"div",24),m.Sb(79,"label",41),m.Dc(80,"Number of attendees "),m.Sb(81,"span",26),m.Dc(82,"*"),m.Rb(),m.Rb(),m.Nb(83,"input",42),m.Bc(84,D,2,0,"div",43),m.Rb(),m.Sb(85,"div",24),m.Sb(86,"label",44),m.Dc(87,"Body "),m.Sb(88,"span",26),m.Dc(89,"*"),m.Rb(),m.Rb(),m.Nb(90,"textarea",45),m.Rb(),m.Rb(),m.Sb(91,"div",23),m.Sb(92,"div",24),m.Sb(93,"label",46),m.Dc(94,"Farmer name"),m.Rb(),m.Nb(95,"input",47),m.Bc(96,A,2,0,"div",43),m.Rb(),m.Sb(97,"div",24),m.Sb(98,"label",48),m.Dc(99,"Crop"),m.Rb(),m.Sb(100,"select",49),m.Sb(101,"option",28),m.Dc(102,"Choose..."),m.Rb(),m.Bc(103,C,2,2,"option",36),m.Rb(),m.Rb(),m.Sb(104,"div",24),m.Sb(105,"label",50),m.Dc(106,"Condition of crop"),m.Rb(),m.Sb(107,"select",51),m.Sb(108,"option",28),m.Dc(109,"Choose..."),m.Rb(),m.Sb(110,"option",52),m.Dc(111,"Good"),m.Rb(),m.Sb(112,"option",53),m.Dc(113,"Very Good"),m.Rb(),m.Sb(114,"option",54),m.Dc(115,"Excellent"),m.Rb(),m.Rb(),m.Rb(),m.Sb(116,"div",24),m.Sb(117,"label",55),m.Dc(118,"Planned farm day"),m.Rb(),m.Nb(119,"input",56),m.Rb(),m.Sb(120,"div",24),m.Sb(121,"label",57),m.Dc(122,"Date "),m.Sb(123,"span",26),m.Dc(124,"*"),m.Rb(),m.Rb(),m.Nb(125,"input",58),m.Rb(),m.Sb(126,"div",24),m.Sb(127,"label",59),m.Dc(128,"Time "),m.Sb(129,"span",26),m.Dc(130,"*"),m.Rb(),m.Rb(),m.Nb(131,"input",60),m.Rb(),m.Rb(),m.Rb(),m.Sb(132,"button",61),m.Zb("click",function(){return m.vc(i),m.sc(26).hide()}),m.Dc(133," Close "),m.Rb(),m.Sb(134,"button",62),m.Bc(135,F,1,0,"span",63),m.Dc(136," Save changes "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(137,"div",13,64),m.Sb(139,"div",15),m.Sb(140,"div",16),m.Sb(141,"div",17),m.Sb(142,"h4",18),m.Dc(143,"Download Activity"),m.Rb(),m.Sb(144,"button",19),m.Zb("click",function(){return m.vc(i),m.sc(138).hide()}),m.Sb(145,"span",20),m.Dc(146,"\xd7"),m.Rb(),m.Rb(),m.Rb(),m.Sb(147,"div",21),m.Sb(148,"form",22),m.Zb("ngSubmit",function(){return e.downloadActivities()}),m.Sb(149,"div",6),m.Sb(150,"div",23),m.Sb(151,"div",24),m.Sb(152,"label",65),m.Dc(153,"From"),m.Sb(154,"span",26),m.Dc(155,"*"),m.Rb(),m.Rb(),m.Nb(156,"input",66),m.Rb(),m.Sb(157,"div",24),m.Sb(158,"label",67),m.Dc(159,"From"),m.Sb(160,"span",26),m.Dc(161,"*"),m.Rb(),m.Rb(),m.Nb(162,"input",68),m.Rb(),m.Rb(),m.Rb(),m.Sb(163,"button",61),m.Zb("click",function(){return m.vc(i),m.sc(138).hide()}),m.Dc(164," Close "),m.Rb(),m.Sb(165,"button",62),m.Bc(166,N,1,0,"span",63),m.Dc(167," Download "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(168,"div",13,69),m.Sb(170,"div",15),m.Sb(171,"div",16),m.Sb(172,"div",17),m.Sb(173,"h4",18),m.Dc(174,"Upload Activities"),m.Rb(),m.Sb(175,"button",19),m.Zb("click",function(){return m.vc(i),m.sc(169).hide()}),m.Sb(176,"span",20),m.Dc(177,"\xd7"),m.Rb(),m.Rb(),m.Rb(),m.Sb(178,"div",21),m.Sb(179,"form",22),m.Zb("ngSubmit",function(){return e.uploadActivities()}),m.Sb(180,"div",6),m.Sb(181,"div",23),m.Sb(182,"div",24),m.Sb(183,"label",70),m.Dc(184,"Excel file"),m.Rb(),m.Sb(185,"input",71),m.Zb("change",function(t){return e.onChange(t)}),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(186,"button",61),m.Zb("click",function(){return m.vc(i),m.sc(169).hide()}),m.Dc(187," Close "),m.Rb(),m.Sb(188,"button",62),m.Bc(189,k,1,0,"span",63),m.Dc(190," Upload "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()}2&t&&(m.Ab(10),m.jc("disabled",!e.disableButton),m.Ab(5),m.jc("columnDefs",e.columnDefs)("rowData",e.rowData)("rowSelection",e.rowSelection),m.Ab(3),m.Hc("",e.from," to ",e.to," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.total,""),m.Ab(1),m.jc("disabled",e.disableNextButton),m.Ab(3),m.Gc("Page ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.page," of ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.pageCount,""),m.Ab(1),m.jc("disabled",e.disablePrevButton),m.Ab(13),m.jc("formGroup",e.activitiesForm),m.Ab(29),m.jc("ngForOf",e.Areas),m.Ab(19),m.jc("ngIf",e.activitiesForm.value.NoOfAttendees>999999),m.Ab(12),m.jc("ngIf",e.checkSpecialCharacters(e.activitiesForm.value.FarmerName)),m.Ab(7),m.jc("ngForOf",e.Crops),m.Ab(31),m.jc("disabled",e.btnLoading||!e.activitiesForm.valid),m.Ab(1),m.jc("ngIf",e.btnLoading),m.Ab(13),m.jc("formGroup",e.downloadExcelForm),m.Ab(17),m.jc("disabled",e.btnLoading||!e.downloadExcelForm.valid),m.Ab(1),m.jc("ngIf",e.btnLoading),m.Ab(13),m.jc("formGroup",e.uploadExcelForm),m.Ab(9),m.jc("disabled",e.btnLoading||!e.uploadExcelForm.valid),m.Ab(1),m.jc("ngIf",e.btnLoading))},directives:[f.a,S.a,l.t,l.j,l.e,l.q,l.p,l.i,l.d,l.m,l.u,r.j,l.n,l.b,r.k],encapsulation:2}),q),data:{title:"Activities"}},{path:"activity_details/:id",component:(O=function(){function t(e,a,o,n,r){i(this,t),this.dataservice=e,this.activatedRouter=a,this.router=o,this.fb=n,this.toastr=r,this.loading=!0,this.details=[],this.btnLoading=!1,this.dateConverterMin=u.s,this.dateConverter=u.r,this.Areas=[],this.Crops=[],this.activitiesForm=this.fb.group({ActivityType:["",l.s.required],Latitude:["",l.s.required],Longitude:["",l.s.required],NoOfAttendees:["",l.s.required],area:["",l.s.required],crop:[""],FarmerName:[""],PlannedFarmDay:[""],ConditionOfCrop:[""],Date:["",l.s.required],Time:["",l.s.required],Reason:["",l.s.required]})}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.activatedRouter.params.subscribe(function(e){t.id=e.id}),this.getActivity(),this.getAreas(),this.getCrops()}},{key:"getActivity",value:function(){var t=this;this.dataservice.getActivity(this.id).valueChanges.subscribe(function(e){var i,a,o,n,r,d,b,s,c,u,v,m,p,f,S,R,h,g,y,D,A,C,F,N,k,w,L,M,T,E,j,O,q,x,P,I,Z,B;console.log("getActivity",null===(a=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.activity)||void 0===a?void 0:a.data),t.details=null===(n=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.activity)||void 0===n?void 0:n.data,t.activitiesForm=t.fb.group({ActivityType:[null===(d=null===(r=t.details)||void 0===r?void 0:r.attributes)||void 0===d?void 0:d.ActivityType,l.s.required],Latitude:[null===(s=null===(b=t.details)||void 0===b?void 0:b.attributes)||void 0===s?void 0:s.Latitude,l.s.required],Longitude:[null===(u=null===(c=t.details)||void 0===c?void 0:c.attributes)||void 0===u?void 0:u.Longitude,l.s.required],NoOfAttendees:[null===(m=null===(v=t.details)||void 0===v?void 0:v.attributes)||void 0===m?void 0:m.NoOfAttendees,l.s.required],area:[null===(R=null===(S=null===(f=null===(p=t.details)||void 0===p?void 0:p.attributes)||void 0===f?void 0:f.area)||void 0===S?void 0:S.data)||void 0===R?void 0:R.id,l.s.required],crop:[null===(D=null===(y=null===(g=null===(h=t.details)||void 0===h?void 0:h.attributes)||void 0===g?void 0:g.crop)||void 0===y?void 0:y.data)||void 0===D?void 0:D.id],FarmerName:[null===(C=null===(A=t.details)||void 0===A?void 0:A.attributes)||void 0===C?void 0:C.FarmerName],PlannedFarmDay:[null===(N=null===(F=t.details)||void 0===F?void 0:F.attributes)||void 0===N?void 0:N.PlannedFarmDay],ConditionOfCrop:[null===(w=null===(k=t.details)||void 0===k?void 0:k.attributes)||void 0===w?void 0:w.ConditionOfCrop],Date:[null===(M=null===(L=t.details)||void 0===L?void 0:L.attributes)||void 0===M?void 0:M.Date,l.s.required],Time:[null===(E=null===(T=t.details)||void 0===T?void 0:T.attributes)||void 0===E?void 0:E.Time,l.s.required],Reason:[null===(O=null===(j=t.details)||void 0===j?void 0:j.attributes)||void 0===O?void 0:O.Reason,l.s.required]}),t.maplink="https://maps.google.com/?q="+(null===(P=null===(x=null===(q=t.details)||void 0===q?void 0:q.attributes)||void 0===x?void 0:x.Latitude)||void 0===P?void 0:P.toString())+","+(null===(B=null===(Z=null===(I=t.details)||void 0===I?void 0:I.attributes)||void 0===Z?void 0:Z.Longitude)||void 0===B?void 0:B.toString()),t.loading=!1})}},{key:"getCrops",value:function(){var t=this;this.dataservice.getCrops().valueChanges.subscribe(function(e){console.log("getCrops",e.data.crops.data),t.Crops=e.data.crops.data})}},{key:"getAreas",value:function(t){var e=this;this.dataservice.getAreas(t).valueChanges.subscribe(function(t){console.log("getAreas",t.data.areas.data),e.Areas=t.data.areas.data})}},{key:"returnActivityType",value:function(t){if(t)return t.replace(/([A-Z])/g," $1").trim()}},{key:"dateConvertor",value:function(t){return new Date(t)}},{key:"openModal",value:function(t,e){this.resultModal.show(),console.log(t,e),this.flag=e}},{key:"FormSubmit",value:function(){var t=this;console.log(this.activitiesForm.value),this.btnLoading=!0,this.dataservice.updateActivity(this.activitiesForm.value,this.id).subscribe(function(e){e.data,console.log("response",e),e.data.updateActivity?(t.toastr.success("Activity updated successfully!"),t.btnLoading=!1,t.editModal.hide(),t.getActivity()):(t.toastr.error("Failed. Please check the fields!"),t.btnLoading=!1)})}},{key:"deleteActivity",value:function(){var t=this;this.dataservice.deleteActivity(this.id).subscribe(function(e){console.log("response",e),e.data.deleteActivity?(t.toastr.success("Success!"),t.deleteModal.hide(),t.router.navigate(["/activities/all"])):t.toastr.error("Failed!")})}}]),t}(),O.\u0275fac=function(t){return new(t||O)(m.Mb(c.a),m.Mb(s.a),m.Mb(s.c),m.Mb(l.c),m.Mb(p.b))},O.\u0275cmp=m.Gb({type:O,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(m.Ic(w,1),m.Ic(L,1),m.Ic(M,1)),2&t&&(m.rc(i=m.ac())&&(e.editModal=i.first),m.rc(i=m.ac())&&(e.resultModal=i.first),m.rc(i=m.ac())&&(e.deleteModal=i.first))},decls:200,vars:19,consts:[[1,"animated","fadeIn"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","editModalLabel","aria-hidden","true",1,"modal","fade"],["deleteModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-content"],[1,"modal-body","text-center"],[1,"modal-footer","justify-content-around"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button","data-toggle","modal",1,"btn","btn-primary",3,"click"],["type","button","data-toggle","modal",1,"btn","btn-danger",3,"click"],[1,"card-body"],[1,"row"],[1,"col"],[1,"table","table-striped"],["target","_blank",3,"href"],["editModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","ActivityType"],[1,"danger"],["id","ActivityType","required","","ngModel","","name","ActivityType","formControlName","ActivityType",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","FarmDemo"],["value","GroupFarmerTraining"],["value","MegaFarmerTraining"],["value","FarmDay"],["value","RetailersTraining"],["for","area"],["id","area","required","","ngModel","","name","area","formControlName","area",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","Latitude"],["type","text","id","Latitude","name","Latitude","formControlName","Latitude","placeholder","Enter Latitude",1,"form-control"],["for","Longitude"],["type","text","id","Longitude","name","Longitude","formControlName","Longitude","placeholder","Enter Longitude",1,"form-control"],["for","NoOfAttendees"],["type","text","id","NoOfAttendees","name","NoOfAttendees","formControlName","NoOfAttendees","placeholder","Enter No. of attendees",1,"form-control"],["for","Reason"],["id","Reason","rows","5","name","Reason","formControlName","Reason","placeholder","Enter body",1,"form-control"],["for","FarmerName"],["type","text","id","FarmerName","name","FarmerName","formControlName","FarmerName","placeholder","Enter name",1,"form-control"],["for","crop"],["id","crop","ngModel","","name","crop","formControlName","crop",1,"form-control"],["for","ConditionOfCrop"],["type","text","id","ConditionOfCrop","name","ConditionOfCrop","formControlName","ConditionOfCrop","placeholder","Enter condition",1,"form-control"],["for","PlannedFarmDay"],["type","date","id","PlannedFarmDay","name","PlannedFarmDay","formControlName","PlannedFarmDay","placeholder","Enter Date",1,"form-control"],["for","Date"],["type","date","id","Date","name","Date","formControlName","Date","placeholder","Enter Date",1,"form-control"],["for","Time"],["type","time","id","Time","name","Time","formControlName","Time","placeholder","Enter Time",1,"form-control"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){var i=m.Tb();m.Sb(0,"div",0),m.Sb(1,"div",1,2),m.Sb(3,"div",3),m.Sb(4,"div",4),m.Sb(5,"div",5),m.Dc(6," Do you want to delete this activity? "),m.Rb(),m.Sb(7,"div",6),m.Sb(8,"button",7),m.Zb("click",function(){return m.vc(i),m.sc(2).hide()}),m.Dc(9," No! Cancel. "),m.Rb(),m.Sb(10,"button",8),m.Zb("click",function(){return e.deleteActivity()}),m.Dc(11," Yes! Delete. "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(12,"div",9),m.Sb(13,"div",10),m.Sb(14,"h2"),m.Dc(15,"Activity Details"),m.Rb(),m.Sb(16,"span"),m.Sb(17,"button",11),m.Zb("click",function(){return m.vc(i),m.sc(99).show()}),m.Dc(18," Edit "),m.Rb(),m.Sb(19,"button",12),m.Zb("click",function(){return m.vc(i),m.sc(2).show()}),m.Dc(20," Delete "),m.Rb(),m.Rb(),m.Rb(),m.Sb(21,"div",13),m.Sb(22,"div",14),m.Sb(23,"div",15),m.Sb(24,"div",14),m.Sb(25,"table",16),m.Sb(26,"tbody"),m.Sb(27,"tr"),m.Sb(28,"td"),m.Dc(29,"ID"),m.Rb(),m.Sb(30,"td"),m.Dc(31),m.Rb(),m.Rb(),m.Sb(32,"tr"),m.Sb(33,"td"),m.Dc(34,"Activity type"),m.Rb(),m.Sb(35,"td"),m.Dc(36),m.Rb(),m.Rb(),m.Sb(37,"tr"),m.Sb(38,"td"),m.Dc(39,"Date"),m.Rb(),m.Sb(40,"td"),m.Dc(41),m.Rb(),m.Rb(),m.Sb(42,"tr"),m.Sb(43,"td"),m.Dc(44,"Time"),m.Rb(),m.Sb(45,"td"),m.Dc(46),m.Rb(),m.Rb(),m.Sb(47,"tr"),m.Sb(48,"td"),m.Dc(49,"City"),m.Rb(),m.Sb(50,"td"),m.Dc(51),m.Rb(),m.Rb(),m.Sb(52,"tr"),m.Sb(53,"td"),m.Dc(54,"No. of Attendees"),m.Rb(),m.Sb(55,"td"),m.Dc(56),m.Rb(),m.Rb(),m.Sb(57,"tr"),m.Sb(58,"td"),m.Dc(59,"Location"),m.Rb(),m.Sb(60,"td"),m.Sb(61,"a",17),m.Dc(62,"Click here to view location"),m.Rb(),m.Rb(),m.Rb(),m.Sb(63,"tr"),m.Sb(64,"td"),m.Dc(65,"Farmer Name"),m.Rb(),m.Sb(66,"td"),m.Dc(67),m.Rb(),m.Rb(),m.Sb(68,"tr"),m.Sb(69,"td"),m.Dc(70,"Crop"),m.Rb(),m.Sb(71,"td"),m.Dc(72),m.Rb(),m.Rb(),m.Sb(73,"tr"),m.Sb(74,"td"),m.Dc(75,"Condition of crop"),m.Rb(),m.Sb(76,"td"),m.Dc(77),m.Rb(),m.Rb(),m.Sb(78,"tr"),m.Sb(79,"td"),m.Dc(80,"Planned farm day"),m.Rb(),m.Sb(81,"td"),m.Dc(82),m.Rb(),m.Rb(),m.Sb(83,"tr"),m.Sb(84,"td"),m.Dc(85,"Body"),m.Rb(),m.Sb(86,"td"),m.Dc(87),m.Rb(),m.Rb(),m.Sb(88,"tr"),m.Sb(89,"td"),m.Dc(90,"Created at"),m.Rb(),m.Sb(91,"td"),m.Dc(92),m.Rb(),m.Rb(),m.Sb(93,"tr"),m.Sb(94,"td"),m.Dc(95,"Last updated"),m.Rb(),m.Sb(96,"td"),m.Dc(97),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(98,"div",1,18),m.Sb(100,"div",19),m.Sb(101,"div",4),m.Sb(102,"div",20),m.Sb(103,"h4",21),m.Dc(104,"Edit details"),m.Rb(),m.Sb(105,"button",22),m.Zb("click",function(){return m.vc(i),m.sc(99).hide()}),m.Sb(106,"span",23),m.Dc(107,"\xd7"),m.Rb(),m.Rb(),m.Rb(),m.Sb(108,"div",24),m.Sb(109,"form",25),m.Zb("ngSubmit",function(){return e.FormSubmit()}),m.Sb(110,"div",14),m.Sb(111,"div",15),m.Sb(112,"div",26),m.Sb(113,"label",27),m.Dc(114,"Activity Type "),m.Sb(115,"span",28),m.Dc(116,"*"),m.Rb(),m.Rb(),m.Sb(117,"select",29),m.Sb(118,"option",30),m.Dc(119,"Choose..."),m.Rb(),m.Sb(120,"option",31),m.Dc(121,"Farm Demo"),m.Rb(),m.Sb(122,"option",32),m.Dc(123," Group Farmer Training "),m.Rb(),m.Sb(124,"option",33),m.Dc(125," Mega Farmer Training "),m.Rb(),m.Sb(126,"option",34),m.Dc(127,"Farm Day"),m.Rb(),m.Sb(128,"option",35),m.Dc(129,"Retailers Training"),m.Rb(),m.Rb(),m.Rb(),m.Sb(130,"div",26),m.Sb(131,"label",36),m.Dc(132,"City "),m.Sb(133,"span",28),m.Dc(134,"*"),m.Rb(),m.Rb(),m.Sb(135,"select",37),m.Sb(136,"option",30),m.Dc(137,"Choose..."),m.Rb(),m.Bc(138,T,2,2,"option",38),m.Rb(),m.Rb(),m.Sb(139,"div",26),m.Sb(140,"label",39),m.Dc(141,"Latitude "),m.Sb(142,"span",28),m.Dc(143,"*"),m.Rb(),m.Rb(),m.Nb(144,"input",40),m.Rb(),m.Sb(145,"div",26),m.Sb(146,"label",41),m.Dc(147,"Longitude "),m.Sb(148,"span",28),m.Dc(149,"*"),m.Rb(),m.Rb(),m.Nb(150,"input",42),m.Rb(),m.Sb(151,"div",26),m.Sb(152,"label",43),m.Dc(153,"Number of attendees "),m.Sb(154,"span",28),m.Dc(155,"*"),m.Rb(),m.Rb(),m.Nb(156,"input",44),m.Rb(),m.Sb(157,"div",26),m.Sb(158,"label",45),m.Dc(159,"Body "),m.Sb(160,"span",28),m.Dc(161,"*"),m.Rb(),m.Rb(),m.Nb(162,"textarea",46),m.Rb(),m.Rb(),m.Sb(163,"div",15),m.Sb(164,"div",26),m.Sb(165,"label",47),m.Dc(166,"Farmer name"),m.Rb(),m.Nb(167,"input",48),m.Rb(),m.Sb(168,"div",26),m.Sb(169,"label",49),m.Dc(170,"Crop"),m.Rb(),m.Sb(171,"select",50),m.Sb(172,"option",30),m.Dc(173,"Choose..."),m.Rb(),m.Bc(174,E,2,2,"option",38),m.Rb(),m.Rb(),m.Sb(175,"div",26),m.Sb(176,"label",51),m.Dc(177,"Condition of crop"),m.Rb(),m.Nb(178,"input",52),m.Rb(),m.Sb(179,"div",26),m.Sb(180,"label",53),m.Dc(181,"Planned farm day"),m.Rb(),m.Nb(182,"input",54),m.Rb(),m.Sb(183,"div",26),m.Sb(184,"label",55),m.Dc(185,"Date "),m.Sb(186,"span",28),m.Dc(187,"*"),m.Rb(),m.Rb(),m.Nb(188,"input",56),m.Rb(),m.Sb(189,"div",26),m.Sb(190,"label",57),m.Dc(191,"Time "),m.Sb(192,"span",28),m.Dc(193,"*"),m.Rb(),m.Rb(),m.Nb(194,"input",58),m.Rb(),m.Rb(),m.Rb(),m.Sb(195,"button",7),m.Zb("click",function(){return m.vc(i),m.sc(99).hide()}),m.Dc(196," Close "),m.Rb(),m.Sb(197,"button",59),m.Bc(198,j,1,0,"span",60),m.Dc(199," Save changes "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()}2&t&&(m.Ab(31),m.Ec(null==e.details?null:e.details.id),m.Ab(5),m.Fc(" ",e.returnActivityType(null==e.details||null==e.details.attributes?null:e.details.attributes.ActivityType)," "),m.Ab(5),m.Fc(" ",e.dateConverterMin(null==e.details||null==e.details.attributes?null:e.details.attributes.Date)," "),m.Ab(5),m.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.Time),m.Ab(5),m.Ec(null==e.details||null==e.details.attributes||null==e.details.attributes.area||null==e.details.attributes.area.data||null==e.details.attributes.area.data.attributes?null:e.details.attributes.area.data.attributes.Name),m.Ab(5),m.Fc(" ",null==e.details||null==e.details.attributes?null:e.details.attributes.NoOfAttendees," "),m.Ab(5),m.kc("href",e.maplink,m.xc),m.Ab(6),m.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.FarmerName),m.Ab(5),m.Fc(" ",null==e.details||null==e.details.attributes||null==e.details.attributes.crop||null==e.details.attributes.crop.data||null==e.details.attributes.crop.data.attributes?null:e.details.attributes.crop.data.attributes.Name," "),m.Ab(5),m.Ec(null==e.details||null==e.details.attributes?null:e.details.attributes.ConditionOfCrop),m.Ab(5),m.Fc(" ",e.dateConverterMin(null==e.details||null==e.details.attributes?null:e.details.attributes.PlannedFarmDay)," "),m.Ab(5),m.Fc(" ",null==e.details||null==e.details.attributes?null:e.details.attributes.Reason," "),m.Ab(5),m.Ec(e.dateConvertor(null==e.details||null==e.details.attributes?null:e.details.attributes.createdAt)),m.Ab(5),m.Ec(e.dateConvertor(null==e.details||null==e.details.attributes?null:e.details.attributes.updatedAt)),m.Ab(12),m.jc("formGroup",e.activitiesForm),m.Ab(29),m.jc("ngForOf",e.Areas),m.Ab(36),m.jc("ngForOf",e.Crops),m.Ab(23),m.jc("disabled",e.btnLoading||!e.activitiesForm.valid),m.Ab(1),m.jc("ngIf",e.btnLoading))},directives:[S.a,l.t,l.j,l.e,l.q,l.p,l.i,l.d,l.m,l.u,r.j,l.b,r.k],encapsulation:2}),O),data:{title:"Activity Details"}}]}],Z=((P=function t(){i(this,t)}).\u0275fac=function(t){return new(t||P)},P.\u0275mod=m.Kb({type:P}),P.\u0275inj=m.Jb({imports:[[s.g.forChild(I)],s.g]}),P),B=((x=function t(){i(this,t)}).\u0275fac=function(t){return new(t||x)},x.\u0275mod=m.Kb({type:x}),x.\u0275inj=m.Jb({imports:[[r.c,b.a,l.o,f.b.withComponents([]),Z,d.c.forRoot(),S.b.forRoot(),l.f]]}),x)}}])}();