(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{jykL:function(t,a,e){"use strict";e.r(a),e.d(a,"ChatModule",function(){return B});var i=e("SVse"),r=e("s7LF"),s=e("FE24"),l=e("2ZVE"),u=e("iInd"),n=e("AytR"),c=e("R7Hv"),b=e("8Y7J"),o=e("EApP");const d=["searchfield"];function h(t,a){if(1&t){const t=b.Tb();b.Sb(0,"ul",31),b.Sb(1,"li",32),b.Sb(2,"a",33),b.Zb("click",function(){return b.vc(t),b.cc().toggleChat(!1)}),b.Dc(3,"All Chats"),b.Rb(),b.Sb(4,"a",33),b.Zb("click",function(){return b.vc(t),b.cc().toggleChat(!0)}),b.Dc(5,"Ask Indorama"),b.Rb(),b.Rb(),b.Rb()}}function m(t,a){if(1&t&&b.Nb(0,"img",39),2&t){const t=b.cc().$implicit,a=b.cc();b.lc("src","",a.baseURL,"",null==t||null==t.attributes||null==t.attributes.chatInitiatedBy||null==t.attributes.chatInitiatedBy.data||null==t.attributes.chatInitiatedBy.data.attributes||null==t.attributes.chatInitiatedBy.data.attributes.prof_pic||null==t.attributes.chatInitiatedBy.data.attributes.prof_pic.data||null==t.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes?null:t.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes.url,"",b.xc)}}function g(t,a){1&t&&b.Nb(0,"img",40)}function p(t,a){if(1&t){const t=b.Tb();b.Sb(0,"a",34),b.Zb("click",function(){b.vc(t);const e=a.$implicit;return b.cc().getChatMessages(e)}),b.Sb(1,"div",35),b.Bc(2,m,1,2,"img",36),b.Bc(3,g,1,0,"img",26),b.Sb(4,"div",37),b.Dc(5),b.Sb(6,"div",38),b.Dc(7),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&t){const t=a.$implicit;b.Ab(2),b.jc("ngIf",null==t||null==t.attributes||null==t.attributes.chatInitiatedBy||null==t.attributes.chatInitiatedBy.data||null==t.attributes.chatInitiatedBy.data.attributes||null==t.attributes.chatInitiatedBy.data.attributes.prof_pic.data||null==t.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes?null:t.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes.url),b.Ab(1),b.jc("ngIf",!(null!=t&&null!=t.attributes&&null!=t.attributes.chatInitiatedBy&&null!=t.attributes.chatInitiatedBy.data&&null!=t.attributes.chatInitiatedBy.data.attributes&&null!=t.attributes.chatInitiatedBy.data.attributes.prof_pic.data&&null!=t.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes&&t.attributes.chatInitiatedBy.data.attributes.prof_pic.data.attributes.url)),b.Ab(2),b.Fc(" ",null==t||null==t.attributes||null==t.attributes.chatInitiatedBy||null==t.attributes.chatInitiatedBy.data||null==t.attributes.chatInitiatedBy.data.attributes?null:t.attributes.chatInitiatedBy.data.attributes.Name," "),b.Ab(2),b.Gc(" ",null==t||null==t.attributes||null==t.attributes.members||null==t.attributes.members.data[1]||null==t.attributes.members.data[1].attributes?null:t.attributes.members.data[1].attributes.Name," - ",null==t||null==t.attributes||null==t.attributes.members||null==t.attributes.members.data[0]||null==t.attributes.members.data[0].attributes?null:t.attributes.members.data[0].attributes.Name," ")}}function f(t,a){if(1&t&&b.Nb(0,"img",41),2&t){const t=b.cc();b.lc("src","",t.baseURL,"",null==t.chatMembers[0]||null==t.chatMembers[0].attributes||null==t.chatMembers[0].attributes.prof_pic.data||null==t.chatMembers[0].attributes.prof_pic.data.attributes?null:t.chatMembers[0].attributes.prof_pic.data.attributes.url,"",b.xc)}}function _(t,a){1&t&&b.Nb(0,"img",40)}function v(t,a){if(1&t&&b.Nb(0,"img",41),2&t){const t=b.cc();b.lc("src","",t.baseURL,"",null==t.chatMembers[1]||null==t.chatMembers[1].attributes||null==t.chatMembers[1].attributes.prof_pic.data||null==t.chatMembers[1].attributes.prof_pic.data.attributes?null:t.chatMembers[1].attributes.prof_pic.data.attributes.url,"",b.xc)}}function M(t,a){1&t&&b.Nb(0,"img",40)}function S(t,a){if(1&t&&b.Nb(0,"img",50),2&t){const t=b.cc().$implicit,a=b.cc();b.lc("src","",a.baseURL,"",null==t||null==t.attributes||null==t.attributes.from_user||null==t.attributes.from_user.data||null==t.attributes.from_user.data.attributes||null==t.attributes.from_user.data.attributes.prof_pic||null==t.attributes.from_user.data.attributes.prof_pic.data||null==t.attributes.from_user.data.attributes.prof_pic.data.attributes?null:t.attributes.from_user.data.attributes.prof_pic.data.attributes.url,"",b.xc)}}function C(t,a){1&t&&b.Nb(0,"img",51)}function y(t,a){if(1&t&&b.Nb(0,"img",52),2&t){const t=b.cc().$implicit,a=b.cc();b.lc("src","",a.baseURL,"",null==t||null==t.attributes||null==t.attributes.image_attachment||null==t.attributes.image_attachment.data||null==t.attributes.image_attachment.data.attributes?null:t.attributes.image_attachment.data.attributes.url,"",b.xc)}}function R(t,a){if(1&t&&(b.Sb(0,"div",42),b.Sb(1,"div"),b.Bc(2,S,1,2,"img",43),b.Bc(3,C,1,0,"img",44),b.Sb(4,"div",45),b.Dc(5),b.Nb(6,"br"),b.Dc(7),b.Rb(),b.Rb(),b.Sb(8,"div",46),b.Sb(9,"div",47),b.Dc(10),b.Rb(),b.Sb(11,"a",48),b.Bc(12,y,1,2,"img",49),b.Rb(),b.Sb(13,"div"),b.Dc(14),b.Rb(),b.Rb(),b.Rb()),2&t){const t=a.$implicit,e=b.cc();b.Eb("chat-message-right",(null==t||null==t.attributes||null==t.attributes.from_user||null==t.attributes.from_user.data||null==t.attributes.from_user.data.attributes?null:t.attributes.from_user.data.attributes.Name)==(null==e.chatMembers[1]||null==e.chatMembers[1].attributes?null:e.chatMembers[1].attributes.Name))("chat-message-left",(null==t||null==t.attributes||null==t.attributes.from_user||null==t.attributes.from_user.data||null==t.attributes.from_user.data.attributes?null:t.attributes.from_user.data.attributes.Name)!==(null==e.chatMembers[1]||null==e.chatMembers[1].attributes?null:e.chatMembers[1].attributes.Name)),b.Ab(2),b.jc("ngIf",null==t||null==t.attributes||null==t.attributes.from_user||null==t.attributes.from_user.data||null==t.attributes.from_user.data.attributes||null==t.attributes.from_user.data.attributes.prof_pic||null==t.attributes.from_user.data.attributes.prof_pic.data||null==t.attributes.from_user.data.attributes.prof_pic.data.attributes?null:t.attributes.from_user.data.attributes.prof_pic.data.attributes.url),b.Ab(1),b.jc("ngIf",!(null!=t&&null!=t.attributes&&null!=t.attributes.from_user&&null!=t.attributes.from_user.data&&null!=t.attributes.from_user.data.attributes&&null!=t.attributes.from_user.data.attributes.prof_pic&&null!=t.attributes.from_user.data.attributes.prof_pic.data&&null!=t.attributes.from_user.data.attributes.prof_pic.data.attributes&&t.attributes.from_user.data.attributes.prof_pic.data.attributes.url)),b.Ab(2),b.Fc(" ",e.convertDate(null==t||null==t.attributes?null:t.attributes.createdAt),""),b.Ab(2),b.Fc("",e.convertTime(null==t||null==t.attributes?null:t.attributes.createdAt)," "),b.Ab(3),b.Fc(" ",null==t||null==t.attributes||null==t.attributes.from_user||null==t.attributes.from_user.data||null==t.attributes.from_user.data.attributes?null:t.attributes.from_user.data.attributes.Name," "),b.Ab(1),b.lc("href","",e.baseURL,"",null==t||null==t.attributes||null==t.attributes.image_attachment||null==t.attributes.image_attachment.data||null==t.attributes.image_attachment.data.attributes?null:t.attributes.image_attachment.data.attributes.url,"",b.xc),b.Ab(1),b.jc("ngIf",null==t||null==t.attributes||null==t.attributes.image_attachment||null==t.attributes.image_attachment.data||null==t.attributes.image_attachment.data.attributes?null:t.attributes.image_attachment.data.attributes.url),b.Ab(2),b.Ec(null==t||null==t.attributes?null:t.attributes.message)}}const w=[{path:"",children:[{path:"",redirectTo:"cropprices"},{path:"all",component:(()=>{class t{constructor(t,a,e){this.dataservice=t,this.router=a,this.toastr=e,this.chatData=[],this.messageData=[],this.chatMembers=[],this.loading=!0,this.messageLoading=!1,this.btnLoading=!1,this.pageSize=10,this.count=0,this.key=null,this.selectedList="All Chats",this.listCheck=!1,this.baseURL=n.a.apiUrl}ngOnInit(){console.log(this.router),this.getallChats(this.pageSize,this.pageSize*this.count,this.key)}getallChats(t,a,e,i){console.log(t,a),this.loading=!0,this.dataservice.getallChats(t,a,e,i).valueChanges.subscribe(t=>{var a;this.chatData=this.chatData.concat(null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.chats.data),console.log("getallChats",this.chatData),this.loading=!1})}toggleChat(t){t?(this.chatData=[],this.selectedList="Ask Indorama",this.listCheck=t,this.getallChats(this.pageSize,0,void 0,!0)):(this.chatData=[],this.selectedList="All Chats",this.listCheck=t,this.getallChats(this.pageSize,0,void 0,!1))}searchChats(){this.chatData=[],this.count=0,this.getallChats(this.pageSize,0,this.key,this.listCheck)}clearSearch(){this.chatData=[],this.count=0,this.key=void 0,this.searchfield.nativeElement.value=" ",this.getallChats(this.pageSize,0,void 0,this.listCheck)}loadMoreChats(){this.count++,this.getallChats(this.pageSize,this.pageSize*this.count,this.key,this.listCheck)}convertDate(t){return new Date(t).toLocaleDateString()}convertTime(t){return new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})}onChange(t){this.key=t.target.value,console.log(t.target.value)}getChatMessages(t){var a,e;this.messageLoading=!0,this.chatMembers=null===(e=null===(a=t.attributes)||void 0===a?void 0:a.members)||void 0===e?void 0:e.data,console.log(this.chatMembers),this.dataservice.getChatMessages(t.id).valueChanges.subscribe(t=>{var a,e,i;console.log("getChatMessages",null===(e=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.chat)||void 0===e?void 0:e.data),this.messageData=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.chat.data,this.messageLoading=!1})}}return t.\u0275fac=function(a){return new(a||t)(b.Mb(c.a),b.Mb(u.c),b.Mb(o.b))},t.\u0275cmp=b.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,a){if(1&t&&b.Ic(d,1),2&t){let t;b.rc(t=b.ac())&&(a.searchfield=t.first)}},decls:47,vars:9,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["dropdown","",1,"btn-group","float-right"],["dropdownToggle","","type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["class","dropdown-menu","role","menu",4,"dropdownMenu"],[1,"content"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-12","col-lg-5","col-xl-3","border-right",2,"max-height","90vh","overflow-y","scroll"],[1,"px-4","d-none","d-md-block"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["ngModel","","type","text","placeholder","Search...",1,"form-control","my-3",3,"change"],["searchfield",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],["class","list-group-item list-group-item-action border-0",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary",2,"float","right",3,"click"],[1,"d-block","d-lg-none","mt-1","mb-0"],[1,"col-12","col-lg-7","col-xl-9"],[1,"py-2","px-4","border-bottom","d-none","d-lg-block"],[1,"d-flex","align-items-center","py-1",2,"justify-content","space-between"],[1,"flex-grow-1","pl-3"],["class","rounded-circle mr-1","alt","Sharon Lessman","width","40","height","40",3,"src",4,"ngIf"],["src","assets/img/avatars/6.png","class","rounded-circle mr-1","alt","profile pic","width","40","height","40",4,"ngIf"],[1,"position-relative"],[1,"chat-messages","p-4",2,"max-height","80vh","overflow-y","scroll"],["messageSection",""],["class","pb-4",3,"chat-message-right","chat-message-left",4,"ngFor","ngForOf"],["role","menu",1,"dropdown-menu"],["role","menuitem"],[1,"dropdown-item",3,"click"],[1,"list-group-item","list-group-item-action","border-0",3,"click"],[1,"d-flex","align-items-start"],["class","rounded-circle mr-1","alt","profile pic","width","40","height","40",3,"src",4,"ngIf"],[1,"flex-grow-1","ml-3"],[1,"small"],["alt","profile pic","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],["src","assets/img/avatars/6.png","alt","profile pic","width","40","height","40",1,"rounded-circle","mr-1"],["alt","Sharon Lessman","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],[1,"pb-4"],["class","rounded-circle mr-1","alt","Chris Wood","width","40","height","40",3,"src",4,"ngIf"],["src","assets/img/avatars/6.png","class","rounded-circle mr-1","alt","Chris Wood","width","40","height","40",4,"ngIf"],[1,"text-muted","small","text-nowrap","mt-2"],[1,"flex-shrink-1","bg-light","rounded","py-2","px-3","mx-3",2,"max-width","400px"],[1,"font-weight-bold","mb-1"],["target","_blank",3,"href"],["class","mr-1","alt","Chris Wood","width","100%","height","100",3,"src",4,"ngIf"],["alt","Chris Wood","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],["src","assets/img/avatars/6.png","alt","Chris Wood","width","40","height","40",1,"rounded-circle","mr-1"],["alt","Chris Wood","width","100%","height","100",1,"mr-1",3,"src"]],template:function(t,a){1&t&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div",2),b.Sb(3,"h2"),b.Dc(4,"Chat Home"),b.Rb(),b.Sb(5,"div",3),b.Sb(6,"button",4),b.Dc(7),b.Nb(8,"span",5),b.Rb(),b.Bc(9,h,6,0,"ul",6),b.Rb(),b.Rb(),b.Sb(10,"main",7),b.Sb(11,"div",8),b.Sb(12,"div",1),b.Sb(13,"div",9),b.Sb(14,"div",10),b.Sb(15,"div",11),b.Sb(16,"div",12),b.Sb(17,"div",13),b.Sb(18,"input",14,15),b.Zb("change",function(t){return a.onChange(t)}),b.Rb(),b.Sb(20,"button",16),b.Zb("click",function(){return a.searchChats()}),b.Dc(21," Search "),b.Rb(),b.Sb(22,"button",17),b.Zb("click",function(){return a.clearSearch()}),b.Dc(23," Clear "),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Bc(24,p,8,5,"a",18),b.Sb(25,"button",19),b.Zb("click",function(){return a.loadMoreChats()}),b.Dc(26," Load more "),b.Rb(),b.Nb(27,"hr",20),b.Rb(),b.Sb(28,"div",21),b.Sb(29,"div",22),b.Sb(30,"div",23),b.Sb(31,"div"),b.Sb(32,"div",24),b.Bc(33,f,1,2,"img",25),b.Bc(34,_,1,0,"img",26),b.Sb(35,"strong"),b.Dc(36),b.Rb(),b.Rb(),b.Rb(),b.Sb(37,"div"),b.Sb(38,"div",24),b.Bc(39,v,1,2,"img",25),b.Bc(40,M,1,0,"img",26),b.Sb(41,"strong"),b.Dc(42),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(43,"div",27),b.Sb(44,"div",28,29),b.Bc(46,R,15,13,"div",30),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.Ab(7),b.Fc(" ",a.selectedList,""),b.Ab(17),b.jc("ngForOf",a.chatData),b.Ab(9),b.jc("ngIf",null==a.chatMembers[0]||null==a.chatMembers[0].attributes||null==a.chatMembers[0].attributes.prof_pic.data||null==a.chatMembers[0].attributes.prof_pic.data.attributes?null:a.chatMembers[0].attributes.prof_pic.data.attributes.url),b.Ab(1),b.jc("ngIf",!(null!=a.chatMembers[0]&&null!=a.chatMembers[0].attributes&&null!=a.chatMembers[0].attributes.prof_pic.data&&null!=a.chatMembers[0].attributes.prof_pic.data.attributes&&a.chatMembers[0].attributes.prof_pic.data.attributes.url)),b.Ab(2),b.Ec(null==a.chatMembers[0]||null==a.chatMembers[0].attributes?null:a.chatMembers[0].attributes.Name),b.Ab(3),b.jc("ngIf",null==a.chatMembers[1]||null==a.chatMembers[1].attributes||null==a.chatMembers[1].attributes.prof_pic.data||null==a.chatMembers[1].attributes.prof_pic.data.attributes?null:a.chatMembers[1].attributes.prof_pic.data.attributes.url),b.Ab(1),b.jc("ngIf",!(null!=a.chatMembers[1]&&null!=a.chatMembers[1].attributes&&null!=a.chatMembers[1].attributes.prof_pic.data&&null!=a.chatMembers[1].attributes.prof_pic.data.attributes&&a.chatMembers[1].attributes.prof_pic.data.attributes.url)),b.Ab(2),b.Ec(null==a.chatMembers[1]||null==a.chatMembers[1].attributes?null:a.chatMembers[1].attributes.Name),b.Ab(4),b.jc("ngForOf",null==a.messageData||null==a.messageData.attributes||null==a.messageData.attributes.messages?null:a.messageData.attributes.messages.data))},directives:[s.a,s.d,s.b,r.b,r.i,r.l,i.j,i.k],styles:["body[_ngcontent-%COMP%]{margin-top:20px}.chat-online[_ngcontent-%COMP%]{color:#34ce57}.chat-offline[_ngcontent-%COMP%]{color:#e4606d}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:800px;overflow-y:scroll}.chat-message-left[_ngcontent-%COMP%], .chat-message-right[_ngcontent-%COMP%]{display:flex;flex-shrink:0}.chat-message-left[_ngcontent-%COMP%]{margin-right:auto}.chat-message-right[_ngcontent-%COMP%]{flex-direction:row-reverse;margin-left:auto}.py-3[_ngcontent-%COMP%]{padding-top:1rem!important;padding-bottom:1rem!important}.px-4[_ngcontent-%COMP%]{padding-right:1.5rem!important;padding-left:1.5rem!important}.flex-grow-0[_ngcontent-%COMP%]{flex-grow:0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #dee2e6!important}"]}),t})(),data:{title:"Chats"}}]}];let I=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({imports:[[u.g.forChild(w)],u.g]}),t})();var x=e("YFAK"),k=e("LqlI");let B=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({imports:[[i.c,l.a,r.o,x.b.withComponents([]),I,s.c.forRoot(),k.b.forRoot(),r.f]]}),t})()}}]);